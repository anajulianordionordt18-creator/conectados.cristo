(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,92479,887968,227423,273207,819969,e=>{"use strict";e.s(["assertChatId",()=>$,"useChatHashNavigation",()=>ei,"useChatId",()=>X,"useChatLoadingState",()=>et,"useChatMessages",()=>ee,"useChatMessagesLength",()=>er,"useChatPrefillOptions",()=>es,"useChatState",()=>Q,"useChatSyncState",()=>en,"useChatUndoState",()=>eo,"useIsChatCreated",()=>ea,"useSetChatState",()=>q],92479);var t,r=e.i(418625),a=e.i(15916),o=e.i(423746);let n={messages:[],isLoading:!1,lastSyncedAt:Date.now(),undo:null,activeForkKey:void 0,isContinuing:!1,isStreaming:!1,isAuthor:!1,isRestoring:!1};e.s(["CHAT_METADATA_FALLBACK",0,{title:"",isNew:!1,authorId:"",ownerId:"",tailwindV4Default:!1},"CHAT_STATE_FALLBACK",0,n],887968),e.s(["useLeafMessage",()=>F],273207);var s=e.i(767373),i=e.i(99474),l=e.i(999817),u=e.i(841953),d=e.i(964652),c=e.i(387575),h=e.i(775962),f=e.i(199352),p=e.i(731487),m=e.i(845027),g=e.i(860913),C=e.i(936413),b=e.i(179918),S=e.i(984379),v=e.i(62554),A=e.i(781242),k=e.i(495812),y=e.i(812053),E=e.i(234132),I=e.i(663917);let w=o.default.use||(e=>{switch(e.status){case"pending":throw e;case"fulfilled":return e.value;case"rejected":throw e.reason;default:throw e.status="pending",e.then(t=>{e.status="fulfilled",e.value=t},t=>{e.status="rejected",e.reason=t}),e}}),R={dedupe:!0};l.OBJECT.defineProperty(u.SWRConfig,"defaultValue",{value:d.defaultConfig});let T=(0,a.withArgs)((e,t,r)=>{let{cache:n,compare:s,suspense:l,fallbackData:u,revalidateOnMount:d,revalidateIfStale:T,refreshInterval:P,refreshWhenHidden:U,refreshWhenOffline:D,keepPreviousData:M}=r,[F,j,L,O]=c.SWRGlobalState.get(n),[_,z]=(0,h.serialize)(e),N=(0,o.useRef)(!1),V=(0,o.useRef)(!1),K=(0,o.useRef)(_),B=(0,o.useRef)(t),x=(0,o.useRef)(r),H=()=>x.current.isVisible()&&x.current.isOnline(),[J,W,G,Y]=(0,f.createCacheHelper)(n,_),Z=(0,o.useRef)({}).current,$=(0,p.isUndefined)(u)?(0,p.isUndefined)(r.fallback)?m.UNDEFINED:r.fallback[_]:u;$&&(0,g.isPromiseLike)($)&&($=w($));let X=(e,t)=>{for(let r in Z)if("data"===r){if(!s(e[r],t[r])&&(!(0,p.isUndefined)(e[r])||!s(es,t[r])))return!1}else if(t[r]!==e[r])return!1;return!0},q=(0,o.useMemo)(()=>{let e=!!_&&!!t&&((0,p.isUndefined)(d)?!x.current.isPaused()&&!l&&!1!==T:d),r=t=>{let r=(0,I.mergeObjects)(t);return(delete r._k,e)?{isValidating:!0,isLoading:!0,...r}:r},a=J(),o=Y(),n=r(a),s=a===o?n:r(o),i=n;return[()=>{let e=r(J());return X(e,i)?(i.data=e.data,i.isLoading=e.isLoading,i.isValidating=e.isValidating,i.error=e.error,i):(i=e,e)},()=>s]},[n,_]),Q=(0,i.useSyncExternalStore)((0,o.useCallback)(e=>G(_,(t,r)=>{X(r,t)||e()}),[n,_]),q[0],q[1]),ee=!N.current,et=F[_]&&F[_].length>0,er=Q.data,ea=(0,p.isUndefined)(er)?$:er,eo=Q.error,en=(0,o.useRef)(ea),es=M?(0,p.isUndefined)(er)?en.current:er:ea,ei=(!et||!!(0,p.isUndefined)(eo))&&(ee&&!(0,p.isUndefined)(d)?d:!x.current.isPaused()&&(l?!(0,p.isUndefined)(ea)&&T:(0,p.isUndefined)(ea)||T)),el=!!(_&&t&&ee&&ei),eu=(0,p.isUndefined)(Q.isValidating)?el:Q.isValidating,ed=(0,p.isUndefined)(Q.isLoading)?el:Q.isLoading,ec=(0,o.useCallback)(async e=>{let t,a,o=B.current;if(!_||!o||V.current||x.current.isPaused())return!1;let n=!0,i=e||{},l=!L[_]||!i.dedupe,u=()=>E.IS_REACT_LEGACY?!V.current&&_===K.current&&N.current:_===K.current,d={isValidating:!1,isLoading:!1},c=()=>{W(d)},h=()=>{let e=L[_];e&&e[1]===a&&delete L[_]},f={isValidating:!0};(0,p.isUndefined)(J().data)&&(f.isLoading=!0);try{if(l&&(W(f),r.loadingTimeout&&(0,p.isUndefined)(J().data)&&setTimeout(()=>{n&&u()&&x.current.onLoadingSlow(_,r)},r.loadingTimeout),L[_]=[o(z),(0,C.getTimestamp)()]),[t,a]=L[_],t=await t,l&&setTimeout(h,r.dedupingInterval),!L[_]||L[_][1]!==a)return l&&u()&&x.current.onDiscarded(_),!1;d.error=m.UNDEFINED;let e=j[_];if(!(0,p.isUndefined)(e)&&(a<=e[0]||a<=e[1]||0===e[1]))return c(),l&&u()&&x.current.onDiscarded(_),!1;let i=J().data;d.data=s(i,t)?i:t,l&&u()&&x.current.onSuccess(t,_,r)}catch(r){h();let e=x.current,{shouldRetryOnError:t}=e;!e.isPaused()&&(d.error=r,l&&u()&&(e.onError(r,_,e),(!0===t||(0,b.isFunction)(t)&&t(r))&&(!x.current.revalidateOnFocus||!x.current.revalidateOnReconnect||H())&&e.onErrorRetry(r,_,e,e=>{let t=F[_];t&&t[0]&&t[0](S.revalidateEvents.ERROR_REVALIDATE_EVENT,e)},{retryCount:(i.retryCount||0)+1,dedupe:!0})))}return n=!1,c(),!0},[_,n]),eh=(0,o.useCallback)((...e)=>(0,v.internalMutate)(n,K.current,...e),[]);if((0,A.useIsomorphicLayoutEffect)(()=>{B.current=t,x.current=r,(0,p.isUndefined)(er)||(en.current=er)}),(0,A.useIsomorphicLayoutEffect)(()=>{if(!_)return;let e=ec.bind(m.UNDEFINED,R),t=0,r=(0,a.subscribeCallback)(_,F,(r,a={})=>{if(r==S.revalidateEvents.FOCUS_EVENT){let r=Date.now();x.current.revalidateOnFocus&&r>t&&H()&&(t=r+x.current.focusThrottleInterval,e())}else if(r==S.revalidateEvents.RECONNECT_EVENT)x.current.revalidateOnReconnect&&H()&&e();else if(r==S.revalidateEvents.MUTATE_EVENT)return ec();else if(r==S.revalidateEvents.ERROR_REVALIDATE_EVENT)return ec(a)});return V.current=!1,K.current=_,N.current=!0,W({_k:z}),ei&&((0,p.isUndefined)(ea)||k.IS_SERVER?e():(0,y.rAF)(e)),()=>{V.current=!0,r()}},[_]),(0,A.useIsomorphicLayoutEffect)(()=>{let e;function t(){let t=(0,b.isFunction)(P)?P(J().data):P;t&&-1!==e&&(e=setTimeout(r,t))}function r(){!J().error&&(U||x.current.isVisible())&&(D||x.current.isOnline())?ec(R).then(t):t()}return t(),()=>{e&&(clearTimeout(e),e=-1)}},[P,U,D,_]),(0,o.useDebugValue)(es),l&&(0,p.isUndefined)(ea)&&_){if(!E.IS_REACT_LEGACY&&k.IS_SERVER)throw Error("Fallback data is required when using Suspense in SSR.");B.current=t,x.current=r,V.current=!1;let e=O[_];if((0,p.isUndefined)(e)||w(eh(e)),(0,p.isUndefined)(eo)){let e=ec(R);(0,p.isUndefined)(es)||(e.status="fulfilled",e.value=!0),w(e)}else throw eo}return{mutate:eh,get data(){return Z.data=!0,es},get error(){return Z.error=!0,eo},get isValidating(){return Z.isValidating=!0,eu},get isLoading(){return Z.isLoading=!0,ed}}}),P=E.IS_REACT_LEGACY?e=>{e()}:o.default.startTransition,U=(0,a.withMiddleware)(T,()=>(e,t,r={})=>{let{mutate:n}=(0,a.useSWRConfig)(),s=(0,o.useRef)(e),i=(0,o.useRef)(t),l=(0,o.useRef)(r),u=(0,o.useRef)(0),[d,c,f]=(e=>{let[,t]=(0,o.useState)({}),r=(0,o.useRef)(!1),a=(0,o.useRef)(e),n=(0,o.useRef)({data:!1,error:!1,isValidating:!1}),s=(0,o.useCallback)(e=>{let o=!1,s=a.current;for(let t in e)s[t]!==e[t]&&(s[t]=e[t],n.current[t]&&(o=!0));o&&!r.current&&t({})},[]);return(0,A.useIsomorphicLayoutEffect)(()=>(r.current=!1,()=>{r.current=!0})),[a,n.current,s]})({data:m.UNDEFINED,error:m.UNDEFINED,isMutating:!1}),p=d.current,g=(0,o.useCallback)(async(e,t)=>{let[r,a]=(0,h.serialize)(s.current);if(!i.current)throw Error("Can’t trigger the mutation: missing fetcher.");if(!r)throw Error("Can’t trigger the mutation: missing key.");let o=(0,I.mergeObjects)((0,I.mergeObjects)({populateCache:!1,throwOnError:!0},l.current),t),d=(0,C.getTimestamp)();u.current=d,f({isMutating:!0});try{let t=await n(r,i.current(a,{arg:e}),(0,I.mergeObjects)(o,{throwOnError:!0}));return u.current<=d&&(P(()=>f({data:t,isMutating:!1,error:void 0})),null==o.onSuccess||o.onSuccess.call(o,t,r,o)),t}catch(e){if(u.current<=d&&(P(()=>f({error:e,isMutating:!1})),null==o.onError||o.onError.call(o,e,r,o),o.throwOnError))throw e}},[]),b=(0,o.useCallback)(()=>{u.current=(0,C.getTimestamp)(),f({data:m.UNDEFINED,error:m.UNDEFINED,isMutating:!1})},[]);return(0,A.useIsomorphicLayoutEffect)(()=>{s.current=e,i.current=t,l.current=r}),{trigger:g,reset:b,get data(){return c.data=!0,p.data},get error(){return c.error=!0,p.error},get isMutating(){return c.isMutating=!0,p.isMutating}}});e.s(["default",()=>U],227423);let D={};async function M(e,{arg:t}){let r=(0,s.getLeafMessageIdFromForkKey)(t.activeForkKey);if(r)return fetch(e,{method:"POST",body:JSON.stringify({chatId:t.chatId,messageId:r})}).then(e=>e.json())}function F(){let{chatId:e}=X(),{trigger:t}=U("/chat/api/chat/leaf",M),{data:a,mutate:n}=(0,r.default)(["chat:leaf:cache",e],null),s=(0,o.useCallback)(e=>{n(t=>{if(!e)return t;let r=!1,a={...t||D};for(let t of e)a[t]!==e&&(a[t]=e,r=!0);return r?a:t})},[n]);return{cacheForkKey:s,saveLeafMessageId:(0,o.useCallback)(({chatId:e,activeForkKey:r})=>{e&&t({chatId:e,activeForkKey:r})},[t]),forkKeyCache:a||D,switchForkKey:s}}var j=e.i(848751),L=e.i(726718);e.s(["getChatActions",()=>Y,"getChatAtoms",()=>G,"getWritableChatAtoms",()=>J,"useCurrentChat",()=>Z],819969);var O=e.i(9654),_=e.i(753533),z=e.i(142219),N=e.i(470259),V=e.i(452703),K=((t={})[t.Denied=0]="Denied",t[t.Allowed=1]="Allowed",t[t.AllowedPublic=2]="AllowedPublic",t[t.NotFound=3]="NotFound",t),B=e.i(387040),x=e.i(628764);let H=new Map,J=(0,_.cacheResultById)(H,()=>({isStreaming:(0,O.atom)(!1),isStreamingBlock:(0,O.atom)(!1),template:(0,O.atom)((0,B.err)(x.HttpError.notFound().toJSON())),attributes:(0,O.atom)((0,B.err)(x.HttpError.notFound().toJSON())),externalMeta:(0,O.atom)((0,B.err)(x.HttpError.notFound().toJSON())),latest:(0,O.atom)((0,B.err)(x.HttpError.notFound().toJSON()))})),W=new Map,G=(0,_.cacheResultById)(W,e=>{let t=J(e);return{...t,deploymentState:(0,O.atom)(e=>{let r=e(t.externalMeta);if(!r.ok){if(r.error.errorCode===N.MISSING_MFA_SCOPE)return"two-factor-error";if(r.error.errorCode!==N.NOT_FOUND)return"error"}return r.ok&&r.value.deployment?(0,V.mapReadyStateToDeploymentState)(r.value.deployment.readyState):"not-deployed"}),isAuthor:(0,O.atom)(e=>{let r=e(t.attributes);return!!r.ok&&r.value.isAuthor}),canWriteToChat:(0,O.atom)(e=>{let r=e(t.attributes);return!!r.ok&&!!r.value.canWriteToChat}),projectProtection:(0,O.atom)(e=>{let r=e(t.attributes);return r.ok&&r.value.project&&r.value.project.vercelProject?r.value.project.vercelProject.project.passwordProtection?.deploymentType==="all"?"password":r.value.project.vercelProject.project.ssoProtection?.deploymentType==="all"?"team":"public":"public"}),project:(0,O.atom)(e=>{let r=e(t.attributes);return r.ok?r.value.project:null}),authorId:(0,O.atom)(e=>{let r=e(t.attributes);return r.ok&&r.value.authorId?r.value.authorId:null}),title:(0,O.atom)(e=>{let r=e(t.attributes);return r.ok&&r.value.title?r.value.title:null}),ownerId:(0,O.atom)(e=>{let r=e(t.attributes);return r.ok&&r.value.ownerId?r.value.ownerId:null}),isTitleSameAsProject:(0,O.atom)(e=>{let r=e(t.attributes);return!!r.ok&&!!r.value.project&&r.value.title===r.value.project.name})}});function Y(e){let t=J(e);return{setIsStreaming:function(e){z.store.set(t.isStreaming,e)},setIsStreamingBlock:function(e){z.store.set(t.isStreamingBlock,e)},initializeNewChatState:function(){z.store.set(t.attributes,(0,B.ok)({designSystemId:null,title:void 0,access:K.Allowed,session:void 0,team:void 0,isAdmin:!1,isAuthor:!0,ownerId:void 0,authorId:void 0,canWriteToChat:!0,hasBlock:!1,tailwindV4Default:!0,nextVersion15Default:!0,project:null}))},setChatTitle:function(e){let r=z.store.get(t.attributes);r.ok&&z.store.set(t.attributes,(0,B.ok)({...r.value,title:e}))}}}function Z(){let e=$(X().chatId);return{atoms:G(e),actions:Y(e),chatId:e}}function $(e){return e??"_no_chat_"}function X(){let{data:e,mutate:t}=(0,r.default)("chat:id"),a=(0,j.usePathname)();return(0,o.useEffect)(()=>{(0,L.getChatIdFromPathname)(a)||t(void 0,!1)},[a,t]),{chatId:e}}function q(){let{chatId:e}=X(),{setIsStreaming:t}=Y(e??"no_chat"),{saveLeafMessageId:r,cacheForkKey:s}=F(),{mutate:i}=(0,a.useSWRConfig)();return(0,o.useCallback)(a=>{i(["chat:state",e],o=>{let i=o??n;return(i.activeForkKey&&s(i.activeForkKey),"function"==typeof a)?{...i,...a(i)}:(a.activeForkKey&&a.saveLeafMessageId&&e&&(delete a.saveLeafMessageId,r({chatId:e,activeForkKey:a.activeForkKey})),t(a.isStreaming??!1),{...i,...a})})},[i,e,t,s,r])}function Q(){let e=$(X().chatId),{data:t}=(0,r.default)(["chat:state",e]);return{...t??n,chatId:e}}function ee(){let e=$(X().chatId),{data:t}=(0,r.default)(["chat:state",e]);return(0,o.useMemo)(()=>{let r=t??n;return{messages:r.messages,activeForkKey:r.activeForkKey,chatId:e}},[t?.messages,t?.activeForkKey,e])}function et(){let e=$(X().chatId),{data:t}=(0,r.default)(["chat:state",e]);return(0,o.useMemo)(()=>{let r=t??n;return{isLoading:r.isLoading,isStreaming:r.isStreaming,isSyncing:r.isSyncing,isContinuing:r.isContinuing,isRestoring:r.isRestoring,initialStreamPromise:r.initialStreamPromise,chatId:e}},[t?.isLoading,t?.isStreaming,t?.isSyncing,t?.isContinuing,t?.isRestoring,t?.initialStreamPromise,e])}function er(){let e=$(X().chatId),{data:t}=(0,r.default)(["chat:state",e]),a=(0,o.useRef)(void 0);return(0,o.useMemo)(()=>{let r=(t?.messages??n.messages).length;return a.current&&a.current.messagesLength===r&&a.current.chatId===e||(a.current={messagesLength:r,chatId:e}),a.current},[t?.messages.length,e])}function ea(){let{messagesLength:e}=er();return{isChatCreated:(0,o.useMemo)(()=>e>1,[e])}}function eo(){let e=$(X().chatId),{data:t}=(0,r.default)(["chat:state",e]);return(0,o.useMemo)(()=>({undo:(t??n).undo,chatId:e}),[t?.undo,e])}function en(){let e=$(X().chatId),{data:t}=(0,r.default)(["chat:state",e]);return(0,o.useMemo)(()=>({lastSyncedAt:(t??n).lastSyncedAt,chatId:e}),[t?.lastSyncedAt,e])}function es(){let e=$(X().chatId),{data:t}=(0,r.default)(["chat:state",e]);return(0,o.useMemo)(()=>({prefillOptions:(t??n).prefillOptions,chatId:e}),[t?.prefillOptions,e])}function ei(){let e=$(X().chatId),{data:t}=(0,r.default)(["chat:state",e]);return(0,o.useMemo)(()=>({hashMessageId:(t??n).hashMessageId,chatId:e}),[t?.hashMessageId,e])}},75356,e=>{"use strict";e.s(["PROJECT_PAGE_SIZE",0,24])},443324,(e,t,r)=>{var a=function(){var e=String.fromCharCode,t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+-$",a={};function o(e,t){if(!a[e]){a[e]={};for(var r=0;r<e.length;r++)a[e][e.charAt(r)]=r}return a[e][t]}var n={compressToBase64:function(e){if(null==e)return"";var r=n._compress(e,6,function(e){return t.charAt(e)});switch(r.length%4){default:case 0:return r;case 1:return r+"===";case 2:return r+"==";case 3:return r+"="}},decompressFromBase64:function(e){return null==e?"":""==e?null:n._decompress(e.length,32,function(r){return o(t,e.charAt(r))})},compressToUTF16:function(t){return null==t?"":n._compress(t,15,function(t){return e(t+32)})+" "},decompressFromUTF16:function(e){return null==e?"":""==e?null:n._decompress(e.length,16384,function(t){return e.charCodeAt(t)-32})},compressToUint8Array:function(e){for(var t=n.compress(e),r=new Uint8Array(2*t.length),a=0,o=t.length;a<o;a++){var s=t.charCodeAt(a);r[2*a]=s>>>8,r[2*a+1]=s%256}return r},decompressFromUint8Array:function(t){if(null==t)return n.decompress(t);for(var r=Array(t.length/2),a=0,o=r.length;a<o;a++)r[a]=256*t[2*a]+t[2*a+1];var s=[];return r.forEach(function(t){s.push(e(t))}),n.decompress(s.join(""))},compressToEncodedURIComponent:function(e){return null==e?"":n._compress(e,6,function(e){return r.charAt(e)})},decompressFromEncodedURIComponent:function(e){return null==e?"":""==e?null:(e=e.replace(/ /g,"+"),n._decompress(e.length,32,function(t){return o(r,e.charAt(t))}))},compress:function(t){return n._compress(t,16,function(t){return e(t)})},_compress:function(e,t,r){if(null==e)return"";var a,o,n,s={},i={},l="",u="",d="",c=2,h=3,f=2,p=[],m=0,g=0;for(n=0;n<e.length;n+=1)if(l=e.charAt(n),Object.prototype.hasOwnProperty.call(s,l)||(s[l]=h++,i[l]=!0),u=d+l,Object.prototype.hasOwnProperty.call(s,u))d=u;else{if(Object.prototype.hasOwnProperty.call(i,d)){if(256>d.charCodeAt(0)){for(a=0;a<f;a++)m<<=1,g==t-1?(g=0,p.push(r(m)),m=0):g++;for(a=0,o=d.charCodeAt(0);a<8;a++)m=m<<1|1&o,g==t-1?(g=0,p.push(r(m)),m=0):g++,o>>=1}else{for(a=0,o=1;a<f;a++)m=m<<1|o,g==t-1?(g=0,p.push(r(m)),m=0):g++,o=0;for(a=0,o=d.charCodeAt(0);a<16;a++)m=m<<1|1&o,g==t-1?(g=0,p.push(r(m)),m=0):g++,o>>=1}0==--c&&(c=Math.pow(2,f),f++),delete i[d]}else for(a=0,o=s[d];a<f;a++)m=m<<1|1&o,g==t-1?(g=0,p.push(r(m)),m=0):g++,o>>=1;0==--c&&(c=Math.pow(2,f),f++),s[u]=h++,d=String(l)}if(""!==d){if(Object.prototype.hasOwnProperty.call(i,d)){if(256>d.charCodeAt(0)){for(a=0;a<f;a++)m<<=1,g==t-1?(g=0,p.push(r(m)),m=0):g++;for(a=0,o=d.charCodeAt(0);a<8;a++)m=m<<1|1&o,g==t-1?(g=0,p.push(r(m)),m=0):g++,o>>=1}else{for(a=0,o=1;a<f;a++)m=m<<1|o,g==t-1?(g=0,p.push(r(m)),m=0):g++,o=0;for(a=0,o=d.charCodeAt(0);a<16;a++)m=m<<1|1&o,g==t-1?(g=0,p.push(r(m)),m=0):g++,o>>=1}0==--c&&(c=Math.pow(2,f),f++),delete i[d]}else for(a=0,o=s[d];a<f;a++)m=m<<1|1&o,g==t-1?(g=0,p.push(r(m)),m=0):g++,o>>=1;0==--c&&(c=Math.pow(2,f),f++)}for(a=0,o=2;a<f;a++)m=m<<1|1&o,g==t-1?(g=0,p.push(r(m)),m=0):g++,o>>=1;for(;;){if(m<<=1,g==t-1){p.push(r(m));break}g++}return p.join("")},decompress:function(e){return null==e?"":""==e?null:n._decompress(e.length,32768,function(t){return e.charCodeAt(t)})},_decompress:function(t,r,a){var o,n,s,i,l,u,d,c=[],h=4,f=4,p=3,m="",g=[],C={val:a(0),position:r,index:1};for(o=0;o<3;o+=1)c[o]=o;for(s=0,l=4,u=1;u!=l;)i=C.val&C.position,C.position>>=1,0==C.position&&(C.position=r,C.val=a(C.index++)),s|=(i>0)*u,u<<=1;switch(s){case 0:for(s=0,l=256,u=1;u!=l;)i=C.val&C.position,C.position>>=1,0==C.position&&(C.position=r,C.val=a(C.index++)),s|=(i>0)*u,u<<=1;d=e(s);break;case 1:for(s=0,l=65536,u=1;u!=l;)i=C.val&C.position,C.position>>=1,0==C.position&&(C.position=r,C.val=a(C.index++)),s|=(i>0)*u,u<<=1;d=e(s);break;case 2:return""}for(c[3]=d,n=d,g.push(d);;){if(C.index>t)return"";for(s=0,l=Math.pow(2,p),u=1;u!=l;)i=C.val&C.position,C.position>>=1,0==C.position&&(C.position=r,C.val=a(C.index++)),s|=(i>0)*u,u<<=1;switch(d=s){case 0:for(s=0,l=256,u=1;u!=l;)i=C.val&C.position,C.position>>=1,0==C.position&&(C.position=r,C.val=a(C.index++)),s|=(i>0)*u,u<<=1;c[f++]=e(s),d=f-1,h--;break;case 1:for(s=0,l=65536,u=1;u!=l;)i=C.val&C.position,C.position>>=1,0==C.position&&(C.position=r,C.val=a(C.index++)),s|=(i>0)*u,u<<=1;c[f++]=e(s),d=f-1,h--;break;case 2:return g.join("")}if(0==h&&(h=Math.pow(2,p),p++),c[d])m=c[d];else{if(d!==f)return null;m=n+n.charAt(0)}g.push(m),c[f++]=n+m.charAt(0),h--,n=m,0==h&&(h=Math.pow(2,p),p++)}}};return n}();if("function"==typeof define&&define.amd)e.r,void 0!==a&&e.v(a);else null!=t?t.exports=a:"undefined"!=typeof angular&&null!=angular&&angular.module("LZString",[]).factory("LZString",function(){return a})},254211,941813,569543,e=>{"use strict";var t=e.i(9654);e.s(["MAX_FAVORITES",0,10,"MAX_RECENT_CHATS",0,50,"MAX_SHARED_CHATS",0,10],941813);var r=e.i(75356),a=e.i(443324),o=e.i(908431),n=e.i(917675);let s=o.z.object({webSearch:o.z.boolean(),generateImages:o.z.boolean(),designSystemId:o.z.string().nullable().default(null),customInstructionIds:o.z.array(o.z.string()).default([])}),i=o.z.object({lastUpdated:o.z.number()}),l={lastUpdated:y()},u=o.z.object({sidebarRecentChatsSkeleton:o.z.number(),sidebarSharedChatsSkeleton:o.z.number(),sidebarFavoriteChatsAndProjectsSkeleton:o.z.number(),sidebarRecentChatsCollapsed:o.z.boolean(),sidebarSharedChatsCollapsed:o.z.boolean(),sidebarFavoriteChatsAndProjectsCollapsed:o.z.boolean(),projectsSkeleton:o.z.number(),lastUpdated:o.z.number()}),d={sidebarRecentChatsSkeleton:Math.floor(25),sidebarSharedChatsSkeleton:Math.floor(5),sidebarFavoriteChatsAndProjectsSkeleton:Math.floor(10),sidebarRecentChatsCollapsed:!1,sidebarSharedChatsCollapsed:!1,sidebarFavoriteChatsAndProjectsCollapsed:!1,projectsSkeleton:r.PROJECT_PAGE_SIZE,lastUpdated:y()},c=o.z.enum(["build","ask"]),h=o.z.object({ratio:o.z.number(),visible:o.z.boolean().default(!0),savedRatio:o.z.number().optional(),savedVisibility:o.z.boolean().optional()}),f="input",p="output",m=h.extend({id:o.z.literal(f)}),g=h.extend({id:o.z.literal(p)}),C=o.z.union([m,g]),b=o.z.object({sidebarCollapsed:o.z.boolean(),lastUpdated:o.z.number(),modelConfiguration:n.ModelConfigurationSchema,toolConfiguration:s,messageMode:c,shouldShowUpgrade:o.z.boolean().default(!1),chatPanelLayout:o.z.array(C),chatMobilePanel:o.z.enum([f,p]),dismissedFeatureDialogs:o.z.record(o.z.string(),o.z.boolean()).default({})}),S={sidebarCollapsed:!1,lastUpdated:y(),modelConfiguration:{modelId:"v0-1.5-md",thinking:!1,imageGenerations:!1},toolConfiguration:{webSearch:!0,generateImages:!0,designSystemId:null,customInstructionIds:[]},messageMode:"build",shouldShowUpgrade:!1,chatMobilePanel:f,chatPanelLayout:[{id:f,ratio:.3,visible:!0},{id:p,ratio:.7,visible:!0}],dismissedFeatureDialogs:{}},v={chat:{schema:i,keyedSchema:o.z.record(o.z.string(),i),cookieKey:"v0-durable-chat-state"},scoped:{schema:u,keyedSchema:o.z.record(o.z.string(),u),cookieKey:"v0-durable-scoped-state"},root:{schema:b,keyedSchema:o.z.object({root:b}),cookieKey:"v0-durable-root-state"}};function A(e,t){try{if(!t)return null;let r=(0,a.decompressFromBase64)(t);if(!r)return null;let o=JSON.parse(r),n=e.safeParse(o);if(!n.success)throw Error("Invalid durable state",{cause:n.error});return n.data}catch(e){return console.warn("Error parsing durable state cookie:",e),null}}function k(e){return(0,a.compressToBase64)(JSON.stringify(e))}function y(){let e=new Date,t=e.getFullYear()%100,r=String(e.getMonth()+1).padStart(2,"0"),a=String(e.getDate()).padStart(2,"0"),o=String(e.getHours()).padStart(2,"0"),n=String(e.getMinutes()).padStart(2,"0");return parseInt(`${t}${r}${a}${o}${n}`)}function E(e,t){return e-t}e.s(["CHAT_INPUT_PANEL_ID",0,f,"CHAT_OUTPUT_PANEL_ID",0,p,"DEFAULT_DURABLE_CHAT_STATE",0,l,"DEFAULT_DURABLE_ROOT_STATE",0,S,"DEFAULT_DURABLE_SCOPED_STATE",0,d,"DURABLE_STORES",0,v,"compareCompactTimestamps",()=>E,"compressDurableState",()=>k,"getCurrentCompactTimestamp",()=>y,"parseDurableStateCookie",()=>A],569543);var I=e.i(753533),w=e.i(142219),R=e.i(162061);let T=new Map;function P(e){let t=v[e];return T.has(t.cookieKey)||T.set(t.cookieKey,A(t.keyedSchema,R.default.get(t.cookieKey))),T.get(t.cookieKey)}function U(e,t,r){let a={...P(e),...{[t]:r}},o=k(a);for(;o.length>2048&&Object.keys(a).length>0;){let e=Object.entries(a).sort(([,e],[,t])=>e.lastUpdated-t.lastUpdated).map(([e])=>e)[0]??null;if(!e)break;delete a[e],o=k(a)}R.default.set(v[e].cookieKey,o,{expires:365}),T.delete(v[e].cookieKey)}let D={chat:new Map,scoped:new Map,root:new Map},M=(0,I.cacheResultById)(D.chat,e=>{let r=F(e),a=(0,t.atom)(r.lastUpdated,(t,r,o)=>{let n;n=F(e),U("chat",e,{...n,lastUpdated:o,lastUpdated:y()}),r(a,o)});return{lastUpdated:a}});function F(e,t){var r;let a;if(t&&e in t){let r=t[e];if(r)return r}let o=function(e){let t=P("chat");if(t&&e in t){let r=t[e];if(r)return r}return null}(e);if(o)return o;let n=(r=e,(a=D.chat.get(r))?{lastUpdated:w.store.get(a.lastUpdated)}:null);return n?(U("chat",e,n),n):(U("chat",e,l),l)}let j=(0,I.cacheResultById)(D.scoped,e=>{let r=L(e);function a(e,t,r){let a=L(e);U("scoped",e,{...a,[t]:r,lastUpdated:y()})}let o=(0,t.atom)(r.sidebarRecentChatsSkeleton,(t,r,n)=>{a(e,"sidebarRecentChatsSkeleton",n),r(o,n)}),n=(0,t.atom)(r.sidebarSharedChatsSkeleton,(t,r,o)=>{a(e,"sidebarSharedChatsSkeleton",o),r(n,o)}),s=(0,t.atom)(r.sidebarFavoriteChatsAndProjectsSkeleton,(t,r,o)=>{a(e,"sidebarFavoriteChatsAndProjectsSkeleton",o),r(s,o)}),i=(0,t.atom)(r.sidebarRecentChatsCollapsed,(t,r,o)=>{a(e,"sidebarRecentChatsCollapsed",o),r(i,o)}),l=(0,t.atom)(r.sidebarSharedChatsCollapsed,(t,r,o)=>{a(e,"sidebarSharedChatsCollapsed",o),r(l,o)}),u=(0,t.atom)(r.sidebarFavoriteChatsAndProjectsCollapsed,(t,r,o)=>{a(e,"sidebarFavoriteChatsAndProjectsCollapsed",o),r(u,o)}),d=(0,t.atom)(r.projectsSkeleton,(t,r,o)=>{a(e,"projectsSkeleton",o),r(d,o)}),c=(0,t.atom)(r.lastUpdated,(t,r,o)=>{a(e,"lastUpdated",o),r(c,o)});return{sidebarRecentChatsSkeleton:o,sidebarSharedChatsSkeleton:n,sidebarFavoriteChatsAndProjectsSkeleton:s,sidebarRecentChatsCollapsed:i,sidebarSharedChatsCollapsed:l,sidebarFavoriteChatsAndProjectsCollapsed:u,projectsSkeleton:d,lastUpdated:c}});function L(e,t){if(t&&e in t){let r=t[e];if(r)return r}let r=function(e){let t=P("scoped");if(t&&e in t){let r=t[e];if(r)return r}return null}(e);if(r)return r;let a=function(e){let t=D.scoped.get(e);if(!t)return null;let r=w.store.get(t.sidebarRecentChatsSkeleton),a=w.store.get(t.sidebarSharedChatsSkeleton),o=w.store.get(t.sidebarFavoriteChatsAndProjectsSkeleton),n=w.store.get(t.sidebarRecentChatsCollapsed),s=w.store.get(t.sidebarSharedChatsCollapsed),i=w.store.get(t.sidebarFavoriteChatsAndProjectsCollapsed);return{sidebarRecentChatsSkeleton:r,sidebarSharedChatsSkeleton:a,sidebarFavoriteChatsAndProjectsSkeleton:o,sidebarRecentChatsCollapsed:n,sidebarSharedChatsCollapsed:s,sidebarFavoriteChatsAndProjectsCollapsed:i,projectsSkeleton:w.store.get(t.projectsSkeleton),lastUpdated:w.store.get(t.lastUpdated)}}(e);return a?(U("scoped",e,a),a):(U("scoped",e,d),d)}let O=(0,I.cacheResultById)(D.root,(e="root")=>{if("root"!==e)throw Error('Invalid rootId, must be "root"');let r=_(e);function a(e,t,r){let a=_(e);U("root",e,{...a,[t]:r,lastUpdated:y()})}let o=(0,t.atom)(r.sidebarCollapsed,(t,r,n)=>{a(e,"sidebarCollapsed",n),r(o,n)}),n=(0,t.atom)(r.lastUpdated,(t,r,o)=>{a(e,"lastUpdated",o),r(n,o)}),s=(0,t.atom)(r.modelConfiguration,(t,r,o)=>{a(e,"modelConfiguration",o),r(s,o)}),i=(0,t.atom)(r.messageMode,(t,r,o)=>{a(e,"messageMode",o),r(i,o)}),l=(0,t.atom)(r.shouldShowUpgrade,(t,r,o)=>{a(e,"shouldShowUpgrade",o),r(l,o)}),u=(0,t.atom)(r.chatPanelLayout,(t,r,o)=>{a(e,"chatPanelLayout",o),r(u,o)}),d=(0,t.atom)(r.chatMobilePanel,(t,r,o)=>{a(e,"chatMobilePanel",o),r(d,o)}),c=(0,t.atom)(r.dismissedFeatureDialogs,(t,r,o)=>{a(e,"dismissedFeatureDialogs",o),r(c,o)}),h=(0,t.atom)(r.toolConfiguration,(t,r,o)=>{a(e,"toolConfiguration",o),r(h,o)});return{sidebarCollapsed:o,lastUpdated:n,modelConfiguration:s,toolConfiguration:h,messageMode:i,shouldShowUpgrade:l,chatPanelLayout:u,chatMobilePanel:d,dismissedFeatureDialogs:c}});function _(e,t){var r;let a;if(t&&e in t&&t[e])return t[e];let o=(r=e,(a=P("root"))&&r in a&&a[r]?a[r]:null);if(o)return o;let n=function(e){let t=D.root.get(e);if(!t)return null;let r=w.store.get(t.sidebarCollapsed),a=w.store.get(t.lastUpdated),o=w.store.get(t.modelConfiguration),n=w.store.get(t.toolConfiguration),s=w.store.get(t.messageMode),i=w.store.get(t.shouldShowUpgrade),l=w.store.get(t.chatPanelLayout);return{sidebarCollapsed:r,lastUpdated:a,modelConfiguration:o,toolConfiguration:n,messageMode:s,shouldShowUpgrade:i,chatPanelLayout:l,chatMobilePanel:w.store.get(t.chatMobilePanel),dismissedFeatureDialogs:w.store.get(t.dismissedFeatureDialogs)}}(e);return n?(U("root",e,n),n):(U("root",e,S),S)}function z(e){let t={chat:[],scoped:[],root:[]};for(let r of Object.keys(v)){let a=e?.[r]?Object.keys(e[r]):[],o=P(r),n=new Set([...o?Object.keys(o):[],...Array.from(D[r].keys()),...a]);t[r]=Array.from(n)}return t}e.s(["getDurableChatAtoms",0,M,"getDurableChatState",()=>F,"getDurableRootAtoms",0,O,"getDurableRootState",()=>_,"getDurableScopedAtoms",0,j,"getDurableScopedState",()=>L,"getDurableStateKeys",()=>z],254211)},534607,e=>{"use strict";var t=e.i(423746);function r(){let[e,r]=(0,t.useState)(!1);return(0,t.useEffect)(()=>{r(navigator.userAgent.toUpperCase().includes("MAC"))},[]),e}e.s(["useMac",()=>r])},679232,e=>{"use strict";var t=e.i(9654),r=e.i(753533),a=e.i(142219),o=e.i(92479),n=e.i(729602);let s=new Map,i=(0,r.cacheResultById)(s,()=>({activeItem:(0,t.atom)("chat")})),l=new Map,u=(0,r.cacheResultById)(l,e=>{let r=i(e);return{...r,designModeEnabled:(0,t.atom)(e=>"design"===e(r.activeItem))}});function d(e){let t=i(e);return{setActiveItem:e=>a.store.set(t.activeItem,e)}}function c(){let e=(0,o.assertChatId)((0,n.useChatId)());return{atoms:u(e),actions:d(e),chatId:e}}e.s(["getChatSidebarActions",()=>d,"getChatSidebarAtoms",0,u,"useCurrentChatSidebar",()=>c])},472914,435106,e=>{"use strict";var t=e.i(672042),r=e.i(423746),a=e.i(753533),o=e.i(142219),n=e.i(9654);let s=(0,a.cacheResult)(null,()=>({isPointerDown:(0,n.atom)(!1),lastInteract:(0,n.atom)(0)})),i=(0,a.cacheResult)(null,()=>({...s()}));function l(){let e=s();return{setPointerDown:t=>{o.store.set(e.isPointerDown,t)},setLastInteract:t=>{o.store.set(e.lastInteract,t)}}}e.s(["getUserInputActions",()=>l,"getUserInputAtoms",0,i],435106);var u=e.i(393799),d=e.i(610726);function c({children:e,debug:r}){let a,o;return a=l(),o=()=>{a.setPointerDown(!1),a.setLastInteract(Date.now())},(0,d.useEventListener)("blur",o,void 0,f),(0,d.useEventListener)("pointerdown",()=>{a.setPointerDown(!0),a.setLastInteract(Date.now())},void 0,f),(0,d.useEventListener)("pointerup",()=>{a.setPointerDown(!1)},void 0,f),(0,d.useEventListener)("mouseleave",o,void 0,f),(0,d.useEventListener)("mousemove",()=>{a.setLastInteract(Date.now())},void 0,f),(0,d.useEventListener)("keydown",()=>{a.setLastInteract(Date.now())},void 0,f),(0,d.useEventListener)("visibilitychange",()=>{"hidden"===document.visibilityState&&o()},p,f),(0,t.jsxs)(t.Fragment,{children:[r&&(0,t.jsx)(h,{}),e]})}function h(){let e=i(),a=(0,u.useAtomValue)(e.isPointerDown),o=(0,u.useAtomValue)(e.lastInteract),n=(0,r.useMemo)(()=>[{name:"isPointerDown",value:a},{name:"lastInteract",value:o}],[a,o]);return(0,t.jsx)("div",{className:"pointer-events-none fixed left-0 top-0 h-full w-full",children:n.map(e=>(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{children:e.name}),(0,t.jsx)("div",{children:JSON.stringify(e.value)})]},e.name))})}let f={passive:!0,capture:!0},p={current:"undefined"!=typeof document?document:null};e.s(["UserInputProvider",()=>c],472914)},528517,e=>{"use strict";e.i(472914),e.i(435106),e.s([])},275215,e=>{"use strict";var t=e.i(753533),r=e.i(142219),a=e.i(254211),o=e.i(9654);e.i(528517);var n=e.i(435106),s=e.i(679232),i=e.i(92479),l=e.i(729602);let u=new Map,d=(0,t.cacheResultById)(u,()=>({isCollapsedOverride:(0,o.atom)(!1),isPeeking:(0,o.atom)(!1),isChatRoute:(0,o.atom)(!0),renderRecoverHitArea:(0,o.atom)(!1),openedDropdown:(0,o.atom)(!1)})),c=(0,t.cacheResultById)(new Map,e=>{let t=d(e),r=(0,a.getDurableScopedAtoms)(e),n=(0,a.getDurableRootAtoms)("root"),s=(0,o.atom)(e=>e(t.isCollapsedOverride)||e(n.sidebarCollapsed)),i=(0,o.atom)(e=>!e(s)||e(t.isPeeking));return{...t,isVisible:i,isCollapsed:s,sidebarRecentChatsSkeleton:r.sidebarRecentChatsSkeleton,sidebarSharedChatsSkeleton:r.sidebarSharedChatsSkeleton,sidebarFavoriteChatsAndProjectsSkeleton:r.sidebarFavoriteChatsAndProjectsSkeleton,sidebarFavoriteChatsAndProjectsCollapsed:r.sidebarFavoriteChatsAndProjectsCollapsed,sidebarRecentChatsCollapsed:r.sidebarRecentChatsCollapsed,sidebarSharedChatsCollapsed:r.sidebarSharedChatsCollapsed}}),h=null,f=null,p=null,m=null,g=null;function C(){let e=(0,i.assertChatId)((0,l.useChatId)());return{atoms:c("skeleton"),actions:function(e,t){let o=c(e),i=d(e),l=(0,a.getDurableScopedAtoms)(e),u=(0,a.getDurableRootAtoms)("root"),C=(0,n.getUserInputAtoms)();function b(){h&&clearTimeout(h),f&&clearTimeout(f),g&&clearTimeout(g),r.store.get(o.isCollapsed)&&(r.store.set(i.renderRecoverHitArea,!0),g=setTimeout(()=>{r.store.set(i.renderRecoverHitArea,!1)},200)),h=setTimeout(()=>{r.store.set(i.openedDropdown,!1)},50),r.store.set(i.isPeeking,!1)}function S({onlyOnCollapsed:e=!1}={}){(!e||r.store.get(u.sidebarCollapsed))&&(b(),m&&clearTimeout(m),m=setTimeout(()=>m=null,200))}function v(e){r.store.set(u.sidebarCollapsed,e),e&&S()}return{startPeeking:()=>{if(!r.store.get(C.isPointerDown)){if(h&&clearTimeout(h),f&&clearTimeout(f),!m){if(t&&r.store.get((0,s.getChatSidebarAtoms)(t).designModeEnabled)){f=setTimeout(()=>{r.store.set(i.isPeeking,!0),p=Date.now(),f=null},500);return}r.store.set(i.isPeeking,!0),p=Date.now()}}},stopPeeking:b,stopPeekingAfterDelay:function({leavingScreen:e=!1}={}){if(h&&clearTimeout(h),f&&clearTimeout(f),p&&Date.now()-p>200&&!e)return b();h=setTimeout(()=>b(),e?1e3:50)},stopPeekingForced:S,clearStartPeekingTimeout:function(){f&&(clearTimeout(f),f=null)},openSidebar:()=>{v(!1)},collapseSidebar:()=>{v(!0)},toggleSidebar:()=>{v(!r.store.get(u.sidebarCollapsed))},setCollapsedOverride:e=>r.store.set(i.isCollapsedOverride,e),setSidebarRecentChatsSkeleton:e=>r.store.set(l.sidebarRecentChatsSkeleton,e),setSidebarSharedChatsSkeleton:e=>r.store.set(l.sidebarSharedChatsSkeleton,e),setSidebarFavoriteChatsAndProjectsSkeleton:e=>r.store.set(l.sidebarFavoriteChatsAndProjectsSkeleton,e),setSidebarFavoriteChatsAndProjectsCollapsed:e=>r.store.set(l.sidebarFavoriteChatsAndProjectsCollapsed,e),setSidebarRecentChatsCollapsed:e=>r.store.set(l.sidebarRecentChatsCollapsed,e),setSidebarSharedChatsCollapsed:e=>r.store.set(l.sidebarSharedChatsCollapsed,e),setOpenedDropdown:e=>r.store.set(i.openedDropdown,e)}}("skeleton",e)}}e.s(["getWritableSidebarAtoms",0,d,"useCurrentSidebar",()=>C])}]);