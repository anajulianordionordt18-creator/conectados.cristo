(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,163060,(e,t,n)=>{window,t.exports=function(){var e=[function(e,t,n){"use strict";var r,s=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e){void 0===e&&(e="="),this._paddingCharacter=e}return e.prototype.encodedLength=function(e){return this._paddingCharacter?(e+2)/3*4|0:(8*e+5)/6|0},e.prototype.encode=function(e){for(var t="",n=0;n<e.length-2;n+=3){var r=e[n]<<16|e[n+1]<<8|e[n+2];t+=this._encodeByte(r>>>18&63),t+=this._encodeByte(r>>>12&63),t+=this._encodeByte(r>>>6&63),t+=this._encodeByte(r>>>0&63)}var s=e.length-n;if(s>0){var r=e[n]<<16|(2===s?e[n+1]<<8:0);t+=this._encodeByte(r>>>18&63),t+=this._encodeByte(r>>>12&63),2===s?t+=this._encodeByte(r>>>6&63):t+=this._paddingCharacter||"",t+=this._paddingCharacter||""}return t},e.prototype.maxDecodedLength=function(e){return this._paddingCharacter?e/4*3|0:(6*e+7)/8|0},e.prototype.decodedLength=function(e){return this.maxDecodedLength(e.length-this._getPaddingLength(e))},e.prototype.decode=function(e){if(0===e.length)return new Uint8Array(0);for(var t=this._getPaddingLength(e),n=e.length-t,r=new Uint8Array(this.maxDecodedLength(n)),s=0,i=0,a=0,o=0,l=0,c=0,d=0;i<n-4;i+=4)o=this._decodeChar(e.charCodeAt(i+0)),l=this._decodeChar(e.charCodeAt(i+1)),c=this._decodeChar(e.charCodeAt(i+2)),d=this._decodeChar(e.charCodeAt(i+3)),r[s++]=o<<2|l>>>4,r[s++]=l<<4|c>>>2,r[s++]=c<<6|d,a|=256&o,a|=256&l,a|=256&c,a|=256&d;if(i<n-1&&(o=this._decodeChar(e.charCodeAt(i)),l=this._decodeChar(e.charCodeAt(i+1)),r[s++]=o<<2|l>>>4,a|=256&o,a|=256&l),i<n-2&&(c=this._decodeChar(e.charCodeAt(i+2)),r[s++]=l<<4|c>>>2,a|=256&c),i<n-3&&(d=this._decodeChar(e.charCodeAt(i+3)),r[s++]=c<<6|d,a|=256&d),0!==a)throw Error("Base64Coder: incorrect characters for decoding");return r},e.prototype._encodeByte=function(e){var t=e;return t+=65,t+=25-e>>>8&6,t+=51-e>>>8&-75,t+=61-e>>>8&-15,String.fromCharCode(t+=62-e>>>8&3)},e.prototype._decodeChar=function(e){return 256+((42-e&e-44)>>>8&-256+e-43+62)+((46-e&e-48)>>>8&-256+e-47+63)+((47-e&e-58)>>>8&-256+e-48+52)+((64-e&e-91)>>>8&-256+e-65+0)+((96-e&e-123)>>>8&-256+e-97+26)},e.prototype._getPaddingLength=function(e){var t=0;if(this._paddingCharacter){for(var n=e.length-1;n>=0&&e[n]===this._paddingCharacter;n--)t++;if(e.length<4||t>2)throw Error("Base64Coder: incorrect padding")}return t},e}();t.Coder=i;var a=new i;t.encode=function(e){return a.encode(e)},t.decode=function(e){return a.decode(e)};var o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return s(t,e),t.prototype._encodeByte=function(e){var t=e;return t+=65,t+=25-e>>>8&6,t+=51-e>>>8&-75,t+=61-e>>>8&-13,String.fromCharCode(t+=62-e>>>8&49)},t.prototype._decodeChar=function(e){return 256+((44-e&e-46)>>>8&-256+e-45+62)+((94-e&e-96)>>>8&-256+e-95+63)+((47-e&e-58)>>>8&-256+e-48+52)+((64-e&e-91)>>>8&-256+e-65+0)+((96-e&e-123)>>>8&-256+e-97+26)},t}(i);t.URLSafeCoder=o;var l=new o;t.encodeURLSafe=function(e){return l.encode(e)},t.decodeURLSafe=function(e){return l.decode(e)},t.encodedLength=function(e){return a.encodedLength(e)},t.maxDecodedLength=function(e){return a.maxDecodedLength(e)},t.decodedLength=function(e){return a.decodedLength(e)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r="utf8: invalid string",s="utf8: invalid source encoding";function i(e){for(var t=0,n=0;n<e.length;n++){var s=e.charCodeAt(n);if(s<128)t+=1;else if(s<2048)t+=2;else if(s<55296)t+=3;else if(s<=57343){if(n>=e.length-1)throw Error(r);n++,t+=4}else throw Error(r)}return t}t.encode=function(e){for(var t=new Uint8Array(i(e)),n=0,r=0;r<e.length;r++){var s=e.charCodeAt(r);s<128?t[n++]=s:(s<2048?t[n++]=192|s>>6:(s<55296?t[n++]=224|s>>12:(r++,s=((1023&s)<<10|1023&e.charCodeAt(r))+65536,t[n++]=240|s>>18,t[n++]=128|s>>12&63),t[n++]=128|s>>6&63),t[n++]=128|63&s)}return t},t.encodedLength=i,t.decode=function(e){for(var t=[],n=0;n<e.length;n++){var r=e[n];if(128&r){var i=void 0;if(r<224){if(n>=e.length)throw Error(s);var a=e[++n];if((192&a)!=128)throw Error(s);r=(31&r)<<6|63&a,i=128}else if(r<240){if(n>=e.length-1)throw Error(s);var a=e[++n],o=e[++n];if((192&a)!=128||(192&o)!=128)throw Error(s);r=(15&r)<<12|(63&a)<<6|63&o,i=2048}else if(r<248){if(n>=e.length-2)throw Error(s);var a=e[++n],o=e[++n],l=e[++n];if((192&a)!=128||(192&o)!=128||(192&l)!=128)throw Error(s);r=(15&r)<<18|(63&a)<<12|(63&o)<<6|63&l,i=65536}else throw Error(s);if(r<i||r>=55296&&r<=57343)throw Error(s);if(r>=65536){if(r>1114111)throw Error(s);r-=65536,t.push(String.fromCharCode(55296|r>>10)),r=56320|1023&r}}t.push(String.fromCharCode(r))}return t.join("")}},function(e,t,n){e.exports=n(3).default},function(e,t,n){"use strict";n.r(t);for(var r,s,i,a,o,l,c,d,u,h,p,f,m,g,x,v=function(){function e(e,t){this.lastId=0,this.prefix=e,this.name=t}return e.prototype.create=function(e){this.lastId++;var t=this.lastId,n=this.prefix+t,r=this.name+"["+t+"]",s=!1,i=function(){s||(e.apply(null,arguments),s=!0)};return this[t]=i,{number:t,id:n,name:r,callback:i}},e.prototype.remove=function(e){delete this[e.number]},e}(),b=new v("_pusher_script_","Pusher.ScriptReceivers"),y="7.0.3",j=function(){function e(e){this.options=e,this.receivers=e.receivers||b,this.loading={}}return e.prototype.load=function(e,t,n){var r=this;if(r.loading[e]&&r.loading[e].length>0)r.loading[e].push(n);else{r.loading[e]=[n];var s=tf.createScriptRequest(r.getPath(e,t)),i=r.receivers.create(function(t){if(r.receivers.remove(i),r.loading[e]){var n=r.loading[e];delete r.loading[e];for(var a=function(e){e||s.cleanup()},o=0;o<n.length;o++)n[o](t,a)}});s.send(i)}},e.prototype.getRoot=function(e){var t,n=tf.getDocument().location.protocol;return(e&&e.useTLS||"https:"===n?this.options.cdn_https:this.options.cdn_http).replace(/\/*$/,"")+"/"+this.options.version},e.prototype.getPath=function(e,t){return this.getRoot(t)+"/"+e+this.options.suffix+".js"},e}(),w=new v("_pusher_dependencies","Pusher.DependenciesReceivers"),k=new j({cdn_http:"http://js.pusher.com",cdn_https:"https://js.pusher.com",version:y,suffix:"",receivers:w}),C={authenticationEndpoint:{path:"/docs/authenticating_users"},javascriptQuickStart:{path:"/docs/javascript_quick_start"},triggeringClientEvents:{path:"/docs/client_api_guide/client_events#trigger-events"},encryptedChannelSupport:{fullUrl:"https://github.com/pusher/pusher-js/tree/cc491015371a4bde5743d1c87a0fbac0feb53195#encrypted-channel-support"}},S=function(e){var t,n=C[e];return n&&(n.fullUrl?t=n.fullUrl:n.path&&(t="https://pusher.com"+n.path),t)?"See: "+t:""},M=(r=function(e,t){return(r=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),N=function(e){function t(t){var n=this.constructor,r=e.call(this,t)||this;return Object.setPrototypeOf(r,n.prototype),r}return M(t,e),t}(Error),I=function(e){function t(t){var n=this.constructor,r=e.call(this,t)||this;return Object.setPrototypeOf(r,n.prototype),r}return M(t,e),t}(Error),T=function(e){function t(t){var n=this.constructor,r=e.call(this,t)||this;return Object.setPrototypeOf(r,n.prototype),r}return M(t,e),t}(Error),E=function(e){function t(t){var n=this.constructor,r=e.call(this,t)||this;return Object.setPrototypeOf(r,n.prototype),r}return M(t,e),t}(Error),L=function(e){function t(t){var n=this.constructor,r=e.call(this,t)||this;return Object.setPrototypeOf(r,n.prototype),r}return M(t,e),t}(Error),_=function(e){function t(t){var n=this.constructor,r=e.call(this,t)||this;return Object.setPrototypeOf(r,n.prototype),r}return M(t,e),t}(Error),P=function(e){function t(t){var n=this.constructor,r=e.call(this,t)||this;return Object.setPrototypeOf(r,n.prototype),r}return M(t,e),t}(Error),A=function(e){function t(t,n){var r=this.constructor,s=e.call(this,n)||this;return s.status=t,Object.setPrototypeOf(s,r.prototype),s}return M(t,e),t}(Error),R=function(e,t,n){var r,s=this;for(var i in(r=tf.createXHR()).open("POST",s.options.authEndpoint,!0),r.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),this.authOptions.headers)r.setRequestHeader(i,this.authOptions.headers[i]);return r.onreadystatechange=function(){if(4===r.readyState)if(200===r.status){var e=void 0,t=!1;try{e=JSON.parse(r.responseText),t=!0}catch(e){n(new A(200,"JSON returned from auth endpoint was invalid, yet status code was 200. Data was: "+r.responseText),{auth:""})}t&&n(null,e)}else{var i=S("authenticationEndpoint");n(new A(r.status,"Unable to retrieve auth string from auth endpoint - "+("received status: "+r.status+" from ")+s.options.authEndpoint+". Clients must be authenticated to join private or presence channels. "+i),{auth:""})}},r.send(this.composeQuery(t)),r},D=String.fromCharCode,F="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",O={},$=0,V=F.length;$<V;$++)O[F.charAt($)]=$;var z=function(e){var t=e.charCodeAt(0);return t<128?e:t<2048?D(192|t>>>6)+D(128|63&t):D(224|t>>>12&15)+D(128|t>>>6&63)+D(128|63&t)},B=function(e){var t=[0,2,1][e.length%3],n=e.charCodeAt(0)<<16|(e.length>1?e.charCodeAt(1):0)<<8|(e.length>2?e.charCodeAt(2):0);return[F.charAt(n>>>18),F.charAt(n>>>12&63),t>=2?"=":F.charAt(n>>>6&63),t>=1?"=":F.charAt(63&n)].join("")},H=window.btoa||function(e){return e.replace(/[\s\S]{1,3}/g,B)},U=function(){function e(e,t,n,r){var s=this;this.clear=t,this.timer=e(function(){s.timer&&(s.timer=r(s.timer))},n)}return e.prototype.isRunning=function(){return null!==this.timer},e.prototype.ensureAborted=function(){this.timer&&(this.clear(this.timer),this.timer=null)},e}(),W=(s=function(e,t){return(s=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}s(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});function q(e){window.clearTimeout(e)}function G(e){window.clearInterval(e)}var X=function(e){function t(t,n){return e.call(this,setTimeout,q,t,function(e){return n(),null})||this}return W(t,e),t}(U),Z=function(e){function t(t,n){return e.call(this,setInterval,G,t,function(e){return n(),e})||this}return W(t,e),t}(U),Y=function(){return Date.now?Date.now():new Date().valueOf()},J=function(e){return new X(0,e)},K=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var r=Array.prototype.slice.call(arguments,1);return function(t){return t[e].apply(t,r.concat(arguments))}};function Q(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];for(var r=0;r<t.length;r++){var s=t[r];for(var i in s)s[i]&&s[i].constructor&&s[i].constructor===Object?e[i]=Q(e[i]||{},s[i]):e[i]=s[i]}return e}function ee(){for(var e=["Pusher"],t=0;t<arguments.length;t++)"string"==typeof arguments[t]?e.push(arguments[t]):e.push(ec(arguments[t]));return e.join(" : ")}function et(e,t){var n=Array.prototype.indexOf;if(null===e)return -1;if(n&&e.indexOf===n)return e.indexOf(t);for(var r=0,s=e.length;r<s;r++)if(e[r]===t)return r;return -1}function en(e,t){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(e[n],n,e)}function er(e){var t=[];return en(e,function(e,n){t.push(n)}),t}function es(e,t,n){for(var r=0;r<e.length;r++)t.call(n||window,e[r],r,e)}function ei(e,t){for(var n=[],r=0;r<e.length;r++)n.push(t(e[r],r,e,n));return n}function ea(e,t){t=t||function(e){return!!e};for(var n=[],r=0;r<e.length;r++)t(e[r],r,e,n)&&n.push(e[r]);return n}function eo(e,t){var n={};return en(e,function(r,s){(t&&t(r,s,e,n)||r)&&(n[s]=r)}),n}function el(e,t){for(var n=0;n<e.length;n++)if(t(e[n],n,e))return!0;return!1}function ec(e){try{return JSON.stringify(e)}catch(r){var t,n;return JSON.stringify((t=[],n=[],function e(r,s){var i,a,o;switch(typeof r){case"object":if(!r)return null;for(i=0;i<t.length;i+=1)if(t[i]===r)return{$ref:n[i]};if(t.push(r),n.push(s),"[object Array]"===Object.prototype.toString.apply(r))for(i=0,o=[];i<r.length;i+=1)o[i]=e(r[i],s+"["+i+"]");else for(a in o={},r)Object.prototype.hasOwnProperty.call(r,a)&&(o[a]=e(r[a],s+"["+JSON.stringify(a)+"]"));return o;case"number":case"string":case"boolean":return r}}(e,"$")))}}var ed=new(function(){function e(){this.globalLog=function(e){window.console&&window.console.log&&window.console.log(e)}}return e.prototype.debug=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.log(this.globalLog,e)},e.prototype.warn=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.log(this.globalLogWarn,e)},e.prototype.error=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.log(this.globalLogError,e)},e.prototype.globalLogWarn=function(e){window.console&&window.console.warn?window.console.warn(e):this.globalLog(e)},e.prototype.globalLogError=function(e){window.console&&window.console.error?window.console.error(e):this.globalLogWarn(e)},e.prototype.log=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var r=ee.apply(this,arguments);tC.log?tC.log(r):tC.logToConsole&&e.bind(this)(r)},e}()),eu=function(e,t,n){void 0!==this.authOptions.headers&&ed.warn("To send headers with the auth request, you must use AJAX, rather than JSONP.");var r=e.nextAuthCallbackID.toString();e.nextAuthCallbackID++;var s=e.getDocument(),i=s.createElement("script");e.auth_callbacks[r]=function(e){n(null,e)},i.src=this.options.authEndpoint+"?callback="+encodeURIComponent("Pusher.auth_callbacks['"+r+"']")+"&"+this.composeQuery(t);var a=s.getElementsByTagName("head")[0]||s.documentElement;a.insertBefore(i,a.firstChild)},eh=function(){function e(e){this.src=e}return e.prototype.send=function(e){var t=this,n="Error loading "+t.src;t.script=document.createElement("script"),t.script.id=e.id,t.script.src=t.src,t.script.type="text/javascript",t.script.charset="UTF-8",t.script.addEventListener?(t.script.onerror=function(){e.callback(n)},t.script.onload=function(){e.callback(null)}):t.script.onreadystatechange=function(){("loaded"===t.script.readyState||"complete"===t.script.readyState)&&e.callback(null)},void 0===t.script.async&&document.attachEvent&&/opera/i.test(navigator.userAgent)?(t.errorScript=document.createElement("script"),t.errorScript.id=e.id+"_error",t.errorScript.text=e.name+"('"+n+"');",t.script.async=t.errorScript.async=!1):t.script.async=!0;var r=document.getElementsByTagName("head")[0];r.insertBefore(t.script,r.firstChild),t.errorScript&&r.insertBefore(t.errorScript,t.script.nextSibling)},e.prototype.cleanup=function(){this.script&&(this.script.onload=this.script.onerror=null,this.script.onreadystatechange=null),this.script&&this.script.parentNode&&this.script.parentNode.removeChild(this.script),this.errorScript&&this.errorScript.parentNode&&this.errorScript.parentNode.removeChild(this.errorScript),this.script=null,this.errorScript=null},e}(),ep=function(){function e(e,t){this.url=e,this.data=t}return e.prototype.send=function(e){if(!this.request){var t,n,r,s,i=ei((t=eo(this.data,function(e){return void 0!==e}),n=function(e){return"object"==typeof e&&(e=ec(e)),encodeURIComponent(H(e.toString().replace(/[^\x00-\x7F]/g,z)))},r={},en(t,function(e,t){r[t]=n(e)}),s=[],en(r,function(e,t){s.push([t,e])}),s),K("join","=")).join("&"),a=this.url+"/"+e.number+"?"+i;this.request=tf.createScriptRequest(a),this.request.send(e)}},e.prototype.cleanup=function(){this.request&&this.request.cleanup()},e}();function ef(e,t,n){return e+(t.useTLS?"s":"")+"://"+(t.useTLS?t.hostTLS:t.hostNonTLS)+n}function em(e,t){return"/app/"+e+"?protocol=7&client=js&version="+y+(t?"&"+t:"")}var eg=function(){function e(){this._callbacks={}}return e.prototype.get=function(e){return this._callbacks["_"+e]},e.prototype.add=function(e,t,n){var r="_"+e;this._callbacks[r]=this._callbacks[r]||[],this._callbacks[r].push({fn:t,context:n})},e.prototype.remove=function(e,t,n){if(!e&&!t&&!n){this._callbacks={};return}var r=e?["_"+e]:er(this._callbacks);t||n?this.removeCallback(r,t,n):this.removeAllCallbacks(r)},e.prototype.removeCallback=function(e,t,n){es(e,function(e){this._callbacks[e]=ea(this._callbacks[e]||[],function(e){return t&&t!==e.fn||n&&n!==e.context}),0===this._callbacks[e].length&&delete this._callbacks[e]},this)},e.prototype.removeAllCallbacks=function(e){es(e,function(e){delete this._callbacks[e]},this)},e}(),ex=function(){function e(e){this.callbacks=new eg,this.global_callbacks=[],this.failThrough=e}return e.prototype.bind=function(e,t,n){return this.callbacks.add(e,t,n),this},e.prototype.bind_global=function(e){return this.global_callbacks.push(e),this},e.prototype.unbind=function(e,t,n){return this.callbacks.remove(e,t,n),this},e.prototype.unbind_global=function(e){return e?this.global_callbacks=ea(this.global_callbacks||[],function(t){return t!==e}):this.global_callbacks=[],this},e.prototype.unbind_all=function(){return this.unbind(),this.unbind_global(),this},e.prototype.emit=function(e,t,n){for(var r=0;r<this.global_callbacks.length;r++)this.global_callbacks[r](e,t);var s=this.callbacks.get(e),i=[];if(n?i.push(t,n):t&&i.push(t),s&&s.length>0)for(var r=0;r<s.length;r++)s[r].fn.apply(s[r].context||window,i);else this.failThrough&&this.failThrough(e,t);return this},e}(),ev=(i=function(e,t){return(i=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),eb=function(e){function t(t,n,r,s,i){var a=e.call(this)||this;return a.initialize=tf.transportConnectionInitializer,a.hooks=t,a.name=n,a.priority=r,a.key=s,a.options=i,a.state="new",a.timeline=i.timeline,a.activityTimeout=i.activityTimeout,a.id=a.timeline.generateUniqueID(),a}return ev(t,e),t.prototype.handlesActivityChecks=function(){return!!this.hooks.handlesActivityChecks},t.prototype.supportsPing=function(){return!!this.hooks.supportsPing},t.prototype.connect=function(){var e=this;if(this.socket||"initialized"!==this.state)return!1;var t=this.hooks.urls.getInitial(this.key,this.options);try{this.socket=this.hooks.getSocket(t,this.options)}catch(t){return J(function(){e.onError(t),e.changeState("closed")}),!1}return this.bindListeners(),ed.debug("Connecting",{transport:this.name,url:t}),this.changeState("connecting"),!0},t.prototype.close=function(){return!!this.socket&&(this.socket.close(),!0)},t.prototype.send=function(e){var t=this;return"open"===this.state&&(J(function(){t.socket&&t.socket.send(e)}),!0)},t.prototype.ping=function(){"open"===this.state&&this.supportsPing()&&this.socket.ping()},t.prototype.onOpen=function(){this.hooks.beforeOpen&&this.hooks.beforeOpen(this.socket,this.hooks.urls.getPath(this.key,this.options)),this.changeState("open"),this.socket.onopen=void 0},t.prototype.onError=function(e){this.emit("error",{type:"WebSocketError",error:e}),this.timeline.error(this.buildTimelineMessage({error:e.toString()}))},t.prototype.onClose=function(e){e?this.changeState("closed",{code:e.code,reason:e.reason,wasClean:e.wasClean}):this.changeState("closed"),this.unbindListeners(),this.socket=void 0},t.prototype.onMessage=function(e){this.emit("message",e)},t.prototype.onActivity=function(){this.emit("activity")},t.prototype.bindListeners=function(){var e=this;this.socket.onopen=function(){e.onOpen()},this.socket.onerror=function(t){e.onError(t)},this.socket.onclose=function(t){e.onClose(t)},this.socket.onmessage=function(t){e.onMessage(t)},this.supportsPing()&&(this.socket.onactivity=function(){e.onActivity()})},t.prototype.unbindListeners=function(){this.socket&&(this.socket.onopen=void 0,this.socket.onerror=void 0,this.socket.onclose=void 0,this.socket.onmessage=void 0,this.supportsPing()&&(this.socket.onactivity=void 0))},t.prototype.changeState=function(e,t){this.state=e,this.timeline.info(this.buildTimelineMessage({state:e,params:t})),this.emit(e,t)},t.prototype.buildTimelineMessage=function(e){return Q({cid:this.id},e)},t}(ex),ey=function(){function e(e){this.hooks=e}return e.prototype.isSupported=function(e){return this.hooks.isSupported(e)},e.prototype.createConnection=function(e,t,n,r){return new eb(this.hooks,e,t,n,r)},e}(),ej=new ey({urls:{getInitial:function(e,t){var n=(t.httpPath||"")+em(e,"flash=false");return ef("ws",t,n)}},handlesActivityChecks:!1,supportsPing:!1,isInitialized:function(){return!!tf.getWebSocketAPI()},isSupported:function(){return!!tf.getWebSocketAPI()},getSocket:function(e){return tf.createWebSocket(e)}}),ew={urls:{getInitial:function(e,t){var n=(t.httpPath||"/pusher")+em(e);return ef("http",t,n)}},handlesActivityChecks:!1,supportsPing:!0,isInitialized:function(){return!0}},ek=Q({getSocket:function(e){return tf.HTTPFactory.createStreamingSocket(e)}},ew),eC=Q({getSocket:function(e){return tf.HTTPFactory.createPollingSocket(e)}},ew),eS={isSupported:function(){return tf.isXHRSupported()}},eM={ws:ej,xhr_streaming:new ey(Q({},ek,eS)),xhr_polling:new ey(Q({},eC,eS))},eN=new ey({file:"sockjs",urls:{getInitial:function(e,t){return ef("http",t,t.httpPath||"/pusher")},getPath:function(e,t){return em(e)}},handlesActivityChecks:!0,supportsPing:!1,isSupported:function(){return!0},isInitialized:function(){return void 0!==window.SockJS},getSocket:function(e,t){return new window.SockJS(e,null,{js_path:k.getPath("sockjs",{useTLS:t.useTLS}),ignore_null_origin:t.ignoreNullOrigin})},beforeOpen:function(e,t){e.send(JSON.stringify({path:t}))}}),eI={isSupported:function(e){return tf.isXDRSupported(e.useTLS)}},eT=new ey(Q({},ek,eI)),eE=new ey(Q({},eC,eI));eM.xdr_streaming=eT,eM.xdr_polling=eE,eM.sockjs=eN;var eL=(a=function(e,t){return(a=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),e_=new(function(e){function t(){var t=e.call(this)||this;return void 0!==window.addEventListener&&(window.addEventListener("online",function(){t.emit("online")},!1),window.addEventListener("offline",function(){t.emit("offline")},!1)),t}return eL(t,e),t.prototype.isOnline=function(){return void 0===window.navigator.onLine||window.navigator.onLine},t}(ex)),eP=function(){function e(e,t,n){this.manager=e,this.transport=t,this.minPingDelay=n.minPingDelay,this.maxPingDelay=n.maxPingDelay,this.pingDelay=void 0}return e.prototype.createConnection=function(e,t,n,r){var s=this;r=Q({},r,{activityTimeout:this.pingDelay});var i=this.transport.createConnection(e,t,n,r),a=null,o=function(){i.unbind("open",o),i.bind("closed",l),a=Y()},l=function(e){if(i.unbind("closed",l),1002===e.code||1003===e.code)s.manager.reportDeath();else if(!e.wasClean&&a){var t=Y()-a;t<2*s.maxPingDelay&&(s.manager.reportDeath(),s.pingDelay=Math.max(t/2,s.minPingDelay))}};return i.bind("open",o),i},e.prototype.isSupported=function(e){return this.manager.isAlive()&&this.transport.isSupported(e)},e}(),eA={decodeMessage:function(e){try{var t=JSON.parse(e.data),n=t.data;if("string"==typeof n)try{n=JSON.parse(t.data)}catch(e){}var r={event:t.event,channel:t.channel,data:n};return t.user_id&&(r.user_id=t.user_id),r}catch(t){throw{type:"MessageParseError",error:t,data:e.data}}},encodeMessage:function(e){return JSON.stringify(e)},processHandshake:function(e){var t=eA.decodeMessage(e);if("pusher:connection_established"===t.event){if(!t.data.activity_timeout)throw"No activity timeout specified in handshake";return{action:"connected",id:t.data.socket_id,activityTimeout:1e3*t.data.activity_timeout}}if("pusher:error"===t.event)return{action:this.getCloseAction(t.data),error:this.getCloseError(t.data)};throw"Invalid handshake"},getCloseAction:function(e){if(e.code<4e3)if(e.code>=1002&&e.code<=1004)return"backoff";else return null;if(4e3===e.code)return"tls_only";if(e.code<4100)return"refused";if(e.code<4200)return"backoff";if(e.code<4300)return"retry";else return"refused"},getCloseError:function(e){return 1e3!==e.code&&1001!==e.code?{type:"PusherError",data:{code:e.code,message:e.reason||e.message}}:null}},eR=(o=function(e,t){return(o=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),eD=function(e){function t(t,n){var r=e.call(this)||this;return r.id=t,r.transport=n,r.activityTimeout=n.activityTimeout,r.bindListeners(),r}return eR(t,e),t.prototype.handlesActivityChecks=function(){return this.transport.handlesActivityChecks()},t.prototype.send=function(e){return this.transport.send(e)},t.prototype.send_event=function(e,t,n){var r={event:e,data:t};return n&&(r.channel=n),ed.debug("Event sent",r),this.send(eA.encodeMessage(r))},t.prototype.ping=function(){this.transport.supportsPing()?this.transport.ping():this.send_event("pusher:ping",{})},t.prototype.close=function(){this.transport.close()},t.prototype.bindListeners=function(){var e=this,t={message:function(t){var n;try{n=eA.decodeMessage(t)}catch(n){e.emit("error",{type:"MessageParseError",error:n,data:t.data})}if(void 0!==n){switch(ed.debug("Event recd",n),n.event){case"pusher:error":e.emit("error",{type:"PusherError",data:n.data});break;case"pusher:ping":e.emit("ping");break;case"pusher:pong":e.emit("pong")}e.emit("message",n)}},activity:function(){e.emit("activity")},error:function(t){e.emit("error",t)},closed:function(t){n(),t&&t.code&&e.handleCloseEvent(t),e.transport=null,e.emit("closed")}},n=function(){en(t,function(t,n){e.transport.unbind(n,t)})};en(t,function(t,n){e.transport.bind(n,t)})},t.prototype.handleCloseEvent=function(e){var t=eA.getCloseAction(e),n=eA.getCloseError(e);n&&this.emit("error",n),t&&this.emit(t,{action:t,error:n})},t}(ex),eF=function(){function e(e,t){this.transport=e,this.callback=t,this.bindListeners()}return e.prototype.close=function(){this.unbindListeners(),this.transport.close()},e.prototype.bindListeners=function(){var e=this;this.onMessage=function(t){var n;e.unbindListeners();try{n=eA.processHandshake(t)}catch(t){e.finish("error",{error:t}),e.transport.close();return}"connected"===n.action?e.finish("connected",{connection:new eD(n.id,e.transport),activityTimeout:n.activityTimeout}):(e.finish(n.action,{error:n.error}),e.transport.close())},this.onClosed=function(t){e.unbindListeners();var n=eA.getCloseAction(t)||"backoff",r=eA.getCloseError(t);e.finish(n,{error:r})},this.transport.bind("message",this.onMessage),this.transport.bind("closed",this.onClosed)},e.prototype.unbindListeners=function(){this.transport.unbind("message",this.onMessage),this.transport.unbind("closed",this.onClosed)},e.prototype.finish=function(e,t){this.callback(Q({transport:this.transport,action:e},t))},e}(),eO=function(){function e(e,t){this.channel=e;var n=t.authTransport;if(void 0===tf.getAuthorizers()[n])throw"'"+n+"' is not a recognized auth transport";this.type=n,this.options=t,this.authOptions=t.auth||{}}return e.prototype.composeQuery=function(e){var t="socket_id="+encodeURIComponent(e)+"&channel_name="+encodeURIComponent(this.channel.name);for(var n in this.authOptions.params)t+="&"+encodeURIComponent(n)+"="+encodeURIComponent(this.authOptions.params[n]);return t},e.prototype.authorize=function(t,n){e.authorizers=e.authorizers||tf.getAuthorizers(),e.authorizers[this.type].call(this,tf,t,n)},e}(),e$=function(){function e(e,t){this.timeline=e,this.options=t||{}}return e.prototype.send=function(e,t){this.timeline.isEmpty()||this.timeline.send(tf.TimelineTransport.getAgent(this,e),t)},e}(),eV=(l=function(e,t){return(l=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}l(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),ez=function(e){function t(t,n){var r=e.call(this,function(e,n){ed.debug("No callbacks on "+t+" for "+e)})||this;return r.name=t,r.pusher=n,r.subscribed=!1,r.subscriptionPending=!1,r.subscriptionCancelled=!1,r}return eV(t,e),t.prototype.authorize=function(e,t){return t(null,{auth:""})},t.prototype.trigger=function(e,t){if(0!==e.indexOf("client-"))throw new N("Event '"+e+"' does not start with 'client-'");if(!this.subscribed){var n=S("triggeringClientEvents");ed.warn("Client event triggered before channel 'subscription_succeeded' event . "+n)}return this.pusher.send_event(e,t,this.name)},t.prototype.disconnect=function(){this.subscribed=!1,this.subscriptionPending=!1},t.prototype.handleEvent=function(e){var t=e.event,n=e.data;"pusher_internal:subscription_succeeded"===t?this.handleSubscriptionSucceededEvent(e):0!==t.indexOf("pusher_internal:")&&this.emit(t,n,{})},t.prototype.handleSubscriptionSucceededEvent=function(e){this.subscriptionPending=!1,this.subscribed=!0,this.subscriptionCancelled?this.pusher.unsubscribe(this.name):this.emit("pusher:subscription_succeeded",e.data)},t.prototype.subscribe=function(){var e=this;this.subscribed||(this.subscriptionPending=!0,this.subscriptionCancelled=!1,this.authorize(this.pusher.connection.socket_id,function(t,n){t?(e.subscriptionPending=!1,ed.error(t.toString()),e.emit("pusher:subscription_error",Object.assign({},{type:"AuthError",error:t.message},t instanceof A?{status:t.status}:{}))):e.pusher.send_event("pusher:subscribe",{auth:n.auth,channel_data:n.channel_data,channel:e.name})}))},t.prototype.unsubscribe=function(){this.subscribed=!1,this.pusher.send_event("pusher:unsubscribe",{channel:this.name})},t.prototype.cancelSubscription=function(){this.subscriptionCancelled=!0},t.prototype.reinstateSubscription=function(){this.subscriptionCancelled=!1},t}(ex),eB=(c=function(e,t){return(c=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}c(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),eH=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return eB(t,e),t.prototype.authorize=function(e,t){return e0.createAuthorizer(this,this.pusher.config).authorize(e,t)},t}(ez),eU=function(){function e(){this.reset()}return e.prototype.get=function(e){return Object.prototype.hasOwnProperty.call(this.members,e)?{id:e,info:this.members[e]}:null},e.prototype.each=function(e){var t=this;en(this.members,function(n,r){e(t.get(r))})},e.prototype.setMyID=function(e){this.myID=e},e.prototype.onSubscription=function(e){this.members=e.presence.hash,this.count=e.presence.count,this.me=this.get(this.myID)},e.prototype.addMember=function(e){return null===this.get(e.user_id)&&this.count++,this.members[e.user_id]=e.user_info,this.get(e.user_id)},e.prototype.removeMember=function(e){var t=this.get(e.user_id);return t&&(delete this.members[e.user_id],this.count--),t},e.prototype.reset=function(){this.members={},this.count=0,this.myID=null,this.me=null},e}(),eW=(d=function(e,t){return(d=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}d(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),eq=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.members=new eU,r}return eW(t,e),t.prototype.authorize=function(t,n){var r=this;e.prototype.authorize.call(this,t,function(e,t){if(!e){if(void 0===t.channel_data){var s=S("authenticationEndpoint");ed.error("Invalid auth response for channel '"+r.name+"',expected 'channel_data' field. "+s),n("Invalid auth response");return}var i=JSON.parse(t.channel_data);r.members.setMyID(i.user_id)}n(e,t)})},t.prototype.handleEvent=function(e){var t=e.event;if(0===t.indexOf("pusher_internal:"))this.handleInternalEvent(e);else{var n=e.data,r={};e.user_id&&(r.user_id=e.user_id),this.emit(t,n,r)}},t.prototype.handleInternalEvent=function(e){var t=e.event,n=e.data;switch(t){case"pusher_internal:subscription_succeeded":this.handleSubscriptionSucceededEvent(e);break;case"pusher_internal:member_added":var r=this.members.addMember(n);this.emit("pusher:member_added",r);break;case"pusher_internal:member_removed":var s=this.members.removeMember(n);s&&this.emit("pusher:member_removed",s)}},t.prototype.handleSubscriptionSucceededEvent=function(e){this.subscriptionPending=!1,this.subscribed=!0,this.subscriptionCancelled?this.pusher.unsubscribe(this.name):(this.members.onSubscription(e.data),this.emit("pusher:subscription_succeeded",this.members))},t.prototype.disconnect=function(){this.members.reset(),e.prototype.disconnect.call(this)},t}(eH),eG=n(1),eX=n(0),eZ=(u=function(e,t){return(u=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}u(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),eY=function(e){function t(t,n,r){var s=e.call(this,t,n)||this;return s.key=null,s.nacl=r,s}return eZ(t,e),t.prototype.authorize=function(t,n){var r=this;e.prototype.authorize.call(this,t,function(e,t){if(e)return void n(e,t);var s=t.shared_secret;s?(r.key=Object(eX.decode)(s),delete t.shared_secret,n(null,t)):n(Error("No shared_secret key in auth payload for encrypted channel: "+r.name),null)})},t.prototype.trigger=function(e,t){throw new L("Client events are not currently supported for encrypted channels")},t.prototype.handleEvent=function(t){var n=t.event,r=t.data;0===n.indexOf("pusher_internal:")||0===n.indexOf("pusher:")?e.prototype.handleEvent.call(this,t):this.handleEncryptedEvent(n,r)},t.prototype.handleEncryptedEvent=function(e,t){var n=this;if(!this.key)return void ed.debug("Received encrypted event before key has been retrieved from the authEndpoint");if(!t.ciphertext||!t.nonce)return void ed.error("Unexpected format for encrypted event, expected object with `ciphertext` and `nonce` fields, got: "+t);var r=Object(eX.decode)(t.ciphertext);if(r.length<this.nacl.secretbox.overheadLength)return void ed.error("Expected encrypted event ciphertext length to be "+this.nacl.secretbox.overheadLength+", got: "+r.length);var s=Object(eX.decode)(t.nonce);if(s.length<this.nacl.secretbox.nonceLength)return void ed.error("Expected encrypted event nonce length to be "+this.nacl.secretbox.nonceLength+", got: "+s.length);var i=this.nacl.secretbox.open(r,s,this.key);if(null===i){ed.debug("Failed to decrypt an event, probably because it was encrypted with a different key. Fetching a new key from the authEndpoint..."),this.authorize(this.pusher.connection.socket_id,function(t,a){t?ed.error("Failed to make a request to the authEndpoint: "+a+". Unable to fetch new key, so dropping encrypted event"):null===(i=n.nacl.secretbox.open(r,s,n.key))?ed.error("Failed to decrypt event with new key. Dropping encrypted event"):n.emit(e,n.getDataToEmit(i))});return}this.emit(e,this.getDataToEmit(i))},t.prototype.getDataToEmit=function(e){var t=Object(eG.decode)(e);try{return JSON.parse(t)}catch(e){return t}},t}(eH),eJ=(h=function(e,t){return(h=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}h(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),eK=function(e){function t(t,n){var r=e.call(this)||this;r.state="initialized",r.connection=null,r.key=t,r.options=n,r.timeline=r.options.timeline,r.usingTLS=r.options.useTLS,r.errorCallbacks=r.buildErrorCallbacks(),r.connectionCallbacks=r.buildConnectionCallbacks(r.errorCallbacks),r.handshakeCallbacks=r.buildHandshakeCallbacks(r.errorCallbacks);var s=tf.getNetwork();return s.bind("online",function(){r.timeline.info({netinfo:"online"}),("connecting"===r.state||"unavailable"===r.state)&&r.retryIn(0)}),s.bind("offline",function(){r.timeline.info({netinfo:"offline"}),r.connection&&r.sendActivityCheck()}),r.updateStrategy(),r}return eJ(t,e),t.prototype.connect=function(){if(!this.connection&&!this.runner){if(!this.strategy.isSupported())return void this.updateState("failed");this.updateState("connecting"),this.startConnecting(),this.setUnavailableTimer()}},t.prototype.send=function(e){return!!this.connection&&this.connection.send(e)},t.prototype.send_event=function(e,t,n){return!!this.connection&&this.connection.send_event(e,t,n)},t.prototype.disconnect=function(){this.disconnectInternally(),this.updateState("disconnected")},t.prototype.isUsingTLS=function(){return this.usingTLS},t.prototype.startConnecting=function(){var e=this,t=function(n,r){n?e.runner=e.strategy.connect(0,t):"error"===r.action?(e.emit("error",{type:"HandshakeError",error:r.error}),e.timeline.error({handshakeError:r.error})):(e.abortConnecting(),e.handshakeCallbacks[r.action](r))};this.runner=this.strategy.connect(0,t)},t.prototype.abortConnecting=function(){this.runner&&(this.runner.abort(),this.runner=null)},t.prototype.disconnectInternally=function(){this.abortConnecting(),this.clearRetryTimer(),this.clearUnavailableTimer(),this.connection&&this.abandonConnection().close()},t.prototype.updateStrategy=function(){this.strategy=this.options.getStrategy({key:this.key,timeline:this.timeline,useTLS:this.usingTLS})},t.prototype.retryIn=function(e){var t=this;this.timeline.info({action:"retry",delay:e}),e>0&&this.emit("connecting_in",Math.round(e/1e3)),this.retryTimer=new X(e||0,function(){t.disconnectInternally(),t.connect()})},t.prototype.clearRetryTimer=function(){this.retryTimer&&(this.retryTimer.ensureAborted(),this.retryTimer=null)},t.prototype.setUnavailableTimer=function(){var e=this;this.unavailableTimer=new X(this.options.unavailableTimeout,function(){e.updateState("unavailable")})},t.prototype.clearUnavailableTimer=function(){this.unavailableTimer&&this.unavailableTimer.ensureAborted()},t.prototype.sendActivityCheck=function(){var e=this;this.stopActivityCheck(),this.connection.ping(),this.activityTimer=new X(this.options.pongTimeout,function(){e.timeline.error({pong_timed_out:e.options.pongTimeout}),e.retryIn(0)})},t.prototype.resetActivityCheck=function(){var e=this;this.stopActivityCheck(),this.connection&&!this.connection.handlesActivityChecks()&&(this.activityTimer=new X(this.activityTimeout,function(){e.sendActivityCheck()}))},t.prototype.stopActivityCheck=function(){this.activityTimer&&this.activityTimer.ensureAborted()},t.prototype.buildConnectionCallbacks=function(e){var t=this;return Q({},e,{message:function(e){t.resetActivityCheck(),t.emit("message",e)},ping:function(){t.send_event("pusher:pong",{})},activity:function(){t.resetActivityCheck()},error:function(e){t.emit("error",e)},closed:function(){t.abandonConnection(),t.shouldRetry()&&t.retryIn(1e3)}})},t.prototype.buildHandshakeCallbacks=function(e){var t=this;return Q({},e,{connected:function(e){t.activityTimeout=Math.min(t.options.activityTimeout,e.activityTimeout,e.connection.activityTimeout||1/0),t.clearUnavailableTimer(),t.setConnection(e.connection),t.socket_id=t.connection.id,t.updateState("connected",{socket_id:t.socket_id})}})},t.prototype.buildErrorCallbacks=function(){var e=this,t=function(t){return function(n){n.error&&e.emit("error",{type:"WebSocketError",error:n.error}),t(n)}};return{tls_only:t(function(){e.usingTLS=!0,e.updateStrategy(),e.retryIn(0)}),refused:t(function(){e.disconnect()}),backoff:t(function(){e.retryIn(1e3)}),retry:t(function(){e.retryIn(0)})}},t.prototype.setConnection=function(e){for(var t in this.connection=e,this.connectionCallbacks)this.connection.bind(t,this.connectionCallbacks[t]);this.resetActivityCheck()},t.prototype.abandonConnection=function(){if(this.connection){for(var e in this.stopActivityCheck(),this.connectionCallbacks)this.connection.unbind(e,this.connectionCallbacks[e]);var t=this.connection;return this.connection=null,t}},t.prototype.updateState=function(e,t){var n=this.state;if(this.state=e,n!==e){var r=e;"connected"===r&&(r+=" with new socket ID "+t.socket_id),ed.debug("State changed",n+" -> "+r),this.timeline.info({state:e,params:t}),this.emit("state_change",{previous:n,current:e}),this.emit(e,t)}},t.prototype.shouldRetry=function(){return"connecting"===this.state||"connected"===this.state},t}(ex),eQ=function(){function e(){this.channels={}}return e.prototype.add=function(e,t){return this.channels[e]||(this.channels[e]=function(e,t){if(0===e.indexOf("private-encrypted-")){if(t.config.nacl)return e0.createEncryptedChannel(e,t,t.config.nacl);throw new L("Tried to subscribe to a private-encrypted- channel but no nacl implementation available. "+S("encryptedChannelSupport"))}return 0===e.indexOf("private-")?e0.createPrivateChannel(e,t):0===e.indexOf("presence-")?e0.createPresenceChannel(e,t):e0.createChannel(e,t)}(e,t)),this.channels[e]},e.prototype.all=function(){var e,t;return e=this.channels,t=[],en(e,function(e){t.push(e)}),t},e.prototype.find=function(e){return this.channels[e]},e.prototype.remove=function(e){var t=this.channels[e];return delete this.channels[e],t},e.prototype.disconnect=function(){en(this.channels,function(e){e.disconnect()})},e}(),e0={createChannels:function(){return new eQ},createConnectionManager:function(e,t){return new eK(e,t)},createChannel:function(e,t){return new ez(e,t)},createPrivateChannel:function(e,t){return new eH(e,t)},createPresenceChannel:function(e,t){return new eq(e,t)},createEncryptedChannel:function(e,t,n){return new eY(e,t,n)},createTimelineSender:function(e,t){return new e$(e,t)},createAuthorizer:function(e,t){return t.authorizer?t.authorizer(e,t):new eO(e,t)},createHandshake:function(e,t){return new eF(e,t)},createAssistantToTheTransportManager:function(e,t,n){return new eP(e,t,n)}},e1=function(){function e(e){this.options=e||{},this.livesLeft=this.options.lives||1/0}return e.prototype.getAssistant=function(e){return e0.createAssistantToTheTransportManager(this,e,{minPingDelay:this.options.minPingDelay,maxPingDelay:this.options.maxPingDelay})},e.prototype.isAlive=function(){return this.livesLeft>0},e.prototype.reportDeath=function(){this.livesLeft-=1},e}(),e2=function(){function e(e,t){this.strategies=e,this.loop=!!t.loop,this.failFast=!!t.failFast,this.timeout=t.timeout,this.timeoutLimit=t.timeoutLimit}return e.prototype.isSupported=function(){return el(this.strategies,K("isSupported"))},e.prototype.connect=function(e,t){var n=this,r=this.strategies,s=0,i=this.timeout,a=null,o=function(l,c){c?t(null,c):(s+=1,n.loop&&(s%=r.length),s<r.length?(i&&(i*=2,n.timeoutLimit&&(i=Math.min(i,n.timeoutLimit))),a=n.tryStrategy(r[s],e,{timeout:i,failFast:n.failFast},o)):t(!0))};return a=this.tryStrategy(r[s],e,{timeout:i,failFast:this.failFast},o),{abort:function(){a.abort()},forceMinPriority:function(t){e=t,a&&a.forceMinPriority(t)}}},e.prototype.tryStrategy=function(e,t,n,r){var s=null,i=null;return n.timeout>0&&(s=new X(n.timeout,function(){i.abort(),r(!0)})),i=e.connect(t,function(e,t){(!(e&&s&&s.isRunning())||n.failFast)&&(s&&s.ensureAborted(),r(e,t))}),{abort:function(){s&&s.ensureAborted(),i.abort()},forceMinPriority:function(e){i.forceMinPriority(e)}}},e}(),e5=function(){function e(e){this.strategies=e}return e.prototype.isSupported=function(){return el(this.strategies,K("isSupported"))},e.prototype.connect=function(e,t){var n,r,s,i;return n=this.strategies,r=e,s=function(e,n){return function(r,s){if(n[e].error=r,r){(function(e){for(var t,n=0;n<e.length;n++){if(t=e[n],!t.error)return!1}return!0})(n)&&t(!0);return}es(n,function(e){e.forceMinPriority(s.transport.priority)}),t(null,s)}},i=ei(n,function(e,t,n,i){return e.connect(r,s(t,i))}),{abort:function(){es(i,e3)},forceMinPriority:function(e){es(i,function(t){t.forceMinPriority(e)})}}},e}();function e3(e){e.error||e.aborted||(e.abort(),e.aborted=!0)}var e4=function(){function e(e,t,n){this.strategy=e,this.transports=t,this.ttl=n.ttl||18e5,this.usingTLS=n.useTLS,this.timeline=n.timeline}return e.prototype.isSupported=function(){return this.strategy.isSupported()},e.prototype.connect=function(e,t){var n=this.usingTLS,r=function(e){var t=tf.getLocalStorage();if(t)try{var n=t[e6(e)];if(n)return JSON.parse(n)}catch(t){e9(e)}return null}(n),s=[this.strategy];if(r&&r.timestamp+this.ttl>=Y()){var i=this.transports[r.transport];i&&(this.timeline.info({cached:!0,transport:r.transport,latency:r.latency}),s.push(new e2([i],{timeout:2*r.latency+1e3,failFast:!0})))}var a=Y(),o=s.pop().connect(e,function r(i,l){i?(e9(n),s.length>0?(a=Y(),o=s.pop().connect(e,r)):t(i)):(function(e,t,n){var r=tf.getLocalStorage();if(r)try{r[e6(e)]=ec({timestamp:Y(),transport:t,latency:n})}catch(e){}}(n,l.transport.name,Y()-a),t(null,l))});return{abort:function(){o.abort()},forceMinPriority:function(t){e=t,o&&o.forceMinPriority(t)}}},e}();function e6(e){return"pusherTransport"+(e?"TLS":"NonTLS")}function e9(e){var t=tf.getLocalStorage();if(t)try{delete t[e6(e)]}catch(e){}}var e8=function(){function e(e,t){var n=t.delay;this.strategy=e,this.options={delay:n}}return e.prototype.isSupported=function(){return this.strategy.isSupported()},e.prototype.connect=function(e,t){var n,r=this.strategy,s=new X(this.options.delay,function(){n=r.connect(e,t)});return{abort:function(){s.ensureAborted(),n&&n.abort()},forceMinPriority:function(t){e=t,n&&n.forceMinPriority(t)}}},e}(),e7=function(){function e(e,t,n){this.test=e,this.trueBranch=t,this.falseBranch=n}return e.prototype.isSupported=function(){return(this.test()?this.trueBranch:this.falseBranch).isSupported()},e.prototype.connect=function(e,t){return(this.test()?this.trueBranch:this.falseBranch).connect(e,t)},e}(),te=function(){function e(e){this.strategy=e}return e.prototype.isSupported=function(){return this.strategy.isSupported()},e.prototype.connect=function(e,t){var n=this.strategy.connect(e,function(e,r){r&&n.abort(),t(e,r)});return n},e}();function tt(e){return function(){return e.isSupported()}}var tn={getRequest:function(e){var t=new window.XDomainRequest;return t.ontimeout=function(){e.emit("error",new I),e.close()},t.onerror=function(t){e.emit("error",t),e.close()},t.onprogress=function(){t.responseText&&t.responseText.length>0&&e.onChunk(200,t.responseText)},t.onload=function(){t.responseText&&t.responseText.length>0&&e.onChunk(200,t.responseText),e.emit("finished",200),e.close()},t},abortRequest:function(e){e.ontimeout=e.onerror=e.onprogress=e.onload=null,e.abort()}},tr=(p=function(e,t){return(p=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}p(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),ts=function(e){function t(t,n,r){var s=e.call(this)||this;return s.hooks=t,s.method=n,s.url=r,s}return tr(t,e),t.prototype.start=function(e){var t=this;this.position=0,this.xhr=this.hooks.getRequest(this),this.unloader=function(){t.close()},tf.addUnloadListener(this.unloader),this.xhr.open(this.method,this.url,!0),this.xhr.setRequestHeader&&this.xhr.setRequestHeader("Content-Type","application/json"),this.xhr.send(e)},t.prototype.close=function(){this.unloader&&(tf.removeUnloadListener(this.unloader),this.unloader=null),this.xhr&&(this.hooks.abortRequest(this.xhr),this.xhr=null)},t.prototype.onChunk=function(e,t){for(;;){var n=this.advanceBuffer(t);if(n)this.emit("chunk",{status:e,data:n});else break}this.isBufferTooLong(t)&&this.emit("buffer_too_long")},t.prototype.advanceBuffer=function(e){var t=e.slice(this.position),n=t.indexOf("\n");return -1!==n?(this.position+=n+1,t.slice(0,n)):null},t.prototype.isBufferTooLong=function(e){return this.position===e.length&&e.length>262144},t}(ex);(f=g||(g={}))[f.CONNECTING=0]="CONNECTING",f[f.OPEN=1]="OPEN",f[f.CLOSED=3]="CLOSED";var ti=g,ta=1,to=function(){function e(e,t){var n,r;this.hooks=e,this.session=tc(1e3)+"/"+function(e){for(var t=[],n=0;n<8;n++)t.push(tc(32).toString(32));return t.join("")}(8),this.location=(n=t,{base:(r=/([^\?]*)\/*(\??.*)/.exec(n))[1],queryString:r[2]}),this.readyState=ti.CONNECTING,this.openStream()}return e.prototype.send=function(e){return this.sendRaw(JSON.stringify([e]))},e.prototype.ping=function(){this.hooks.sendHeartbeat(this)},e.prototype.close=function(e,t){this.onClose(e,t,!0)},e.prototype.sendRaw=function(e){if(this.readyState!==ti.OPEN)return!1;try{var t,n;return tf.createSocketRequest("POST",tl((t=this.location,n=this.session,t.base+"/"+n+"/xhr_send"))).start(e),!0}catch(e){return!1}},e.prototype.reconnect=function(){this.closeStream(),this.openStream()},e.prototype.onClose=function(e,t,n){this.closeStream(),this.readyState=ti.CLOSED,this.onclose&&this.onclose({code:e,reason:t,wasClean:n})},e.prototype.onChunk=function(e){if(200===e.status){var t;switch(this.readyState===ti.OPEN&&this.onActivity(),e.data.slice(0,1)){case"o":t=JSON.parse(e.data.slice(1)||"{}"),this.onOpen(t);break;case"a":t=JSON.parse(e.data.slice(1)||"[]");for(var n=0;n<t.length;n++)this.onEvent(t[n]);break;case"m":t=JSON.parse(e.data.slice(1)||"null"),this.onEvent(t);break;case"h":this.hooks.onHeartbeat(this);break;case"c":t=JSON.parse(e.data.slice(1)||"[]"),this.onClose(t[0],t[1],!0)}}},e.prototype.onOpen=function(e){var t,n,r;this.readyState===ti.CONNECTING?(e&&e.hostname&&(this.location.base=(t=this.location.base,n=e.hostname,(r=/(https?:\/\/)([^\/:]+)((\/|:)?.*)/.exec(t))[1]+n+r[3])),this.readyState=ti.OPEN,this.onopen&&this.onopen()):this.onClose(1006,"Server lost session",!0)},e.prototype.onEvent=function(e){this.readyState===ti.OPEN&&this.onmessage&&this.onmessage({data:e})},e.prototype.onActivity=function(){this.onactivity&&this.onactivity()},e.prototype.onError=function(e){this.onerror&&this.onerror(e)},e.prototype.openStream=function(){var e=this;this.stream=tf.createSocketRequest("POST",tl(this.hooks.getReceiveURL(this.location,this.session))),this.stream.bind("chunk",function(t){e.onChunk(t)}),this.stream.bind("finished",function(t){e.hooks.onFinished(e,t)}),this.stream.bind("buffer_too_long",function(){e.reconnect()});try{this.stream.start()}catch(t){J(function(){e.onError(t),e.onClose(1006,"Could not start streaming",!1)})}},e.prototype.closeStream=function(){this.stream&&(this.stream.unbind_all(),this.stream.close(),this.stream=null)},e}();function tl(e){var t=-1===e.indexOf("?")?"?":"&";return e+t+"t="+ +new Date+"&n="+ta++}function tc(e){return Math.floor(Math.random()*e)}var td={getReceiveURL:function(e,t){return e.base+"/"+t+"/xhr_streaming"+e.queryString},onHeartbeat:function(e){e.sendRaw("[]")},sendHeartbeat:function(e){e.sendRaw("[]")},onFinished:function(e,t){e.onClose(1006,"Connection interrupted ("+t+")",!1)}},tu={getReceiveURL:function(e,t){return e.base+"/"+t+"/xhr"+e.queryString},onHeartbeat:function(){},sendHeartbeat:function(e){e.sendRaw("[]")},onFinished:function(e,t){200===t?e.reconnect():e.onClose(1006,"Connection interrupted ("+t+")",!1)}},th={getRequest:function(e){var t=new(tf.getXHRAPI());return t.onreadystatechange=t.onprogress=function(){switch(t.readyState){case 3:t.responseText&&t.responseText.length>0&&e.onChunk(t.status,t.responseText);break;case 4:t.responseText&&t.responseText.length>0&&e.onChunk(t.status,t.responseText),e.emit("finished",t.status),e.close()}},t},abortRequest:function(e){e.onreadystatechange=null,e.abort()}},tp={createStreamingSocket:function(e){return this.createSocket(td,e)},createPollingSocket:function(e){return this.createSocket(tu,e)},createSocket:function(e,t){return new to(e,t)},createXHR:function(e,t){return this.createRequest(th,e,t)},createRequest:function(e,t,n){return new ts(e,t,n)}};tp.createXDR=function(e,t){return this.createRequest(tn,e,t)};var tf={nextAuthCallbackID:1,auth_callbacks:{},ScriptReceivers:b,DependenciesReceivers:w,getDefaultStrategy:function(e,t,n){var r,s={};function i(t,r,i,a,o){var l=n(e,t,r,i,a,o);return s[t]=l,l}var a=Object.assign({},t,{hostNonTLS:e.wsHost+":"+e.wsPort,hostTLS:e.wsHost+":"+e.wssPort,httpPath:e.wsPath}),o=Object.assign({},a,{useTLS:!0}),l=Object.assign({},t,{hostNonTLS:e.httpHost+":"+e.httpPort,hostTLS:e.httpHost+":"+e.httpsPort,httpPath:e.httpPath}),c={loop:!0,timeout:15e3,timeoutLimit:6e4},d=new e1({lives:2,minPingDelay:1e4,maxPingDelay:e.activityTimeout}),u=new e1({lives:2,minPingDelay:1e4,maxPingDelay:e.activityTimeout}),h=i("ws","ws",3,a,d),p=i("wss","ws",3,o,d),f=i("sockjs","sockjs",1,l),m=i("xhr_streaming","xhr_streaming",1,l,u),g=i("xdr_streaming","xdr_streaming",1,l,u),x=i("xhr_polling","xhr_polling",1,l),v=i("xdr_polling","xdr_polling",1,l),b=new e2([h],c),y=new e2([p],c),j=new e2([f],c),w=new e2([new e7(tt(m),m,g)],c),k=new e2([new e7(tt(x),x,v)],c),C=new e2([new e7(tt(w),new e5([w,new e8(k,{delay:4e3})]),k)],c),S=new e7(tt(C),C,j);return r=new e5(t.useTLS?[b,new e8(S,{delay:2e3})]:[b,new e8(y,{delay:2e3}),new e8(S,{delay:5e3})]),new e4(new te(new e7(tt(h),r,S)),s,{ttl:18e5,timeline:t.timeline,useTLS:t.useTLS})},Transports:eM,transportConnectionInitializer:function(){var e=this;e.timeline.info(e.buildTimelineMessage({transport:e.name+(e.options.useTLS?"s":"")})),e.hooks.isInitialized()?e.changeState("initialized"):e.hooks.file?(e.changeState("initializing"),k.load(e.hooks.file,{useTLS:e.options.useTLS},function(t,n){e.hooks.isInitialized()?(e.changeState("initialized"),n(!0)):(t&&e.onError(t),e.onClose(),n(!1))})):e.onClose()},HTTPFactory:tp,TimelineTransport:{name:"jsonp",getAgent:function(e,t){return function(n,r){var s="http"+(t?"s":"")+"://"+(e.host||e.options.host)+e.options.path,i=tf.createJSONPRequest(s,n),a=tf.ScriptReceivers.create(function(t,n){b.remove(a),i.cleanup(),n&&n.host&&(e.host=n.host),r&&r(t,n)});i.send(a)}}},getXHRAPI:function(){return window.XMLHttpRequest},getWebSocketAPI:function(){return window.WebSocket||window.MozWebSocket},setup:function(e){var t=this;window.Pusher=e;var n=function(){t.onDocumentBody(e.ready)};window.JSON?n():k.load("json2",{},n)},getDocument:function(){return document},getProtocol:function(){return this.getDocument().location.protocol},getAuthorizers:function(){return{ajax:R,jsonp:eu}},onDocumentBody:function(e){var t=this;document.body?e():setTimeout(function(){t.onDocumentBody(e)},0)},createJSONPRequest:function(e,t){return new ep(e,t)},createScriptRequest:function(e){return new eh(e)},getLocalStorage:function(){try{return window.localStorage}catch(e){return}},createXHR:function(){return this.getXHRAPI()?this.createXMLHttpRequest():this.createMicrosoftXHR()},createXMLHttpRequest:function(){return new(this.getXHRAPI())},createMicrosoftXHR:function(){return new ActiveXObject("Microsoft.XMLHTTP")},getNetwork:function(){return e_},createWebSocket:function(e){return new(this.getWebSocketAPI())(e)},createSocketRequest:function(e,t){if(this.isXHRSupported())return this.HTTPFactory.createXHR(e,t);if(this.isXDRSupported(0===t.indexOf("https:")))return this.HTTPFactory.createXDR(e,t);throw"Cross-origin HTTP requests are not supported"},isXHRSupported:function(){var e=this.getXHRAPI();return!!e&&void 0!==new e().withCredentials},isXDRSupported:function(e){var t=this.getProtocol();return!!window.XDomainRequest&&t===(e?"https:":"http:")},addUnloadListener:function(e){void 0!==window.addEventListener?window.addEventListener("unload",e,!1):void 0!==window.attachEvent&&window.attachEvent("onunload",e)},removeUnloadListener:function(e){void 0!==window.addEventListener?window.removeEventListener("unload",e,!1):void 0!==window.detachEvent&&window.detachEvent("onunload",e)}};(m=x||(x={}))[m.ERROR=3]="ERROR",m[m.INFO=6]="INFO",m[m.DEBUG=7]="DEBUG";var tm=x,tg=function(){function e(e,t,n){this.key=e,this.session=t,this.events=[],this.options=n||{},this.sent=0,this.uniqueID=0}return e.prototype.log=function(e,t){e<=this.options.level&&(this.events.push(Q({},t,{timestamp:Y()})),this.options.limit&&this.events.length>this.options.limit&&this.events.shift())},e.prototype.error=function(e){this.log(tm.ERROR,e)},e.prototype.info=function(e){this.log(tm.INFO,e)},e.prototype.debug=function(e){this.log(tm.DEBUG,e)},e.prototype.isEmpty=function(){return 0===this.events.length},e.prototype.send=function(e,t){var n=this,r=Q({session:this.session,bundle:this.sent+1,key:this.key,lib:"js",version:this.options.version,cluster:this.options.cluster,features:this.options.features,timeline:this.events},this.options.params);return this.events=[],e(r,function(e,r){!e&&n.sent++,t&&t(e,r)}),!0},e.prototype.generateUniqueID=function(){return this.uniqueID++,this.uniqueID},e}(),tx=function(){function e(e,t,n,r){this.name=e,this.priority=t,this.transport=n,this.options=r||{}}return e.prototype.isSupported=function(){return this.transport.isSupported({useTLS:this.options.useTLS})},e.prototype.connect=function(e,t){var n=this;if(!this.isSupported())return tv(new P,t);if(this.priority<e)return tv(new T,t);var r=!1,s=this.transport.createConnection(this.name,this.priority,this.options.key,this.options),i=null,a=function(){s.unbind("initialized",a),s.connect()},o=function(){i=e0.createHandshake(s,function(e){r=!0,d(),t(null,e)})},l=function(e){d(),t(e)},c=function(){d(),t(new E(ec(s)))},d=function(){s.unbind("initialized",a),s.unbind("open",o),s.unbind("error",l),s.unbind("closed",c)};return s.bind("initialized",a),s.bind("open",o),s.bind("error",l),s.bind("closed",c),s.initialize(),{abort:function(){r||(d(),i?i.close():s.close())},forceMinPriority:function(e){!r&&n.priority<e&&(i?i.close():s.close())}}},e}();function tv(e,t){return J(function(){t(e)}),{abort:function(){},forceMinPriority:function(){}}}var tb=tf.Transports,ty=function(e,t,n,r,s,i){var a,o=tb[n];if(!o)throw new _(n);return e.enabledTransports&&-1===et(e.enabledTransports,t)||e.disabledTransports&&-1!==et(e.disabledTransports,t)?a=tj:(s=Object.assign({ignoreNullOrigin:e.ignoreNullOrigin},s),a=new tx(t,r,i?i.getAssistant(o):o,s)),a},tj={isSupported:function(){return!1},connect:function(e,t){var n=J(function(){t(new P)});return{abort:function(){n.ensureAborted()},forceMinPriority:function(){}}}};function tw(e){return"ws-"+e+".pusher.com"}var tk=function(){function e(t,n){var r,s,i,a,o,l=this;if(function(e){if(null==e)throw"You must pass your app key when you instantiate Pusher."}(t),!(n=n||{}).cluster&&!(n.wsHost||n.httpHost)){var c=S("javascriptQuickStart");ed.warn("You should always specify a cluster when connecting. "+c)}"disableStats"in n&&ed.warn("The disableStats option is deprecated in favor of enableStats"),this.key=t,this.config=(o={activityTimeout:(a=n).activityTimeout||12e4,authEndpoint:a.authEndpoint||"/pusher/auth",authTransport:a.authTransport||"ajax",cluster:a.cluster||"mt1",httpPath:a.httpPath||"/pusher",httpPort:a.httpPort||80,httpsPort:a.httpsPort||443,pongTimeout:a.pongTimeout||3e4,statsHost:a.statsHost||"stats.pusher.com",unavailableTimeout:a.unavailableTimeout||1e4,wsPath:a.wsPath||"",wsPort:a.wsPort||80,wssPort:a.wssPort||443,enableStats:"enableStats"in(r=a)?r.enableStats:"disableStats"in r&&!r.disableStats,httpHost:(s=a).httpHost?s.httpHost:s.cluster?"sockjs-"+s.cluster+".pusher.com":"sockjs.pusher.com",useTLS:function(e){if("https:"===tf.getProtocol());else if(!1===e.forceTLS)return!1;return!0}(a),wsHost:(i=a).wsHost?i.wsHost:i.cluster?tw(i.cluster):tw("mt1")},"auth"in a&&(o.auth=a.auth),"authorizer"in a&&(o.authorizer=a.authorizer),"disabledTransports"in a&&(o.disabledTransports=a.disabledTransports),"enabledTransports"in a&&(o.enabledTransports=a.enabledTransports),"ignoreNullOrigin"in a&&(o.ignoreNullOrigin=a.ignoreNullOrigin),"timelineParams"in a&&(o.timelineParams=a.timelineParams),"nacl"in a&&(o.nacl=a.nacl),o),this.channels=e0.createChannels(),this.global_emitter=new ex,this.sessionID=Math.floor(1e9*Math.random()),this.timeline=new tg(this.key,this.sessionID,{cluster:this.config.cluster,features:e.getClientFeatures(),params:this.config.timelineParams||{},limit:50,level:tm.INFO,version:y}),this.config.enableStats&&(this.timelineSender=e0.createTimelineSender(this.timeline,{host:this.config.statsHost,path:"/timeline/v2/"+tf.TimelineTransport.name})),this.connection=e0.createConnectionManager(this.key,{getStrategy:function(e){return tf.getDefaultStrategy(l.config,e,ty)},timeline:this.timeline,activityTimeout:this.config.activityTimeout,pongTimeout:this.config.pongTimeout,unavailableTimeout:this.config.unavailableTimeout,useTLS:!!this.config.useTLS}),this.connection.bind("connected",function(){l.subscribeAll(),l.timelineSender&&l.timelineSender.send(l.connection.isUsingTLS())}),this.connection.bind("message",function(e){var t=0===e.event.indexOf("pusher_internal:");if(e.channel){var n=l.channel(e.channel);n&&n.handleEvent(e)}t||l.global_emitter.emit(e.event,e.data)}),this.connection.bind("connecting",function(){l.channels.disconnect()}),this.connection.bind("disconnected",function(){l.channels.disconnect()}),this.connection.bind("error",function(e){ed.warn(e)}),e.instances.push(this),this.timeline.info({instances:e.instances.length}),e.isReady&&this.connect()}return e.ready=function(){e.isReady=!0;for(var t=0,n=e.instances.length;t<n;t++)e.instances[t].connect()},e.getClientFeatures=function(){return er(eo({ws:tf.Transports.ws},function(e){return e.isSupported({})}))},e.prototype.channel=function(e){return this.channels.find(e)},e.prototype.allChannels=function(){return this.channels.all()},e.prototype.connect=function(){if(this.connection.connect(),this.timelineSender&&!this.timelineSenderTimer){var e=this.connection.isUsingTLS(),t=this.timelineSender;this.timelineSenderTimer=new Z(6e4,function(){t.send(e)})}},e.prototype.disconnect=function(){this.connection.disconnect(),this.timelineSenderTimer&&(this.timelineSenderTimer.ensureAborted(),this.timelineSenderTimer=null)},e.prototype.bind=function(e,t,n){return this.global_emitter.bind(e,t,n),this},e.prototype.unbind=function(e,t,n){return this.global_emitter.unbind(e,t,n),this},e.prototype.bind_global=function(e){return this.global_emitter.bind_global(e),this},e.prototype.unbind_global=function(e){return this.global_emitter.unbind_global(e),this},e.prototype.unbind_all=function(e){return this.global_emitter.unbind_all(),this},e.prototype.subscribeAll=function(){var e;for(e in this.channels.channels)this.channels.channels.hasOwnProperty(e)&&this.subscribe(e)},e.prototype.subscribe=function(e){var t=this.channels.add(e,this);return t.subscriptionPending&&t.subscriptionCancelled?t.reinstateSubscription():t.subscriptionPending||"connected"!==this.connection.state||t.subscribe(),t},e.prototype.unsubscribe=function(e){var t=this.channels.find(e);t&&t.subscriptionPending?t.cancelSubscription():(t=this.channels.remove(e))&&t.subscribed&&t.unsubscribe()},e.prototype.send_event=function(e,t,n){return this.connection.send_event(e,t,n)},e.prototype.shouldUseTLS=function(){return this.config.useTLS},e.instances=[],e.isReady=!1,e.logToConsole=!1,e.Runtime=tf,e.ScriptReceivers=tf.ScriptReceivers,e.DependenciesReceivers=tf.DependenciesReceivers,e.auth_callbacks=tf.auth_callbacks,e}(),tC=t.default=tk;tf.setup(tk)}],t={};function n(r){if(t[r])return t[r].exports;var s=t[r]={i:r,l:!1,exports:{}};return e[r].call(s.exports,s,s.exports,n),s.l=!0,s.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t||4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)n.d(r,s,(function(t){return e[t]}).bind(null,s));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=2)}()},900547,e=>{"use strict";let t,n,r,s,i;var a=e.i(672042);e.i(563948);var o=e.i(407562),l=e.i(423746),c=e.i(848751),d=e.i(304649),u=e.i(696871),h=e.i(449381),p=e.i(846139),f=e.i(296046),m=e.i(301331),g=e.i(92479),x=e.i(767373),v=e.i(729602),b=e.i(296900),y=e.i(295224);e.i(72321);var j=e.i(163060);let w=null,k=()=>(w||(w=new j.default("dc5054126c8a894f78e9",{cluster:"us3"})),w);var C=e.i(472166),S=e.i(521598),M=e.i(418625),N=e.i(53223),I=e.i(88139),T=(0,I.createServerReference)("40e1866d731ec081584332a6f09189b59e50f0f6b6",I.callServer,void 0,I.findSourceMapURL,"deleteMessage"),E=e.i(307778),L=e.i(578570),_=e.i(246300),P=e.i(686832),A=e.i(176248),R=e.i(120485),D=e.i(297239),F=e.i(70165),O=e.i(848258);function $(){let{data:e,mutate:t}=(0,M.default)("showDeleteMessageDialog",null,{fallbackData:null});return{showConfirmDelete:e,setConfirmDelete:t}}function V({messages:e,targetMessageId:t}){let n=e.find(e=>"user"===e.role&&e.id===t);if(!n)return null;let r=(0,x.computeForkKeyOptions)(e).get(n.parentId||x.ROOT_MESSAGE_KEY)||[],s=r.findIndex(e=>e&&e.some(e=>e===n.id)),i=r[s];return r.length>1?(0,x.getLeafNodeForkKey)([...e],r[0===s?1:s-1],"right"):n.parentId&&i?i.slice(0,-1):null}function z(){let e=(0,h.useActiveBlockState)(),{history:t}=(0,m.useBlockHistory)({blockId:e?.id,searchAll:!0}),{scrollToHash:n}=(0,O.useScrollToMessage)(),{setPulsePreview:r}=(0,m.useSetPulsePreview)(),s=(0,h.useSetActiveBlockView)(),{ensureBlockSource:i}=(0,m.useBlockSource)();return{switchToBlock:(0,l.useCallback)(a=>{if(e?.messageId&&a.includes(e.messageId))return;let o={forkKeyIx:-1,block:null};for(let e of t){let t=a.findIndex(t=>t===e.messageId);!(t<0)&&(t<o.forkKeyIx||(o.forkKeyIx=t,o.block=e))}let{block:l}=o;l&&(l.isLoading&&i(l.id),s(!0,l),r({blockId:l.id}),n(l.messageId,150,!0,a))},[t,n,i,s,r,e?.messageId])}}function B(){let{chatId:e,messages:t,activeForkKey:n}=(0,g.useChatMessages)(),{isStreaming:r,isLoading:s}=(0,g.useChatLoadingState)(),i=(0,g.useSetChatState)(),d=(0,h.useActiveBlockState)(),{showConfirmDelete:u,setConfirmDelete:p}=$(),{setData:f,data:m}=(0,_.useChatHistory)(),[v,b]=(0,l.useTransition)(),y=(0,h.useSetActiveBlockView)(),{stopLlmResponse:j}=(0,C.useV0Chat)(),w=(0,c.useRouter)(),k=(0,F.useIsMobile)(),S=(0,D.useT)(),{switchToBlock:M}=z(),I=(0,l.useMemo)(()=>u?V({messages:t,targetMessageId:u}):null,[t,u]),O=(0,l.useCallback)(()=>{u&&!v&&(p(null),(r||s)&&j(),b(async()=>{let r=m?[...m]:[],s=[...t],a=d?{...d}:null;if(!t.find(e=>"user"===e.role&&e.id===u))return void o.toast.error("Message not found. Please try again.");try{if((0,N.track)("SubmitDeleteUserMessage",{messageId:u}),I){k||setTimeout(()=>{document.getElementById("chat-main-textarea")?.focus()},0);let n=new Set((0,x.getChildMessageIds)(t.map(e=>({...e,messageId:e.id})),u)),r=t.filter(e=>!("user"===e.role&&e.id===u||n.has(e.id))),s=await T({payload:{messageId:u,chatId:e}});if(s?.error)throw Error(s.error);M(I),i({messages:r,activeForkKey:I,saveLeafMessageId:!0}),o.toast.success("Messages successfully deleted.")}else{y(!1),f(t=>t.filter(t=>t.chatId!==e));let t=await (0,L.deleteChat)({payload:{chatId:e}});if(t?.error)throw Error(t.error);o.toast.success("Messages successfully deleted."),w.push("/chat")}p(void 0)}catch(t){let e=(0,R.handleChatError)(t);f(e=>r),i({messages:s,activeForkKey:n}),a&&y(!0,a),e||o.toast.error("Something went wrong. Please try again.")}}))},[d,n,m,e,s,k,v,r,t,I,w,y,f,i,p,u,j,M]),B=null!==I?{TITLE:S("deleteMessageDialog.deleteMessageTitle"),DESCRIPTION:S("deleteMessageDialog.deleteMessageDescription")}:{TITLE:S("deleteMessageDialog.deleteChatTitle"),DESCRIPTION:S("deleteMessageDialog.deleteChatDescription")};return(0,a.jsxs)(P.Modal,{onOpenChange:e=>{e||p(null)},open:null!==u,children:[(0,a.jsxs)(P.ModalHeader,{children:[(0,a.jsx)(P.ModalTitle,{children:B.TITLE}),(0,a.jsx)(P.ModalDescription,{children:B.DESCRIPTION})]}),(0,a.jsxs)(P.ModalFooter,{children:[(0,a.jsx)(P.ModalClose,{asChild:!0,children:(0,a.jsx)(A.Button,{size:"sm",variant:"secondary",children:S("deleteMessageDialog.cancel")})}),(0,a.jsx)(A.Button,{"data-testid":"confirm-delete-message",disabled:v,onClick:O,size:"sm",variant:"destructive",children:v?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(E.IconSpinner,{className:"size-4"}),S("deleteMessageDialog.deleting")]}):S("deleteMessageDialog.delete")})]})]})}var H=e.i(32170);let U=u.PUSHER_EVENTS.latestChat.getEventName();var W=e.i(242759),q=e.i(7284),G=e.i(707827);function X(){let{chatId:e}=(0,g.useChatId)(),{data:t}=(0,M.default)(null,e=>fetch(e).then(e=>e.text()),{refreshInterval:5e3,fallbackData:"OK"});return null}var Z=e.i(323194),Y=e.i(726718),J=e.i(582802),K=e.i(301936),Q=e.i(479273),ee=e.i(556355),et=e.i(905732),en=e.i(990131),er=e.i(276302),es=e.i(889610),ei=e.i(347853),ea=e.i(120282);let eo=({href:e,children:t,external:n,...r})=>n?(0,a.jsx)("a",{href:e,...r,children:t}):(0,a.jsx)(K.default,{href:e,...r,children:t});function el({className:e,...t}){let n=(0,D.useT)(),{locale:r}=(0,Q.useLocale)(),{expectUser:s}=(0,H.useUser)(),[i,o]=(0,l.useState)(!1);(0,l.useEffect)(()=>{let e=(0,er.getAnonId)();!s&&e&&o(!0)},[s]);let c=(0,l.useMemo)(()=>[{href:"/pricing",title:n("footer.pricing")},{href:"/enterprise",title:n("footer.enterprise"),external:!0},{href:"/faq",title:n("footer.faq"),external:!0},{key:"legal",title:(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(en.Drawer,{children:[(0,a.jsx)(en.DrawerTrigger,{className:"block sm:hidden",children:n("footer.legal")}),(0,a.jsxs)(en.DrawerContent,{className:"flex h-fit flex-col gap-2",children:[(0,a.jsx)(A.Button,{asChild:!0,variant:"ghost",className:"mt-2 w-full",children:(0,a.jsx)(eo,{href:"/policy",external:!0,children:n("footer.policy")})}),(0,a.jsx)(A.Button,{asChild:!0,variant:"ghost",className:"mb-2 w-full",children:(0,a.jsx)(K.default,{href:"http://vercel.com/terms",target:"_blank",children:n("footer.terms")})})]})]}),(0,a.jsxs)(ee.DropdownMenu,{children:[(0,a.jsx)(et.DropdownMenuTrigger,{className:"hidden sm:block",children:n("footer.legal")}),(0,a.jsxs)(ee.DropdownMenuContent,{sideOffset:8,className:"min-w-20 rounded-md p-1",children:[(0,a.jsx)(ee.DropdownMenuItem,{className:"h-6 rounded-[2px] text-xs",asChild:!0,children:(0,a.jsx)(eo,{href:"/policy",external:!0,children:(0,a.jsx)("span",{children:n("footer.policy")})})}),(0,a.jsx)(ee.DropdownMenuItem,{className:"h-6 rounded-[2px] text-xs",asChild:!0,children:(0,a.jsx)(K.default,{href:"https://vercel.com/legal/terms",target:"_blank",children:(0,a.jsx)("span",{children:n("footer.terms")})})})]})]})]})},{href:"https://vercel.com/legal/privacy-policy",title:n("footer.privacy")},{href:u.VERCEL_COMMUNITY_V0_SECTION_URL,title:"Vercel Community",hiddenOnMobile:!0},{href:"https://vercel.com/?utm_source=v0-site&utm_medium=banner&utm_campaign=home",title:(0,a.jsxs)(a.Fragment,{children:["Vercel",(0,a.jsx)("span",{className:r===es.jaLocaleInfo.iso639?"hidden md:inline":"",children:(0,a.jsx)(J.External,{className:"size-[10px]"})})]})}],[r,n]);return(0,a.jsxs)("footer",{className:(0,d.cn)({"text-xs":r===ei.enLocaleInfo.iso639,"text-[11px] tracking-tighter md:text-xs md:tracking-normal":r===es.jaLocaleInfo.iso639||r===ea.esLocaleInfo.iso639},e,"flex flex-col items-center gap-2"),...t,children:[(0,a.jsxs)("div",{"aria-hidden":!i,className:(0,d.cn)(i?"opacity-100":"opacity-0","text-v0-gray-900 transition-opacity"),children:["By messaging v0, you agree to our"," ",(0,a.jsx)(K.default,{className:"underline underline-offset-2",href:"/agreement",children:n("footer.terms")})," ","and"," ",(0,a.jsx)(eo,{className:"underline underline-offset-2",href:"/policy",external:!0,children:n("footer.policy")}),"."]}),(0,a.jsx)("nav",{className:"flex h-4 divide-x",children:c.map(e=>{let t=e.href,n=t&&!e.href.startsWith("/"),s=(0,d.cn)("flex items-center gap-1 text-gray-600 transition-colors hover:text-gray-900",{"px-2":r!==es.jaLocaleInfo.iso639,"px-1 md:px-2":r===es.jaLocaleInfo.iso639},e.hidden&&"hidden",e.hiddenOnMobile&&"hidden sm:flex");if(!t)return(0,a.jsx)("div",{className:s,children:e.title},e.key);let i=n||e.external?"a":K.default;return(0,a.jsx)(i,{className:s,href:e.href,target:n?"_blank":void 0,children:e.title},e.href)})})]})}var ec=e.i(589654),ed=e.i(657736),eu=e.i(120668),eh=e.i(183673),ep=e.i(745197),ef=e.i(492526),em=e.i(391236),eg=e.i(79259),ex=e.i(324277),ev=e.i(962631),eb=e.i(991020);let ey=(0,eb.withNewIcon)('<path fill-rule="evenodd" clip-rule="evenodd" d="M14.5 2.5H1.5V5.005H14.5V2.5ZM14.5 6.255H6.245V13.5H13.5C14.0523 13.5 14.5 13.0523 14.5 12.5V6.255ZM4.995 6.255H1.5V12.5C1.5 13.0523 1.94772 13.5 2.5 13.5H4.995V6.255ZM1.5 1H0V2.5V12.5C0 13.8807 1.11929 15 2.5 15H13.5C14.8807 15 16 13.8807 16 12.5V2.5V1H14.5H1.5Z" fill="currentColor"/>'),ej=[{prompt:"Please recreate the UI shown in the attached screenshot as accurately as possible.",title:"cloneScreenshot",icon:(0,a.jsx)(ex.Camera,{className:"size-[14px]"})},{prompt:"Please recreate the UI shown in the attached Figma frame as accurately as possible.",title:"importFromFigma",icon:(0,a.jsx)(function({className:e}){return(0,a.jsx)("svg",{width:"16",height:"18",viewBox:"0 0 16 18",className:e,fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,a.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M2.25 4.15129C2.25 5.1233 2.6869 5.99327 3.37503 6.57554C2.6869 7.1578 2.25 8.02777 2.25 8.99978C2.25 9.97179 2.6869 10.8418 3.37503 11.424C2.6869 12.0063 2.25 12.8763 2.25 13.8483C2.25 15.6013 3.67116 17.0225 5.42424 17.0225H5.5C7.29493 17.0225 8.75 15.5674 8.75 13.7725V12.174V11.6971C9.23602 11.9994 9.80974 12.174 10.4242 12.174H10.5758C12.3288 12.174 13.75 10.7529 13.75 8.99978C13.75 8.02777 13.3131 7.1578 12.625 6.57554C13.3131 5.99327 13.75 5.1233 13.75 4.15129C13.75 2.39821 12.3288 0.977051 10.5758 0.977051H8.75H8H7.25H5.42424C3.67116 0.977051 2.25 2.39821 2.25 4.15129ZM10.5758 5.82554C11.5004 5.82554 12.25 5.07595 12.25 4.15129C12.25 3.22663 11.5004 2.47705 10.5758 2.47705H8.75V5.82554H10.4242H10.5758ZM7.25 8.99978V7.32554H5.42424C4.49958 7.32554 3.75 8.07512 3.75 8.99978C3.75 9.92444 4.49958 10.674 5.42424 10.674H7.25V8.99978ZM8.75 8.99978C8.75 9.92444 9.49958 10.674 10.4242 10.674H10.5758C11.5004 10.674 12.25 9.92444 12.25 8.99978C12.25 8.07512 11.5004 7.32554 10.5758 7.32554H10.4242C9.49958 7.32554 8.75 8.07512 8.75 8.99978ZM5.42424 12.174L7.25 12.174V13.7725C7.25 14.739 6.4665 15.5225 5.5 15.5225H5.42424C4.49958 15.5225 3.75 14.7729 3.75 13.8483C3.75 12.9236 4.49958 12.174 5.42424 12.174ZM7.25 5.82554H5.42424C4.49958 5.82554 3.75 5.07595 3.75 4.15129C3.75 3.22663 4.49958 2.47705 5.42424 2.47705H7.25V5.82554Z",fill:"currentColor"})})},{className:"size-[14px]"})},{prompt:"Please upload a project.",title:"uploadProject",icon:(0,a.jsx)(ev.FileZip,{className:"size-[14px]"})},{prompt:`Create a modern, responsive landing page for a fictional SaaS company. The landing page should include the following sections:

- A header with the company logo, navigation links, and a call-to-action button.
- A hero section with a catchy headline, brief description, and a prominent call-to-action.
- A features section highlighting 3-4 key features of StreamLine.
- A testimonials section with quotes from satisfied customers.
- A pricing section with different plan options.
- A final call-to-action section to encourage sign-ups.
- A footer with important links and social media icons.`,title:"landingPage",icon:(0,a.jsx)(ey,{className:"size-[14px]"})}];var ew=e.i(996548);e.i(904347);var ek=e.i(37737),eC=e.i(851994);e.i(168204);var eS=e.i(225695),eM=e.i(667660),eN=e.i(937340);let eI=(0,eb.withNewIcon)('<path fill-rule="evenodd" clip-rule="evenodd" d="M2.72876 6.42462C3.40596 4.15488 5.51032 2.5 8.00002 2.5C10.0902 2.5 11.9092 3.66566 12.8405 5.38592L13.1975 6.04548L14.5166 5.33138L14.1596 4.67183C12.9767 2.48677 10.6625 1 8.00002 1C5.05453 1 2.53485 2.81872 1.50122 5.39447V3.75V3H0.0012207V3.75V7.17462C0.0012207 7.58883 0.337007 7.92462 0.751221 7.92462H4.17584H4.92584V6.42462H4.17584H2.72876ZM13.2713 9.57538H11.8243H11.0743V8.07538H11.8243H15.2489C15.6631 8.07538 15.9989 8.41117 15.9989 8.82538V12.25V13H14.4989V12.25V10.6053C13.4653 13.1812 10.9456 15 8.00002 15C5.35065 15 3.04619 13.5279 1.85809 11.3605L1.49757 10.7029L2.8129 9.98181L3.17342 10.6395C4.10882 12.3458 5.92017 13.5 8.00002 13.5C10.4897 13.5 12.5941 11.8451 13.2713 9.57538Z" fill="currentColor"/>'),eT=(0,eb.withNewIcon)('<path fill-rule="evenodd" clip-rule="evenodd" d="M5.75001 2H5.00001V3.5H5.75001H11.4393L2.21968 12.7197L1.68935 13.25L2.75001 14.3107L3.28034 13.7803L12.4988 4.56182V10.25V11H13.9988V10.25V3C13.9988 2.44772 13.5511 2 12.9988 2H5.75001Z" fill="currentColor"/>');function eE({className:e,width:t=642,height:n=212,idSuffix:r}){let s=`mask0_603_1196${r?`-${r}`:""}`,i=`paint0_linear_603_1196${r?`-${r}`:""}`;return(0,a.jsxs)("svg",{width:t,height:n,viewBox:"0 0 642 212",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:e,preserveAspectRatio:"xMidYMid meet",children:[(0,a.jsx)("mask",{id:s,style:{maskType:"alpha"},maskUnits:"userSpaceOnUse",x:"0",y:"0",width:"642",height:"212",children:(0,a.jsx)("rect",{width:"642",height:"212",fill:`url(#${i})`})}),(0,a.jsx)("g",{mask:`url(#${s})`,children:(0,a.jsx)("path",{d:"M114.193 56.7002L247.3 189.807V56.7002H297.5V225C297.5 244.606 281.606 260.5 262 260.5C252.632 260.5 243.391 256.887 236.754 250.25L43.207 56.7002H114.193ZM507.6 5.5C547.088 5.5 579.1 37.5116 579.1 77V209.3H528.9V91.3926L409.993 210.3H527.9V260.5H395.6C356.111 260.5 324.1 228.488 324.1 189V56.7002H374.3V175.007L375.153 174.153L492.754 56.5537L493.607 55.7002H375.3V5.5H507.6Z",stroke:"currentColor",strokeOpacity:"0.1"})}),(0,a.jsx)("defs",{children:(0,a.jsxs)("linearGradient",{id:i,x1:"321",y1:"212",x2:"321",y2:"0",gradientUnits:"userSpaceOnUse",children:[(0,a.jsx)("stop",{stopColor:"white",stopOpacity:"0"}),(0,a.jsx)("stop",{offset:"0.987475",stopColor:"white"})]})})]})}let eL="empty-screen-import-figma";function e_({isMobile:e,onSubmit:t,children:n,ref:r,...s}){let i=(0,D.useT)(),{locale:o}=(0,Q.useLocale)(),{expectUser:u}=(0,H.useUser)(),{setShowSignInDialog:h}=(0,Z.useSignInDialog)(),{submit:p,stopLlmResponse:m}=(0,C.useV0Chat)({onSubmit:t}),[g]=(0,ep.useRateLimit)(),x=!!(g?.remaining!==void 0&&g.remaining<=0),v=(0,er.getAnonId)(),b=!!(!u&&v),[y,j]=(0,l.useState)(!1),w=(0,c.usePathname)(),k=(0,f.useIsChatPage)(),S=(0,Y.isHome)(w),{hasWritePermission:M}=(0,eM.useActiveScope)(),{hce:N}=(0,W.useFlags)(),I=(0,l.useCallback)(e=>{h({content:"new"===e.action&&(e.content||!1)})},[h]);return M?(0,a.jsx)("div",{className:"flex h-full flex-col items-center justify-center gap-8",...s,children:(0,a.jsxs)("div",{className:"z-0 flex w-full flex-1 flex-col gap-24 overflow-auto px-6",ref:r,children:[(0,a.jsxs)("div",{className:"relative mx-auto flex w-full flex-col gap-4 pt-32 lg:pt-48",children:[(0,a.jsx)("div",{"aria-hidden":!0,className:"pointer-events-none absolute select-none -z-10 left-1/2 -translate-x-1/2",style:{top:"clamp(24px, 6vw, 72px)",width:"clamp(340px, 50vw, 642px)",height:"clamp(162px, 20vw, 212px)",opacity:1},children:(0,a.jsx)(eE,{idSuffix:"responsive",width:642,height:212,className:"w-full h-full text-current"})}),(0,a.jsx)("h1",{"data-testid":"app-title",className:(0,d.cn)("font-heading text-pretty text-center font-semibold tracking-tighter text-v0-gray-1000 sm:text-[32px] md:text-[46px]",{"text-[24px]":o===ea.esLocaleInfo.iso639,"text-[26px]":o===es.jaLocaleInfo.iso639,"text-[29px]":o===ei.enLocaleInfo.iso639}),children:i("emptyScreen.title.hce")}),(0,a.jsx)("h2",{className:"-mt-4 -mb-4 text-center text-[clamp(12px,3.5vw,20px)] sm:text-[20px] text-v0-gray-900 pb-4 whitespace-nowrap sm:whitespace-normal leading-tight tracking-tight",children:i("emptyScreen.subTitle")}),(0,a.jsx)(eN.ConditionalNavigationMarker,{enabled:S,phase:"content",label:"EmptyScreen",children:(0,a.jsx)(eu.PromptForm,{className:"relative mx-auto w-full max-w-196",isMobile:e,isNewChat:!k,isSignedIn:u,isAnonymous:b,stop:m,submit:u||v&&!x?p:I,isTemplateLoading:y})}),(0,a.jsxs)("div",{className:"flex min-h-0 shrink-0 items-center justify-center",children:[(0,a.jsx)(eR,{homepageChangesEnabled:N,isSignedIn:u}),(0,a.jsx)(eP,{show:!0,setIsTemplateLoading:j,isMobile:e})]})]}),(0,a.jsx)("div",{className:"mx-auto flex w-full max-w-[1264px] flex-1 flex-col gap-4",children:n}),(0,a.jsx)("div",{className:"py-4",children:(0,a.jsx)(el,{})})]})}):(0,a.jsx)("div",{className:"overflow-auto px-6 pt-16",children:n})}function eP({show:e,setIsTemplateLoading:t,isMobile:n}){let r=(0,D.useT)(),[s,i]=(0,l.useState)(!1),{expectUser:o,user:c}=(0,H.useUser)();(0,l.useEffect)(()=>{t(s)},[s,t]);let d=(0,l.useMemo)(()=>o||c?n?ej.filter(e=>"uploadProject"!==e.title):ej:[],[n,o,c]);return(0,a.jsx)(ec.AnimatePresence,{mode:"wait",children:e&&d.length?(0,a.jsxs)(ed.motion.div,{animate:{opacity:1},className:"flex max-w-[1000px] flex-wrap justify-center gap-3",exit:{opacity:0},initial:!1,role:"list",children:[(0,a.jsx)("h2",{className:"sr-only",children:r("emptyScreen.suggestedChatMessages")}),(0,a.jsx)(eA,{suggestion:d[0],isAnyLoading:s,setIsAnyLoading:i,setIsTemplateLoading:t}),(0,a.jsx)(eA,{suggestion:d[1],isAnyLoading:s,setIsAnyLoading:i,setIsTemplateLoading:t}),(0,a.jsx)("div",{className:"hidden md:block",children:(0,a.jsx)(eA,{suggestion:d[2],isAnyLoading:s,setIsAnyLoading:i,setIsTemplateLoading:t})}),(0,a.jsxs)("div",{className:"flex justify-center gap-3",children:[(0,a.jsx)("div",{className:"md:hidden",children:(0,a.jsx)(eA,{suggestion:d[2],isAnyLoading:s,setIsAnyLoading:i,setIsTemplateLoading:t})}),d.length>3?(0,a.jsx)(eA,{suggestion:d[3],isAnyLoading:s,setIsAnyLoading:i,setIsTemplateLoading:t}):null]})]},"suggestions"):null})}function eA({suggestion:e,isAnyLoading:t,setIsAnyLoading:n,setIsTemplateLoading:r}){let s=(0,D.useT)(),{submit:i}=(0,C.useV0Chat)(),{user:o}=(0,H.useUser)(),{setShowSignInDialog:d}=(0,Z.useSignInDialog)(),{selectedProjectId:u}=(0,eh.useProjectsForUser)(),[h]=(0,ep.useRateLimit)(),p=h?.remaining===0,f=(0,l.useMemo)(()=>(0,er.getAnonId)(),[]),m=l.useRef(null),{setSignInWithFigmaModalOpen:g}=(0,eC.useSignInWithFigmaModal)(),{setImportFigmaModalOpen:x}=(0,ef.useImportFromFigmaModal)(),{handleFigmaUrl:v,isFigmaUrl:b,getNodeContext:y,userData:j}=(0,em.useFigmaIntegration)(),[w,k]=(0,l.useState)(!1),S=(0,l.useRef)(void 0),{setShowZipModal:M}=(0,ew.useZipModal)(),{isUploading:I,onInputChange:T,uploadFiles:E}=(0,eg.default)({isSignedIn:!!o,onFinish:()=>{k(!1),n(!1),r(!1)},canUpload:()=>({ok:!0}),onUploadStart:()=>{k(!0),n(!0),r(!0)},onSuccess:async t=>{(0,N.track)("SubmitNewUserMessage",{text:e.prompt,imageOnly:!1,index:0,projectId:u,anonId:f,suggestion:e.title,messageMode:"build"}),await i({action:"new",content:(0,eS.createMDXMessageContent)(e.prompt),attachments:t,figmaContext:S.current,messageMode:"build"})},disableDrag:!0,disablePaste:!0}),L=(0,l.useCallback)(async e=>{if(!b(e))return;let[t,n]=await Promise.all([v(e),y(e)]);if(!t.success)return;let r=n.nodes.colors.map(e=>`${e.hex})`).join(", ")||"",s=n.nodes.designTokens.map(e=>`${e.hex})`).join(", ")||"";S.current=[r&&`Colors: ${r}`,s&&`Design tokens: ${s}`].filter(Boolean).join(", ");let{base64:i,originalUrl:a,fileName:o}=t.data,l=o.replace(/[^a-zA-Z0-9.]/g,"_"),c=i.split(",")[1],d=window.atob(c),u=new Uint8Array(d.length);for(let e=0;e<d.length;e++)u[e]=d.charCodeAt(e);let h=new File([new Blob([u],{type:"image/png"})],`${l}.png`,{type:"image/png"});h.isFigmaFile=!0,h.figmaUrl=a,h.v0Type="figma",await E([h])},[b,v,y,E]),_=(0,c.useSearchParams)();(0,l.useEffect)(()=>{if(_.get("modal")===eL&&j?.isSignedIn&&o){(0,N.track)("FigmaModalOpen",{source:"url"}),x({open:!0,onImport:L});let e=new URLSearchParams(_.toString());e.delete("modal"),window.history.replaceState({},"",`${window.location.pathname}?${e.toString()}`)}},[_,x,j?.isSignedIn,o,L]);let P=async()=>{((0,N.track)("ClickSuggestion",{suggestion:e.title}),o||f)?p?f?d({content:!1,customMessage:"To continue using the chat, create a Vercel account or log into an existing one."}):(0,ek.openDialog)({type:"upgradePlan"}):"cloneScreenshot"===e.title?o?m.current?.click():d({content:!1,customMessage:"To upload screenshots to your chat, create a Vercel account or log into an existing one."}):"importFromFigma"===e.title?o?j?.isSignedIn?((0,N.track)("FigmaModalOpen",{source:"url"}),x({open:!0,onImport:L})):g({open:!0,oauthUrlSearchParams:{modal:eL}}):d({content:!1,customMessage:"To import from Figma, create a Vercel account or log into an existing one."}):"uploadProject"===e.title?o?M(!0):d({content:!1,customMessage:"To upload a project, create a Vercel account or log into an existing one."}):((0,N.track)("SubmitNewUserMessage",{text:e.prompt,imageOnly:!1,index:0,projectId:u,anonId:f,suggestion:e.title,messageMode:"build"}),await i({action:"new",content:(0,eS.createMDXMessageContent)(e.prompt),messageMode:"build"})):d({content:(0,eS.createMDXMessageContent)(e.prompt)})},[R,F]=(0,l.useState)({x:0,y:0}),[O,$]=(0,l.useState)(!1),V=(0,l.useCallback)(e=>{let t=e.currentTarget.getBoundingClientRect();F({x:(e.clientX-t.left)/t.width*100,y:(e.clientY-t.top)/t.height*100})},[]);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("div",{className:"pointer-events-none absolute -inset-px rounded-full",style:{opacity:+!!O,background:"transparent",transition:"opacity 0.15s ease"},children:(0,a.jsx)("div",{className:"absolute inset-0 rounded-full border border-[rgba(68,225,211,0.9)] dark:border-[rgba(68,225,211,0.5)]",style:{background:"transparent",clipPath:"inset(0px round 9999px)",maskImage:"radial-gradient(circle at var(--mouse-x) var(--mouse-y), black, transparent 100%)",WebkitMaskImage:"radial-gradient(circle at var(--mouse-x) var(--mouse-y), black, transparent 100%)","--mouse-x":`${R.x}%`,"--mouse-y":`${R.y}%`}})}),(0,a.jsxs)(A.Button,{variant:"secondary",size:"sm",onClick:P,onMouseMove:V,onMouseEnter:()=>$(!0),onMouseLeave:()=>$(!1),className:"border-none text-[13px] text-v0-gray-900 shadow-sm hover:text-v0-gray-1000",disabled:w||I||t,"aria-label":s(`emptyScreen.suggestions.${e.title}`),rounded:!0,children:[(0,a.jsx)("span",{className:(w,"text-v0-gray-900"),children:(w||I)&&("cloneScreenshot"===e.title||"importFromFigma"===e.title)?(0,a.jsx)(G.Spinner,{size:14}):e.icon}),s(`emptyScreen.suggestions.${e.title}`)]})]}),(0,a.jsx)("input",{ref:m,type:"file",accept:"image/*",className:"sr-only",onChange:e=>{T(e)},disabled:w||I||t,tabIndex:-1,"aria-hidden":"true"})]})}function eR({homepageChangesEnabled:e,isSignedIn:t}){let[n,r]=(0,l.useState)(0),{submit:s}=(0,C.useV0Chat)(),{user:i}=(0,H.useUser)(),{setShowSignInDialog:o}=(0,Z.useSignInDialog)(),c=function(){let{data:e}=(0,M.default)("chat:templates");return e}(),u=(0,l.useMemo)(()=>{if(!c||0===c.length)return[];let e=4*n%c.length,t=[];for(let n=0;n<4&&t.length<c.length;n++)t.push(c[(e+n)%c.length]);return t},[c,n]);return t||!e?null:(0,a.jsxs)("div",{className:"mx-auto w-full max-w-196 flex flex-col gap-1 group",children:[(0,a.jsxs)("div",{className:"flex h-[40px] w-full items-center justify-between rounded-sm px-3 py-[10px] gap-2",children:[(0,a.jsx)("span",{className:"text-[13px] leading-4 font-medium text-v0-gray-900 pl-1",children:"Suggestions"}),(0,a.jsxs)(A.Button,{variant:"ghost",onClick:()=>{r(e=>e+1)},size:"sm",className:"flex items-center gap-2 text-[13px] leading-4 font-medium text-v0-gray-900 hover:text-v0-gray-1000 transition-colors",children:[(0,a.jsx)("span",{children:"Refresh"}),(0,a.jsx)(eI,{className:"w-5 h-5"})]})]}),(0,a.jsx)("ul",{className:"grid w-full grid-cols-1 gap-3 px-3 md:grid-cols-2",children:u.map((e,t)=>{if(!e)return null;let n=async()=>{i||(0,er.getAnonId)()?await s({action:"new",content:(0,eS.createMDXMessageContent)(e.prompt),templateId:e.messageId,messageMode:"build"}):o({content:(0,eS.createMDXMessageContent)(e.prompt),templateId:e.messageId})};return(0,a.jsxs)("li",{onClick:n,onKeyDown:e=>{("Enter"===e.key||" "===e.key)&&(e.preventDefault(),n())},role:"button",className:(0,d.cn)("group flex h-fit w-full items-center justify-between gap-3 rounded-md p-2 cursor-pointer transition-colors focus-visible:outline-hidden focus-visible:ring-2 focus-visible:ring-v0-blue-700 focus-visible:ring-offset-1 focus-visible:ring-offset-background",t>2?"hidden md:flex":null,"hover:bg-[rgba(0,0,0,0.05)] dark:hover:bg-[rgba(255,255,255,0.1)]"),tabIndex:0,children:[(0,a.jsx)("p",{className:"text-sm text-v0-gray-1000",children:e.name}),(0,a.jsx)(eT,{className:"h-4 w-4 text-v0-gray-900"})]},t)})})]})}var eD=e.i(838964),eF=e.i(849402),eO=e.i(209819),e$=e.i(75512),eV=e.i(730032),ez=e.i(273207),eB=e.i(418929);let eH=(0,l.memo)(function({forkKeyOptions:e,message:t,className:n}){let{messages:r}=(0,g.useChatMessages)(),s=(0,g.useSetChatState)(),{actions:i}=(0,eB.useCurrentChatPrompt)(),{clearEditingMessage:o}=i,c=(e||[]).findIndex(e=>e&&e.some(e=>e===t.id)),u=(0,h.useCloseActiveBlock)(),{forkKeyCache:p}=(0,ez.useLeafMessage)(),f=(0,y.useLatest)(r),m=(0,l.useCallback)(n=>{let r=e[n];if(!r)return;let i=(0,x.getLeafMessageIdFromForkKey)(r),a=i?p[i]:void 0;if(a){let e=new Set(f.current.map(e=>e.id)),t=!0;for(let n of a)e.has(n)||(t=!1);t&&(r=a)}let l=(0,x.getLeafNodeForkKey)([...f.current],r);u(t.id,l),s({activeForkKey:l}),o()},[e,p,f,u,t.id,s,o]);return!e||e.length<2?null:(0,a.jsxs)("div",{className:(0,d.cn)("flex items-center gap-0.5 text-sm font-medium",n),children:[(0,a.jsx)(A.Button,{"aria-label":"Previous message version",className:"disabled:bg-v0-background-100 size-6 rounded-md disabled:border-none",disabled:0===c,onClick:()=>{(0,N.track)("MessageForkPrevious"),m(c-1)},size:"xs",variant:"ghost",children:(0,a.jsx)(eV.ChevronLeftSmall,{})}),(0,a.jsxs)("span",{className:"whitespace-nowrap",children:[c+1," / ",e.length]}),(0,a.jsx)(A.Button,{"aria-label":"Next message version",className:"disabled:bg-v0-background-100 size-6 rounded-md disabled:border-none",disabled:c===e.length-1,onClick:()=>m(c+1),size:"xs",variant:"ghost",children:(0,a.jsx)(e$.ChevronRightSmall,{})})]})});var eU=e.i(278543),eW=e.i(827050),eq=e.i(801647),eG=e.i(586770),eX=e.i(937153),eZ=e.i(988118),eY=e.i(504066),eJ=e.i(351853),eK=e.i(889938),eQ=e.i(330136),e0=e.i(577247),e1=e.i(443148),e2=e.i(794593),e5=e.i(668887),e3=e.i(973817),e4=e.i(84079);let e6=["gap","space","flex","flexColumn","grid","showGap","size"].reduce((e,t)=>(e[t]=!1,e),{}),e9=["2xl","xl","lg","md","sm"],e8=(0,eb.withNewIcon)(`<circle cx="8" cy="8" r="7.25" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" fill="transparent" />
  <path opacity="0.33" fill-rule="evenodd" clip-rule="evenodd" d="M5 1H7V3H5V1ZM5 5V3H3V5H1V7H3V9H1V11H3V13H5V15H7V13H9V15H11V13H13V11H15V9H13V7H15V5H13V3H11V1H9V3H7V5H5ZM5 7H3V5H5V7ZM7 7V5H9V7H7ZM7 9V7H5V9H3V11H5V13H7V11H9V13H11V11H13V9H11V7H13V5H11V3H9V5H11V7H9V9H7ZM9 9H11V11H9V9ZM7 9V11H5V9H7Z" fill="currentColor"/>`),e7=(0,eb.withNewIcon)('<path fill-rule="evenodd" clip-rule="evenodd" d="M4.25 1H5H13.75H14.5V2.5H13.75H10.5475L7.02746 13.5H11H11.75V15H11H2.25H1.5V13.5H2.25H5.45254L8.97254 2.5H5H4.25V1Z" fill="currentColor"/>'),te=(0,eb.withNewIcon)('<path fill-rule="evenodd" clip-rule="evenodd" d="M8.00001 0.583374C6.15186 0.583374 4.89601 1.20742 4.10921 2.08165C3.34402 2.93186 3.08334 3.95168 3.08334 4.66671C3.08334 5.30246 3.25446 5.98764 3.73035 6.62516C3.82673 6.75427 3.934 6.8793 4.05254 7H1.75H1V8.5H1.75H14.25H15V7H14.25H7.01815L6.51769 6.8024C5.6688 6.46724 5.19511 6.07985 4.93239 5.72789C4.67477 5.38278 4.58334 5.0232 4.58334 4.66671C4.58334 4.27063 4.73934 3.62378 5.22415 3.0851C5.68734 2.57044 6.51483 2.08337 8.00001 2.08337C9.99003 2.08337 10.8295 2.95573 11.1785 3.6895L11.5006 4.36679L12.8552 3.72252L12.5331 3.04522C11.9243 1.76535 10.5425 0.583374 8.00001 0.583374ZM12.9167 11.25V10.5H11.4167V11.25C11.4167 11.6491 11.2587 12.3206 10.7686 12.8815C10.302 13.4155 9.47586 13.9167 8.00001 13.9167C6.13953 13.9167 5.27285 13.0402 4.87848 12.3L4.52584 11.638L3.20199 12.3433L3.55464 13.0053C4.18889 14.1958 5.54264 15.4167 8.00001 15.4167C9.85749 15.4167 11.1147 14.7652 11.8981 13.8685C12.658 12.9988 12.9167 11.9621 12.9167 11.25Z" fill="currentColor"/>'),tt=(0,eb.withNewIcon)('<path fill-rule="evenodd" clip-rule="evenodd" d="M3.46975 11.7803L4.00008 12.3106L5.06074 11.25L4.53041 10.7196L2.56076 8.75H13.4393L11.4697 10.7197L10.9393 11.25L12 12.3107L12.5303 11.7803L15.6036 8.70711C15.9941 8.31658 15.9941 7.68342 15.6036 7.29289L12.5303 4.21967L12 3.68934L10.9393 4.75L11.4697 5.28033L13.4393 7.25H2.56072L4.53042 5.28031L5.06075 4.74998L4.00009 3.68932L3.46975 4.21965L0.396531 7.29287C0.00600663 7.68339 0.00600657 8.31656 0.396531 8.70708L3.46975 11.7803Z" fill="currentColor"/>'),tn=(0,eb.withNewIcon)('<path fill-rule="evenodd" clip-rule="evenodd" d="M4.21968 3.46975L3.68935 4.00008L4.75001 5.06074L5.28034 4.53041L7.24999 2.56076L7.24999 13.4393L5.28031 11.4697L4.74998 10.9393L3.68932 12L4.21965 12.5303L7.29288 15.6036C7.6834 15.9941 8.31657 15.9941 8.70709 15.6036L11.7803 12.5303L12.3106 12L11.25 10.9393L10.7197 11.4697L8.74999 13.4393L8.74999 2.56072L10.7197 4.53041L11.25 5.06075L12.3107 4.00009L11.7803 3.46975L8.70712 0.396531C8.31659 0.00600645 7.68343 0.00600637 7.2929 0.396531L4.21968 3.46975Z" fill="currentColor"/>');var tr=e.i(322774);let ts=(0,eb.withNewIcon)('<path fill-rule="evenodd" clip-rule="evenodd" d="M1.75 2H1V3.5H1.75H14.25H15V2H14.25H1.75ZM3.5 7.25H4.25H11.75H12.5V8.75H11.75H4.25H3.5V7.25ZM2.5 12.5H3.25H12.75H13.5V14H12.75H3.25H2.5V12.5Z" fill="currentColor"/>'),ti=(0,eb.withNewIcon)('<path fill-rule="evenodd" clip-rule="evenodd" d="M1.75 2H1V3.5H1.75H14.25H15V2H14.25H1.75ZM6 7.25H6.75H14.25H15V8.75H14.25H6.75H6V7.25ZM4 12.5H4.75H14.25H15V14H14.25H4.75H4V12.5Z" fill="currentColor"/>'),ta=(0,eb.withNewIcon)('<path fill-rule="evenodd" clip-rule="evenodd" d="M1 2H1.75H14.25H15V3.5H14.25H1.75H1V2ZM1 12.5H1.75H14.25H15V14H14.25H1.75H1V12.5ZM1.75 7.25H1V8.75H1.75H14.25H15V7.25H14.25H1.75Z" fill="currentColor"/>');var to=e.i(801023),tl=e.i(307149),tc=e.i(163289),td=e.i(211976),tu=e.i(675120),th=e.i(592258),tp=e.i(996174),tf=e.i(300273),tm=e.i(489855),tg=e.i(467752),tx=e.i(757786),tv=e.i(292029),tb=e.i(792437),ty=e.i(940393),tj=e.i(763480),tw=e.i(574768),tk=e.i(573011);function tC({children:e}){return"undefined"==typeof document?null:(0,tk.createPortal)(e,document.body)}function tS({title:e,value:t,presets:n,onChange:r,step:s=1,min:i,max:o,prefix:c,suffix:d,disabled:u,allowNegative:h=!1,allowIconSliding:p=!1,placeholder:f}){let m=l.useRef(null),[g,x]=l.useState(!1),v=l.useMemo(()=>{let e={};return n.forEach(([,t],n)=>{e[t]=n}),e},[n]),b=e=>{if(m.current){let t=!1,n=r(v[e]??e,m.current,()=>{t=!0});t||!1===n||(m.current.value=e)}},j=l.useRef(null),w=j.current??t,k="number"==typeof w&&n[w]?n[w][1]:String(w),[C,S]=function(e){let[t,n]=l.useState(e);return l.useEffect(()=>{n(e)},[e]),[t,n]}(k),M=()=>{null!==j.current&&(b("number"==typeof j.current&&n[j.current]?n[j.current][1]:String(j.current)),j.current=null)},N=(0,y.useLatest)(k),I=(0,y.useLatest)(r),T=l.useCallback((e,t)=>{if(!m.current)return;let n=!1,r=m.current.value;S(e);let s=I.current(v[e]??e,m.current,()=>{n=!0},t);n||!1===s?S(r):m.current.value=e},[S]);return(0,a.jsxs)("div",{className:"w-full relative",children:[!c&&p?(0,a.jsx)(tM,{valueRef:N,setValueTo:T,step:s,min:i,max:o,children:null}):null,(0,a.jsx)(tw.Popover,{open:g,onOpenChange:x,children:(0,a.jsxs)(ty.Command,{className:"rounded-none",children:[(0,a.jsx)(tv.Anchor,{children:(0,a.jsx)(tb.Command.Input,{asChild:!0,value:"",onKeyDown:()=>x(!1),onMouseDown:()=>x(e=>!e),onFocus:()=>x(!0),"data-cmdk-input-name":e,children:(0,a.jsx)(tj.Input,{ref:m,placeholder:f,size:"sm","aria-label":e,type:"text",className:"[&>input]:tabular-nums [&>input]:tracking-normal",value:C,onChange:e=>{S(e.currentTarget.value),r(v[e.currentTarget.value]??e.currentTarget.value,e.currentTarget,e.preventDefault.bind(e))},prefix:c&&p?(0,a.jsx)(tM,{valueRef:N,setValueTo:T,step:s,min:i,max:o,children:c}):null,suffix:d,disabled:u,onKeyDown:e=>{if("ArrowUp"===e.key||"ArrowDown"===e.key){x(!1);let t=parseFloat(e.currentTarget.value);if(isNaN(t))return;let n=e.currentTarget.value.replace(/^[0-9.-]+/,""),r=Math.round((t+("ArrowUp"===e.key?s:-s))*1e3)/1e3;if(!1===h&&r<0)return void e.preventDefault();let i=`${r}${n}`;S(i),b(i),e.preventDefault()}},spellCheck:"false",autoComplete:"off",autoCorrect:"off"})})}),!g&&(0,a.jsx)(ty.CommandList,{"aria-hidden":"true",className:"hidden"}),(0,a.jsx)(tw.PopoverContent,{side:"bottom",align:"start",sideOffset:4,alignOffset:0,onOpenAutoFocus:e=>e.preventDefault(),onInteractOutside:t=>{M(),t.target instanceof Element&&t.target.getAttribute("data-cmdk-input-name")===e&&t.preventDefault()},className:"p-0 w-(--radix-popover-trigger-width) min-w-32 max-w-80 rounded",onPointerLeave:M,children:(0,a.jsxs)(ty.CommandList,{children:[(0,a.jsx)(ty.CommandEmpty,{className:"p-1",children:"No value found."}),(0,a.jsx)(ty.CommandGroup,{className:"p-1",children:g?n.map(([e,n])=>(0,a.jsx)(ty.CommandItem,{value:e,onMouseDown:e=>e.preventDefault(),onSelect:()=>{j.current=null,b(n),x(!1)},className:"px-2 py-1 rounded-sm tabular-nums",onPointerEnter:()=>{null===j.current&&(j.current=t),m.current&&r(v[n]??n,m.current,()=>{},!0)},children:n.endsWith("%")&&e.includes("/")?e:n},e)):null})]})})]})})]})}function tM({children:e,valueRef:t,setValueTo:n,step:r,min:s,max:i,factor:o=.05}){let[c,d]=l.useState(!1),u=l.useRef(null),h=(0,y.useLatest)(c),p=l.useRef(null),f=l.useRef(null),m=l.useRef(null),g=l.useRef(null),x=l.useRef(null),v=l.useRef(null),b=l.useCallback(e=>{x.current=null;let n=t.current.match(/^-?[.\d]+/);n&&(f.current=e.pageX,m.current=e.pageY,g.current=[parseFloat(n[0]),t.current.slice(n[0].length)],e.currentTarget.setPointerCapture(e.pointerId),e.preventDefault(),document.pointerLockElement||p.current?.requestPointerLock({unadjustedMovement:!0}).then(()=>{d(!0)}).catch(e=>{"NotSupportedError"===e.name&&p.current?.requestPointerLock().then(()=>{d(!0)})}))},[]),j=l.useMemo(()=>{let e=String(r),t=e.indexOf(".");return -1===t?0:e.length-t-1},[r]),w=l.useCallback(e=>{if(null===f.current||null===g.current)return;if(f.current+=e,u.current&&h.current){if("number"!=typeof f.current||"number"!=typeof m.current)return;let e=f.current,t=window.innerWidth;e<0?e+=t:e>=t&&(e-=t),u.current.style.transform="translate("+e+"px,"+m.current+"px)"}let t=Math.round(f.current*o)*r,a=g.current[0]+t;"number"==typeof s&&a<s&&(a=s),"number"==typeof i&&a>i&&(a=i);let l=a.toFixed(j);if(l.includes(".")){for(;l.endsWith("0");)l=l.slice(0,-1);l.endsWith(".")&&(l=l.slice(0,-1))}if(l===x.current)return;x.current=l;let c=l+g.current[1];v.current=c,n(c,!0)},[n,o,r,j,s,i]),k=(0,y.useLatest)(w),C=l.useCallback(e=>{k.current(e.movementX)},[]),S=l.useCallback(e=>{f.current=null,g.current=null,e.currentTarget.releasePointerCapture(e.pointerId),v.current&&(n(v.current,!1),v.current=null),document.exitPointerLock(),d(!1)},[n]);return l.useEffect(()=>{let e=!1,t=!1,n=e=>{k.current(e.movementX)},r=()=>{if(document.pointerLockElement===p.current)e||(e=!0,document.addEventListener("mousemove",n,!1));else{if(t)return;t=!0,d(!1),document.removeEventListener("mousemove",n,!1)}};return document.addEventListener("pointerlockchange",r,!1),()=>{document.removeEventListener("pointerlockchange",r,!1),t||document.removeEventListener("mousemove",n,!1)}},[]),(0,a.jsxs)("span",{ref:p,className:"cursor-ew-resize",onPointerDown:b,onPointerMove:C,onPointerUp:S,style:null===e?{position:"absolute",display:"block",width:".75em",height:"100%",left:"-.25em"}:{},children:[e,c?(0,a.jsx)(tC,{children:(0,a.jsx)("svg",{height:"32",viewBox:"0 0 32 32",width:"32",xmlns:"http://www.w3.org/2000/svg",className:"fixed pointer-events-none",style:{zIndex:0x7fffffff,top:-16,left:-16},ref:u,children:(0,a.jsxs)("g",{fill:"none",transform:"translate(8 10)",children:[(0,a.jsx)("path",{d:"m0 6.9907v.005l5.997 5.996.001-3.999h1.999 2.02v4l5.98-6.001-5.98-5.999.001 4.019-2.021.002h-2l.001-4.022zm1.411.003 3.587-3.588-.001 2.587h3.5 2.521v-2.585l3.565 3.586-3.564 3.585-.001-2.585h-2.521l-3.499-.001-.001 2.586z",fill:"#fff"}),(0,a.jsx)("path",{d:"m8.497 7.993h2.521v2.586l3.565-3.586-3.565-3.585v2.605h-2.521-3.5v-2.607l-3.586 3.587 3.586 3.586v-2.587z",fill:"#000"})]})})}):null]})}var tN=e.i(610726),tI=e.i(4876),tI=tI,tT=e.i(457684),tE=e.i(644471),tL=e.i(664380),t_=e.i(216445),tP=e.i(375582);let tA=(e,t)=>{if("number"==typeof e){if(3===t)return{mode:"rgb",r:(e>>8&15|e>>4&240)/255,g:(e>>4&15|240&e)/255,b:(15&e|e<<4&240)/255};if(4===t)return{mode:"rgb",r:(e>>12&15|e>>8&240)/255,g:(e>>8&15|e>>4&240)/255,b:(e>>4&15|240&e)/255,alpha:(15&e|e<<4&240)/255};if(6===t)return{mode:"rgb",r:(e>>16&255)/255,g:(e>>8&255)/255,b:(255&e)/255};if(8===t)return{mode:"rgb",r:(e>>24&255)/255,g:(e>>16&255)/255,b:(e>>8&255)/255,alpha:(255&e)/255}}},tR={aliceblue:0xf0f8ff,antiquewhite:0xfaebd7,aqua:65535,aquamarine:8388564,azure:0xf0ffff,beige:0xf5f5dc,bisque:0xffe4c4,black:0,blanchedalmond:0xffebcd,blue:255,blueviolet:9055202,brown:0xa52a2a,burlywood:0xdeb887,cadetblue:6266528,chartreuse:8388352,chocolate:0xd2691e,coral:0xff7f50,cornflowerblue:6591981,cornsilk:0xfff8dc,crimson:0xdc143c,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:0xb8860b,darkgray:0xa9a9a9,darkgreen:25600,darkgrey:0xa9a9a9,darkkhaki:0xbdb76b,darkmagenta:9109643,darkolivegreen:5597999,darkorange:0xff8c00,darkorchid:0x9932cc,darkred:9109504,darksalmon:0xe9967a,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:0xff1493,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:0xb22222,floralwhite:0xfffaf0,forestgreen:2263842,fuchsia:0xff00ff,gainsboro:0xdcdcdc,ghostwhite:0xf8f8ff,gold:0xffd700,goldenrod:0xdaa520,gray:8421504,green:32768,greenyellow:0xadff2f,grey:8421504,honeydew:0xf0fff0,hotpink:0xff69b4,indianred:0xcd5c5c,indigo:4915330,ivory:0xfffff0,khaki:0xf0e68c,lavender:0xe6e6fa,lavenderblush:0xfff0f5,lawngreen:8190976,lemonchiffon:0xfffacd,lightblue:0xadd8e6,lightcoral:0xf08080,lightcyan:0xe0ffff,lightgoldenrodyellow:0xfafad2,lightgray:0xd3d3d3,lightgreen:9498256,lightgrey:0xd3d3d3,lightpink:0xffb6c1,lightsalmon:0xffa07a,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:0xb0c4de,lightyellow:0xffffe0,lime:65280,limegreen:3329330,linen:0xfaf0e6,magenta:0xff00ff,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:0xba55d3,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:0xc71585,midnightblue:1644912,mintcream:0xf5fffa,mistyrose:0xffe4e1,moccasin:0xffe4b5,navajowhite:0xffdead,navy:128,oldlace:0xfdf5e6,olive:8421376,olivedrab:7048739,orange:0xffa500,orangered:0xff4500,orchid:0xda70d6,palegoldenrod:0xeee8aa,palegreen:0x98fb98,paleturquoise:0xafeeee,palevioletred:0xdb7093,papayawhip:0xffefd5,peachpuff:0xffdab9,peru:0xcd853f,pink:0xffc0cb,plum:0xdda0dd,powderblue:0xb0e0e6,purple:8388736,rebeccapurple:6697881,red:0xff0000,rosybrown:0xbc8f8f,royalblue:4286945,saddlebrown:9127187,salmon:0xfa8072,sandybrown:0xf4a460,seagreen:3050327,seashell:0xfff5ee,sienna:0xa0522d,silver:0xc0c0c0,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:0xfffafa,springgreen:65407,steelblue:4620980,tan:0xd2b48c,teal:32896,thistle:0xd8bfd8,tomato:0xff6347,turquoise:4251856,violet:0xee82ee,wheat:0xf5deb3,white:0xffffff,whitesmoke:0xf5f5f5,yellow:0xffff00,yellowgreen:0x9acd32},tD=/^#?([0-9a-f]{8}|[0-9a-f]{6}|[0-9a-f]{4}|[0-9a-f]{3})$/i,tF="([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)",tO=`${tF}%`,t$=`(?:${tF}%|${tF})`,tV=`(?:${tF}%|${tF}|none)`,tz=`(?:${tF}(deg|grad|rad|turn)|${tF})`,tB="\\s*,\\s*";RegExp("^"+tV+"$");let tH=RegExp(`^rgba?\\(\\s*${tF}${tB}${tF}${tB}${tF}\\s*(?:,\\s*${t$}\\s*)?\\)$`),tU=RegExp(`^rgba?\\(\\s*${tO}${tB}${tO}${tB}${tO}\\s*(?:,\\s*${t$}\\s*)?\\)$`),tW=(e,t)=>void 0===e?void 0:"object"!=typeof e?no(e):void 0!==e.mode?e:t?{...e,mode:t}:void 0,tq=(e="rgb")=>t=>void 0!==(t=tW(t,e))?t.mode===e?t:tG[t.mode][e]?tG[t.mode][e](t):"rgb"===e?tG[t.mode].rgb(t):tG.rgb[e](tG[t.mode].rgb(t)):void 0,tG={},tX={},tZ=[],tY={},tJ=e=>e,tK=e=>(tG[e.mode]={...tG[e.mode],...e.toMode},Object.keys(e.fromMode||{}).forEach(t=>{tG[t]||(tG[t]={}),tG[t][e.mode]=e.fromMode[t]}),e.ranges||(e.ranges={}),e.difference||(e.difference={}),e.channels.forEach(t=>{if(void 0===e.ranges[t]&&(e.ranges[t]=[0,1]),!e.interpolate[t])throw Error(`Missing interpolator for: ${t}`);"function"==typeof e.interpolate[t]&&(e.interpolate[t]={use:e.interpolate[t]}),e.interpolate[t].fixup||(e.interpolate[t].fixup=tJ)}),tX[e.mode]=e,(e.parse||[]).forEach(t=>{t0(t,e.mode)}),tq(e.mode)),tQ=e=>tX[e],t0=(e,t)=>{if("string"==typeof e){if(!t)throw Error("'mode' required when 'parser' is a string");tY[e]=t}else"function"==typeof e&&0>tZ.indexOf(e)&&tZ.push(e)},t1=/[^\x00-\x7F]|[a-zA-Z_]/,t2=/[^\x00-\x7F]|[-\w]/,t5="function",t3="ident",t4="number",t6="percentage",t9="none",t8="alpha",t7=0;function ne(e){let t=e[t7],n=e[t7+1];return"-"===t||"+"===t?/\d/.test(n)||"."===n&&/\d/.test(e[t7+2]):"."===t?/\d/.test(n):/\d/.test(t)}function nt(e){if(t7>=e.length)return!1;let t=e[t7];if(t1.test(t))return!0;if("-"===t){if(e.length-t7<2)return!1;let t=e[t7+1];if("-"===t||t1.test(t))return!0}return!1}let nn={deg:1,rad:180/Math.PI,grad:.9,turn:360};function nr(e){let t="";if(("-"===e[t7]||"+"===e[t7])&&(t+=e[t7++]),t+=ns(e),"."===e[t7]&&/\d/.test(e[t7+1])&&(t+=e[t7++]+ns(e)),("e"===e[t7]||"E"===e[t7])&&(("-"===e[t7+1]||"+"===e[t7+1])&&/\d/.test(e[t7+2])?t+=e[t7++]+e[t7++]+ns(e):/\d/.test(e[t7+1])&&(t+=e[t7++]+ns(e))),nt(e)){let n=ni(e);return"deg"===n||"rad"===n||"turn"===n||"grad"===n?{type:"hue",value:t*nn[n]}:void 0}return"%"===e[t7]?(t7++,{type:t6,value:+t}):{type:t4,value:+t}}function ns(e){let t="";for(;/\d/.test(e[t7]);)t+=e[t7++];return t}function ni(e){let t="";for(;t7<e.length&&t2.test(e[t7]);)t+=e[t7++];return t}function na(e,t){let n,r=[];for(;e._i<e.length;){if((n=e[e._i++]).type===t9||n.type===t4||n.type===t8||n.type===t6||t&&"hue"===n.type){r.push(n);continue}if(")"===n.type){if(e._i<e.length)return;continue}return}if(!(r.length<3)&&!(r.length>4)){if(4===r.length){if(r[3].type!==t8)return;r[3]=r[3].value}return 3===r.length&&r.push({type:t9,value:void 0}),r.every(e=>e.type!==t8)?r:void 0}}let no=e=>{let t;if("string"!=typeof e)return;let n=function(e=""){let t,n=e.trim(),r=[];for(t7=0;t7<n.length;){if("\n"===(t=n[t7++])||"	"===t||" "===t){for(;t7<n.length&&("\n"===n[t7]||"	"===n[t7]||" "===n[t7]);)t7++;continue}if(","===t)return;if(")"===t){r.push({type:")"});continue}if("+"===t){if(t7--,ne(n)){r.push(nr(n));continue}return}if("-"===t){if(t7--,ne(n)){r.push(nr(n));continue}if(nt(n)){r.push({type:t3,value:ni(n)});continue}return}if("."===t){if(t7--,ne(n)){r.push(nr(n));continue}return}if("/"===t){let e;for(;t7<n.length&&("\n"===n[t7]||"	"===n[t7]||" "===n[t7]);)t7++;if(ne(n)&&"hue"!==(e=nr(n)).type){r.push({type:t8,value:e});continue}if(nt(n)&&"none"===ni(n)){r.push({type:t8,value:{type:t9,value:void 0}});continue}return}if(/\d/.test(t)){t7--,r.push(nr(n));continue}if(t1.test(t)){t7--,r.push(function(e){let t=ni(e);return"("===e[t7]?(t7++,{type:t5,value:t}):"none"===t?{type:t9,value:void 0}:{type:t3,value:t}}(n));continue}return}return r}(e),r=n?function(e,t){e._i=0;let n=e[e._i++];if(!n||n.type!==t5)return;let r=na(e,t);if(r)return r.unshift(n.value),r}(n,!0):void 0,s=0,i=tZ.length;for(;s<i;)if(void 0!==(t=tZ[s++](e,r)))return t;return n?function(e){e._i=0;let t=e[e._i++];if(!t||t.type!==t5||"color"!==t.value||(t=e[e._i++]).type!==t3)return;let n=tY[t.value];if(!n)return;let r={mode:n},s=na(e,!1);if(!s)return;let i=tQ(n).channels;for(let e=0,t,n;e<i.length;e++)t=s[e],n=i[e],t.type!==t9&&(r[n]=t.type===t4?t.value:t.value/100,"alpha"===n&&(r[n]=Math.max(0,Math.min(1,r[n]))));return r}(n):void 0},nl=(t=(e,t,n)=>e+n*(t-e),e=>{let n=(e=>{let t=[];for(let n=0;n<e.length-1;n++){let r=e[n],s=e[n+1];void 0===r&&void 0===s?t.push(void 0):void 0!==r&&void 0!==s?t.push([r,s]):t.push(void 0!==r?[r,r]:[s,s])}return t})(e);return e=>{let r=e*n.length,s=e>=1?n.length-1:Math.max(Math.floor(r),0),i=n[s];return void 0===i?void 0:t(i[0],i[1],r-s)}}),nc=e=>{let t=!1,n=e.map(e=>void 0!==e?(t=!0,e):1);return t?n:e},nd={mode:"rgb",channels:["r","g","b","alpha"],parse:[function(e,t){if(!t||"rgb"!==t[0]&&"rgba"!==t[0])return;let n={mode:"rgb"},[,r,s,i,a]=t;if("hue"!==r.type&&"hue"!==s.type&&"hue"!==i.type)return r.type!==t9&&(n.r=r.type===t4?r.value/255:r.value/100),s.type!==t9&&(n.g=s.type===t4?s.value/255:s.value/100),i.type!==t9&&(n.b=i.type===t4?i.value/255:i.value/100),a.type!==t9&&(n.alpha=Math.min(1,Math.max(0,a.type===t4?a.value:a.value/100))),n},e=>{let t;return(t=e.match(tD))?tA(parseInt(t[1],16),t[1].length):void 0},e=>{let t,n={mode:"rgb"};if(t=e.match(tH))void 0!==t[1]&&(n.r=t[1]/255),void 0!==t[2]&&(n.g=t[2]/255),void 0!==t[3]&&(n.b=t[3]/255);else{if(!(t=e.match(tU)))return;void 0!==t[1]&&(n.r=t[1]/100),void 0!==t[2]&&(n.g=t[2]/100),void 0!==t[3]&&(n.b=t[3]/100)}return void 0!==t[4]?n.alpha=Math.max(0,Math.min(1,t[4]/100)):void 0!==t[5]&&(n.alpha=Math.max(0,Math.min(1,+t[5]))),n},e=>tA(tR[e.toLowerCase()],6),e=>"transparent"===e?{mode:"rgb",r:0,g:0,b:0,alpha:0}:void 0,"srgb"],serialize:"srgb",interpolate:{r:nl,g:nl,b:nl,alpha:{use:nl,fixup:nc}},gamut:!0,white:{r:1,g:1,b:1},black:{r:0,g:0,b:0}},nu=(e=0)=>Math.pow(Math.abs(e),563/256)*Math.sign(e),nh=e=>{let t=nu(e.r),n=nu(e.g),r=nu(e.b),s={mode:"xyz65",x:.5766690429101305*t+.1855582379065463*n+.1882286462349947*r,y:.297344975250536*t+.6273635662554661*n+.0752914584939979*r,z:.0270313613864123*t+.0706888525358272*n+.9913375368376386*r};return void 0!==e.alpha&&(s.alpha=e.alpha),s},np=e=>Math.pow(Math.abs(e),256/563)*Math.sign(e),nf=({x:e,y:t,z:n,alpha:r})=>{void 0===e&&(e=0),void 0===t&&(t=0),void 0===n&&(n=0);let s={mode:"a98",r:np(2.0415879038107465*e-.5650069742788597*t-.3447313507783297*n),g:np(-.9692436362808798*e+1.8759675015077206*t+.0415550574071756*n),b:np(.0134442806320312*e-.1183623922310184*t+1.0151749943912058*n)};return void 0!==r&&(s.alpha=r),s},nm=(e=0)=>{let t=Math.abs(e);return t<=.04045?e/12.92:(Math.sign(e)||1)*Math.pow((t+.055)/1.055,2.4)},ng=({r:e,g:t,b:n,alpha:r})=>{let s={mode:"lrgb",r:nm(e),g:nm(t),b:nm(n)};return void 0!==r&&(s.alpha=r),s},nx=e=>{let{r:t,g:n,b:r,alpha:s}=ng(e),i={mode:"xyz65",x:.4123907992659593*t+.357584339383878*n+.1804807884018343*r,y:.2126390058715102*t+.715168678767756*n+.0721923153607337*r,z:.0193308187155918*t+.119194779794626*n+.9505321522496607*r};return void 0!==s&&(i.alpha=s),i},nv=(e=0)=>{let t=Math.abs(e);return t>.0031308?(Math.sign(e)||1)*(1.055*Math.pow(t,1/2.4)-.055):12.92*e},nb=({r:e,g:t,b:n,alpha:r},s="rgb")=>{let i={mode:s,r:nv(e),g:nv(t),b:nv(n)};return void 0!==r&&(i.alpha=r),i},ny=({x:e,y:t,z:n,alpha:r})=>{void 0===e&&(e=0),void 0===t&&(t=0),void 0===n&&(n=0);let s=nb({r:3.2409699419045226*e-1.537383177570094*t-.4986107602930034*n,g:-.9692436362808796*e+1.8759675015077204*t+.0415550574071756*n,b:.0556300796969936*e-.2039769588889765*t+1.0569715142428784*n});return void 0!==r&&(s.alpha=r),s},nj={...nd,mode:"a98",parse:["a98-rgb"],serialize:"a98-rgb",fromMode:{rgb:e=>nf(nx(e)),xyz65:nf},toMode:{rgb:e=>ny(nh(e)),xyz65:nh}},nw=e=>(e%=360)<0?e+360:e,nk=e=>{let t;return t=e=>180>=Math.abs(e)?e:e-360*Math.sign(e),e.map((n,r,s)=>{if(void 0===n)return n;let i=nw(n);return 0===r||void 0===e[r-1]?i:t(i-nw(s[r-1]))}).reduce((e,t)=>(e.length&&void 0!==t&&void 0!==e[e.length-1]?e.push(t+e[e.length-1]):e.push(t),e),[])},nC=Math.PI/180,nS=180/Math.PI,nM=-1.78277*.29227-.1347134789,nN=(e,t)=>{if(void 0===e.h||void 0===t.h||!e.s||!t.s)return 0;let n=nw(e.h),r=Math.sin((nw(t.h)-n+360)/2*Math.PI/180);return 2*Math.sqrt(e.s*t.s)*r},nI=(e,t)=>{if(void 0===e.h||void 0===t.h||!e.c||!t.c)return 0;let n=nw(e.h),r=Math.sin((nw(t.h)-n+360)/2*Math.PI/180);return 2*Math.sqrt(e.c*t.c)*r},nT=e=>{let t=e.reduce((e,t)=>{if(void 0!==t){let n=t*Math.PI/180;e.sin+=Math.sin(n),e.cos+=Math.cos(n)}return e},{sin:0,cos:0}),n=180*Math.atan2(t.sin,t.cos)/Math.PI;return n<0?360+n:n},nE={mode:"cubehelix",channels:["h","s","l","alpha"],parse:["--cubehelix"],serialize:"--cubehelix",ranges:{h:[0,360],s:[0,4.614],l:[0,1]},fromMode:{rgb:({r:e,g:t,b:n,alpha:r})=>{void 0===e&&(e=0),void 0===t&&(t=0),void 0===n&&(n=0);let s=(nM*n+-1.7884503806*e-3.5172982438*t)/(nM+-1.7884503806-3.5172982438),i=n-s,a=-((1.97294*(t-s)- -.29227*i)/.90649),o={mode:"cubehelix",l:s,s:0===s||1===s?void 0:Math.sqrt(i*i+a*a)/(1.97294*s*(1-s))};return o.s&&(o.h=Math.atan2(a,i)*nS-120),void 0!==r&&(o.alpha=r),o}},toMode:{rgb:({h:e,s:t,l:n,alpha:r})=>{let s={mode:"rgb"};void 0===n&&(n=0);let i=void 0===t?0:t*n*(1-n),a=Math.cos(e=(void 0===e?0:e+120)*nC),o=Math.sin(e);return s.r=n+i*(-.14861*a+1.78277*o),s.g=n+i*(-.29227*a+-.90649*o),s.b=n+i*(1.97294*a+0*o),void 0!==r&&(s.alpha=r),s}},interpolate:{h:{use:nl,fixup:nk},s:nl,l:nl,alpha:{use:nl,fixup:nc}},difference:{h:nN},average:{h:nT}},nL=({l:e,a:t,b:n,alpha:r},s="lch")=>{void 0===t&&(t=0),void 0===n&&(n=0);let i=Math.sqrt(t*t+n*n),a={mode:s,l:e,c:i};return i&&(a.h=nw(180*Math.atan2(n,t)/Math.PI)),void 0!==r&&(a.alpha=r),a},n_=({l:e,c:t,h:n,alpha:r},s="lab")=>{void 0===n&&(n=0);let i={mode:s,l:e,a:t?t*Math.cos(n/180*Math.PI):0,b:t?t*Math.sin(n/180*Math.PI):0};return void 0!==r&&(i.alpha=r),i},nP={X:.3457/.3585,Y:1,Z:.8251046025104602},nA={X:.3127/.329,Y:1,Z:1.0890577507598784},nR=e=>Math.pow(e,3)>.008856451679035631?Math.pow(e,3):(116*e-16)/903.2962962962963,nD=({l:e,a:t,b:n,alpha:r})=>{void 0===e&&(e=0),void 0===t&&(t=0),void 0===n&&(n=0);let s=(e+16)/116,i=t/500+s,a=s-n/200,o={mode:"xyz65",x:nR(i)*nA.X,y:nR(s)*nA.Y,z:nR(a)*nA.Z};return void 0!==r&&(o.alpha=r),o},nF=e=>ny(nD(e)),nO=e=>e>.008856451679035631?Math.cbrt(e):(903.2962962962963*e+16)/116,n$=({x:e,y:t,z:n,alpha:r})=>{void 0===e&&(e=0),void 0===t&&(t=0),void 0===n&&(n=0);let s=nO(e/nA.X),i=nO(t/nA.Y),a={mode:"lab65",l:116*i-16,a:500*(s-i),b:200*(i-nO(n/nA.Z))};return void 0!==r&&(a.alpha=r),a},nV=e=>{let t=n$(nx(e));return e.r===e.b&&e.b===e.g&&(t.a=t.b=0),t},nz=26/180*Math.PI,nB=Math.cos(nz),nH=Math.sin(nz),nU=100/Math.log(1.39),nW=({l:e,c:t,h:n,alpha:r})=>{void 0===e&&(e=0),void 0===t&&(t=0),void 0===n&&(n=0);let s={mode:"lab65",l:(Math.exp(e/nU)-1)/.0039},i=(Math.exp(.0435*t*1)-1)/.075,a=i*Math.cos(n/180*Math.PI-nz),o=i*Math.sin(n/180*Math.PI-nz);return s.a=a*nB-o/.83*nH,s.b=a*nH+o/.83*nB,void 0!==r&&(s.alpha=r),s},nq=({l:e,a:t,b:n,alpha:r})=>{void 0===e&&(e=0),void 0===t&&(t=0),void 0===n&&(n=0);let s=t*nB+n*nH,i=.83*(n*nB-t*nH),a={mode:"dlch",l:nU/1*Math.log(1+.0039*e),c:Math.log(1+.075*Math.sqrt(s*s+i*i))/.0435};return a.c&&(a.h=nw((Math.atan2(i,s)+nz)/Math.PI*180)),void 0!==r&&(a.alpha=r),a},nG=e=>nW(nL(e,"dlch")),nX=e=>n_(nq(e),"dlab"),nZ=RegExp(`^hsla?\\(\\s*${tz}${tB}${tO}${tB}${tO}\\s*(?:,\\s*${t$}\\s*)?\\)$`),nY={mode:"hsl",toMode:{rgb:function({h:e,s:t,l:n,alpha:r}){let s;e=nw(void 0!==e?e:0),void 0===t&&(t=0),void 0===n&&(n=0);let i=n+t*(n<.5?n:1-n),a=i-(i-n)*2*Math.abs(e/60%2-1);switch(Math.floor(e/60)){case 0:s={r:i,g:a,b:2*n-i};break;case 1:s={r:a,g:i,b:2*n-i};break;case 2:s={r:2*n-i,g:i,b:a};break;case 3:s={r:2*n-i,g:a,b:i};break;case 4:s={r:a,g:2*n-i,b:i};break;case 5:s={r:i,g:2*n-i,b:a};break;default:s={r:2*n-i,g:2*n-i,b:2*n-i}}return s.mode="rgb",void 0!==r&&(s.alpha=r),s}},fromMode:{rgb:function({r:e,g:t,b:n,alpha:r}){void 0===e&&(e=0),void 0===t&&(t=0),void 0===n&&(n=0);let s=Math.max(e,t,n),i=Math.min(e,t,n),a={mode:"hsl",s:s===i?0:(s-i)/(1-Math.abs(s+i-1)),l:.5*(s+i)};return s-i!=0&&(a.h=(s===e?(t-n)/(s-i)+(t<n)*6:s===t?(n-e)/(s-i)+2:(e-t)/(s-i)+4)*60),void 0!==r&&(a.alpha=r),a}},channels:["h","s","l","alpha"],ranges:{h:[0,360]},gamut:"rgb",parse:[function(e,t){if(!t||"hsl"!==t[0]&&"hsla"!==t[0])return;let n={mode:"hsl"},[,r,s,i,a]=t;if(r.type!==t9){if(r.type===t6)return;n.h=r.value}if(s.type!==t9){if("hue"===s.type)return;n.s=s.value/100}if(i.type!==t9){if("hue"===i.type)return;n.l=i.value/100}return a.type!==t9&&(n.alpha=Math.min(1,Math.max(0,a.type===t4?a.value:a.value/100))),n},e=>{let t=e.match(nZ);if(!t)return;let n={mode:"hsl"};return void 0!==t[3]?n.h=+t[3]:void 0!==t[1]&&void 0!==t[2]&&(n.h=((e,t)=>{switch(t){case"deg":return+e;case"rad":return e/Math.PI*180;case"grad":return e/10*9;case"turn":return 360*e}})(t[1],t[2])),void 0!==t[4]&&(n.s=Math.min(Math.max(0,t[4]/100),1)),void 0!==t[5]&&(n.l=Math.min(Math.max(0,t[5]/100),1)),void 0!==t[6]?n.alpha=Math.max(0,Math.min(1,t[6]/100)):void 0!==t[7]&&(n.alpha=Math.max(0,Math.min(1,+t[7]))),n}],serialize:e=>`hsl(${void 0!==e.h?e.h:"none"} ${void 0!==e.s?100*e.s+"%":"none"} ${void 0!==e.l?100*e.l+"%":"none"}${e.alpha<1?` / ${e.alpha}`:""})`,interpolate:{h:{use:nl,fixup:nk},s:nl,l:nl,alpha:{use:nl,fixup:nc}},difference:{h:nN},average:{h:nT}};function nJ({h:e,s:t,v:n,alpha:r}){let s;e=nw(void 0!==e?e:0),void 0===t&&(t=0),void 0===n&&(n=0);let i=Math.abs(e/60%2-1);switch(Math.floor(e/60)){case 0:s={r:n,g:n*(1-t*i),b:n*(1-t)};break;case 1:s={r:n*(1-t*i),g:n,b:n*(1-t)};break;case 2:s={r:n*(1-t),g:n,b:n*(1-t*i)};break;case 3:s={r:n*(1-t),g:n*(1-t*i),b:n};break;case 4:s={r:n*(1-t*i),g:n*(1-t),b:n};break;case 5:s={r:n,g:n*(1-t),b:n*(1-t*i)};break;default:s={r:n*(1-t),g:n*(1-t),b:n*(1-t)}}return s.mode="rgb",void 0!==r&&(s.alpha=r),s}function nK({r:e,g:t,b:n,alpha:r}){void 0===e&&(e=0),void 0===t&&(t=0),void 0===n&&(n=0);let s=Math.max(e,t,n),i=Math.min(e,t,n),a={mode:"hsv",s:0===s?0:1-i/s,v:s};return s-i!=0&&(a.h=(s===e?(t-n)/(s-i)+(t<n)*6:s===t?(n-e)/(s-i)+2:(e-t)/(s-i)+4)*60),void 0!==r&&(a.alpha=r),a}let nQ={mode:"hsv",toMode:{rgb:nJ},parse:["--hsv"],serialize:"--hsv",fromMode:{rgb:nK},channels:["h","s","v","alpha"],ranges:{h:[0,360]},gamut:"rgb",interpolate:{h:{use:nl,fixup:nk},s:nl,v:nl,alpha:{use:nl,fixup:nc}},difference:{h:nN},average:{h:nT}};function n0(e){if(e<0)return 0;let t=Math.pow(e,.012683313515655966);return 1e4*Math.pow(Math.max(0,t-.8359375)/(18.8515625-18.6875*t),6.277394636015326)}function n1(e){if(e<0)return 0;let t=Math.pow(e/1e4,.1593017578125);return Math.pow((.8359375+18.8515625*t)/(1+18.6875*t),78.84375)}let n2=e=>Math.max(e/203,0),n5=({i:e,t,p:n,alpha:r})=>{void 0===e&&(e=0),void 0===t&&(t=0),void 0===n&&(n=0);let s=n0(e+.008609037037932761*t+.11102962500302593*n),i=n0(e-.00860903703793275*t-.11102962500302599*n),a=n0(e+.5600313357106791*t-.32062717498731885*n),o={mode:"xyz65",x:n2(2.070152218389422*s-1.3263473389671556*i+.2066510476294051*a),y:n2(.3647385209748074*s+.680566024947227*i-.0453045459220346*a),z:n2(-.049747207535812*s-.0492609666966138*i+1.1880659249923042*a)};return void 0!==r&&(o.alpha=r),o},n3=(e=0)=>Math.max(203*e,0),n4=({x:e,y:t,z:n,alpha:r})=>{let s=n3(e),i=n3(t),a=n3(n),o=n1(.3592832590121217*s+.6976051147779502*i-.0358915932320289*a),l=n1(-.1920808463704995*s+1.1004767970374323*i+.0753748658519118*a),c=n1(.0070797844607477*s+.0748396662186366*i+.8433265453898765*a),d={mode:"itp",i:.5*o+.5*l,t:1.61376953125*o-3.323486328125*l+1.709716796875*c,p:4.378173828125*o-4.24560546875*l-.132568359375*c};return void 0!==r&&(d.alpha=r),d},n6=e=>{if(e<0)return 0;let t=Math.pow(e/1e4,.1593017578125);return Math.pow((.8359375+18.8515625*t)/(1+18.6875*t),134.03437499999998)},n9=(e=0)=>Math.max(203*e,0),n8=({x:e,y:t,z:n,alpha:r})=>{e=n9(e),t=n9(t);let s=1.15*e-.15*(n=n9(n)),i=.66*t+.34*e,a=n6(.41478972*s+.579999*i+.014648*n),o=n6(-.20151*s+1.120649*i+.0531008*n),l=n6(-.0166008*s+.2648*i+.6684799*n),c=(a+o)/2,d={mode:"jab",j:.44*c/(1-.56*c)-16295499532821565e-27,a:3.524*a-4.066708*o+.542708*l,b:.199076*a+1.096799*o-1.295875*l};return void 0!==r&&(d.alpha=r),d},n7=e=>{if(e<0)return 0;let t=Math.pow(e,.007460772656268216);return 1e4*Math.pow((.8359375-t)/(18.6875*t-18.8515625),6.277394636015326)},re=({j:e,a:t,b:n,alpha:r})=>{void 0===e&&(e=0),void 0===t&&(t=0),void 0===n&&(n=0);let s=(e+16295499532821565e-27)/(.44+.56*(e+16295499532821565e-27)),i=n7(s+.13860504*t+.058047316*n),a=n7(s-.13860504*t-.058047316*n),o=n7(s-.096019242*t-.8118919*n),l={mode:"xyz65",x:(1.661373024652174*i-.914523081304348*a+.23136208173913045*o)/203,y:(-.3250758611844533*i+1.571847026732543*a-.21825383453227928*o)/203,z:(-.090982811*i-.31272829*a+1.5227666*o)/203};return void 0!==r&&(l.alpha=r),l},rt=e=>{let t=n8(nx(e));return e.r===e.b&&e.b===e.g&&(t.a=t.b=0),t},rn=e=>ny(re(e)),rr=({j:e,a:t,b:n,alpha:r})=>{void 0===t&&(t=0),void 0===n&&(n=0);let s=Math.sqrt(t*t+n*n),i={mode:"jch",j:e,c:s};return s&&(i.h=nw(180*Math.atan2(n,t)/Math.PI)),void 0!==r&&(i.alpha=r),i},rs=({j:e,c:t,h:n,alpha:r})=>{void 0===n&&(n=0);let s={mode:"jab",j:e,a:t?t*Math.cos(n/180*Math.PI):0,b:t?t*Math.sin(n/180*Math.PI):0};return void 0!==r&&(s.alpha=r),s},ri=e=>Math.pow(e,3)>.008856451679035631?Math.pow(e,3):(116*e-16)/903.2962962962963,ra=({l:e,a:t,b:n,alpha:r})=>{void 0===e&&(e=0),void 0===t&&(t=0),void 0===n&&(n=0);let s=(e+16)/116,i=t/500+s,a=s-n/200,o={mode:"xyz50",x:ri(i)*nP.X,y:ri(s)*nP.Y,z:ri(a)*nP.Z};return void 0!==r&&(o.alpha=r),o},ro=({x:e,y:t,z:n,alpha:r})=>{void 0===e&&(e=0),void 0===t&&(t=0),void 0===n&&(n=0);let s=nb({r:3.1341359569958707*e-1.6173863321612538*t-.4906619460083532*n,g:-.978795502912089*e+1.916254567259524*t+.03344273116131949*n,b:.07195537988411677*e-.2289768264158322*t+1.405386058324125*n});return void 0!==r&&(s.alpha=r),s},rl=e=>ro(ra(e)),rc=e=>{let{r:t,g:n,b:r,alpha:s}=ng(e),i={mode:"xyz50",x:.436065742824811*t+.3851514688337912*n+.14307845442264197*r,y:.22249319175623702*t+.7168870538238823*n+.06061979053616537*r,z:.013923904500943465*t+.09708128566574634*n+.7140993584005155*r};return void 0!==s&&(i.alpha=s),i},rd=e=>e>.008856451679035631?Math.cbrt(e):(903.2962962962963*e+16)/116,ru=({x:e,y:t,z:n,alpha:r})=>{void 0===e&&(e=0),void 0===t&&(t=0),void 0===n&&(n=0);let s=rd(e/nP.X),i=rd(t/nP.Y),a={mode:"lab",l:116*i-16,a:500*(s-i),b:200*(i-rd(n/nP.Z))};return void 0!==r&&(a.alpha=r),a},rh=e=>{let t=ru(rc(e));return e.r===e.b&&e.b===e.g&&(t.a=t.b=0),t},rp={mode:"lab",toMode:{xyz50:ra,rgb:rl},fromMode:{xyz50:ru,rgb:rh},channels:["l","a","b","alpha"],ranges:{l:[0,100],a:[-125,125],b:[-125,125]},parse:[function(e,t){if(!t||"lab"!==t[0])return;let n={mode:"lab"},[,r,s,i,a]=t;if("hue"!==r.type&&"hue"!==s.type&&"hue"!==i.type)return r.type!==t9&&(n.l=Math.min(Math.max(0,r.value),100)),s.type!==t9&&(n.a=s.type===t4?s.value:125*s.value/100),i.type!==t9&&(n.b=i.type===t4?i.value:125*i.value/100),a.type!==t9&&(n.alpha=Math.min(1,Math.max(0,a.type===t4?a.value:a.value/100))),n}],serialize:e=>`lab(${void 0!==e.l?e.l:"none"} ${void 0!==e.a?e.a:"none"} ${void 0!==e.b?e.b:"none"}${e.alpha<1?` / ${e.alpha}`:""})`,interpolate:{l:nl,a:nl,b:nl,alpha:{use:nl,fixup:nc}}},rf={...rp,mode:"lab65",parse:["--lab-d65"],serialize:"--lab-d65",toMode:{xyz65:nD,rgb:nF},fromMode:{xyz65:n$,rgb:nV},ranges:{l:[0,100],a:[-125,125],b:[-125,125]}},rm={mode:"lch",toMode:{lab:n_,rgb:e=>rl(n_(e))},fromMode:{rgb:e=>nL(rh(e)),lab:nL},channels:["l","c","h","alpha"],ranges:{l:[0,100],c:[0,150],h:[0,360]},parse:[function(e,t){if(!t||"lch"!==t[0])return;let n={mode:"lch"},[,r,s,i,a]=t;if(r.type!==t9){if("hue"===r.type)return;n.l=Math.min(Math.max(0,r.value),100)}if(s.type!==t9&&(n.c=Math.max(0,s.type===t4?s.value:150*s.value/100)),i.type!==t9){if(i.type===t6)return;n.h=i.value}return a.type!==t9&&(n.alpha=Math.min(1,Math.max(0,a.type===t4?a.value:a.value/100))),n}],serialize:e=>`lch(${void 0!==e.l?e.l:"none"} ${void 0!==e.c?e.c:"none"} ${void 0!==e.h?e.h:"none"}${e.alpha<1?` / ${e.alpha}`:""})`,interpolate:{h:{use:nl,fixup:nk},c:nl,l:nl,alpha:{use:nl,fixup:nc}},difference:{h:nI},average:{h:nT}},rg={...rm,mode:"lch65",parse:["--lch-d65"],serialize:"--lch-d65",toMode:{lab65:e=>n_(e,"lab65"),rgb:e=>nF(n_(e,"lab65"))},fromMode:{rgb:e=>nL(nV(e),"lch65"),lab65:e=>nL(e,"lch65")},ranges:{l:[0,100],c:[0,150],h:[0,360]}},rx=({l:e,u:t,v:n,alpha:r})=>{void 0===t&&(t=0),void 0===n&&(n=0);let s=Math.sqrt(t*t+n*n),i={mode:"lchuv",l:e,c:s};return s&&(i.h=nw(180*Math.atan2(n,t)/Math.PI)),void 0!==r&&(i.alpha=r),i},rv=({l:e,c:t,h:n,alpha:r})=>{void 0===n&&(n=0);let s={mode:"luv",l:e,u:t?t*Math.cos(n/180*Math.PI):0,v:t?t*Math.sin(n/180*Math.PI):0};return void 0!==r&&(s.alpha=r),s},rb=(e,t,n)=>4*e/(e+15*t+3*n),ry=(e,t,n)=>9*t/(e+15*t+3*n),rj=rb(nP.X,nP.Y,nP.Z),rw=ry(nP.X,nP.Y,nP.Z),rk=({x:e,y:t,z:n,alpha:r})=>{let s;void 0===e&&(e=0),void 0===t&&(t=0),void 0===n&&(n=0);let i=(s=t/nP.Y)<=.008856451679035631?903.2962962962963*s:116*Math.cbrt(s)-16,a=rb(e,t,n),o=ry(e,t,n);isFinite(a)&&isFinite(o)?(a=13*i*(a-rj),o=13*i*(o-rw)):i=a=o=0;let l={mode:"luv",l:i,u:a,v:o};return void 0!==r&&(l.alpha=r),l},rC=(n=nP.X,4*n/(n+15*nP.Y+3*nP.Z)),rS=(r=nP.X,9*(s=nP.Y)/(r+15*s+3*nP.Z)),rM=({l:e,u:t,v:n,alpha:r})=>{if(void 0===e&&(e=0),0===e)return{mode:"xyz50",x:0,y:0,z:0};void 0===t&&(t=0),void 0===n&&(n=0);let s=t/(13*e)+rC,i=n/(13*e)+rS,a=nP.Y*(e<=8?e/903.2962962962963:Math.pow((e+16)/116,3)),o={mode:"xyz50",x:9*s*a/(4*i),y:a,z:a*(12-3*s-20*i)/(4*i)};return void 0!==r&&(o.alpha=r),o},rN={...nd,mode:"lrgb",toMode:{rgb:nb},fromMode:{rgb:ng},parse:["srgb-linear"],serialize:"srgb-linear"},rI=({r:e,g:t,b:n,alpha:r})=>{void 0===e&&(e=0),void 0===t&&(t=0),void 0===n&&(n=0);let s=Math.cbrt(.412221469470763*e+.5363325372617348*t+.0514459932675022*n),i=Math.cbrt(.2119034958178252*e+.6806995506452344*t+.1073969535369406*n),a=Math.cbrt(.0883024591900564*e+.2817188391361215*t+.6299787016738222*n),o={mode:"oklab",l:.210454268309314*s+.7936177747023054*i-.0040720430116193*a,a:1.9779985324311684*s-2.42859224204858*i+.450593709617411*a,b:.0259040424655478*s+.7827717124575296*i-.8086757549230774*a};return void 0!==r&&(o.alpha=r),o},rT=e=>{let t=rI(ng(e));return e.r===e.b&&e.b===e.g&&(t.a=t.b=0),t},rE=({l:e,a:t,b:n,alpha:r})=>{void 0===e&&(e=0),void 0===t&&(t=0),void 0===n&&(n=0);let s=Math.pow(e+.3963377773761749*t+.2158037573099136*n,3),i=Math.pow(e-.1055613458156586*t-.0638541728258133*n,3),a=Math.pow(e-.0894841775298119*t-1.2914855480194092*n,3),o={mode:"lrgb",r:4.076741636075957*s-3.3077115392580616*i+.2309699031821044*a,g:-1.2684379732850317*s+2.6097573492876887*i-.3413193760026573*a,b:-.0041960761386756*s-.7034186179359362*i+1.7076146940746117*a};return void 0!==r&&(o.alpha=r),o},rL=e=>nb(rE(e));function r_(e){return .5*(1.206/1.03*e-.206+Math.sqrt((1.206/1.03*e-.206)*(1.206/1.03*e-.206)+1.206/1.03*.12*e))}function rP(e){return(e*e+.206*e)/(1.206/1.03*(e+.03))}function rA(e,t){let n,r,s,i,a,o,l,c,d,u,h,p,f,m,g,x,v,b=(-1.88170328*e-.80936493*t>1?(n=1.19086277,r=1.76576728,s=.59662641,i=.75515197,a=.56771245,o=4.0767416621,l=-3.3077115913,c=.2309699292):1.81444104*e-1.19445276*t>1?(n=.73956515,r=-.45954404,s=.08285427,i=.1254107,a=.14503204,o=-1.2684380046,l=2.6097574011,c=-.3413193965):(n=1.35733652,r=-.00915799,s=-1.1513021,i=-.50559606,a=.00692167,o=-.0041960863,l=-.7034186147,c=1.707614701),d=n+r*e+s*t+i*e*e+a*e*t,u=.3963377774*e+.2158037573*t,h=-.1055613458*e-.0638541728*t,p=-.0894841775*e-1.291485548*t,x=o*((f=1+d*u)*f*f)+l*((m=1+d*h)*m*m)+c*((g=1+d*p)*g*g),d-=x*(v=3*u*f*f*o+3*h*m*m*l+3*p*g*g*c)/(v*v-.5*x*(6*u*u*f*o+6*h*h*m*l+6*p*p*g*c))),y=rE({l:1,a:b*e,b:b*t}),j=Math.cbrt(1/Math.max(y.r,y.g,y.b));return[j,j*b]}function rR(e,t,n=null){n||(n=rA(e,t));let r=n[0],s=n[1];return[s/r,s/(1-r)]}function rD(e,t,n){let r=rA(t,n),s=function(e,t,n,r,s,i=null){let a;if(i||(i=rA(e,t)),(n-s)*i[1]-(i[0]-s)*1<=0)a=i[1]*s/(+i[0]+i[1]*(s-n));else{a=i[1]*(s-1)/(+(i[0]-1)+i[1]*(s-n));{let r=n-s,i=.3963377774*e+.2158037573*t,o=-.1055613458*e-.0638541728*t,l=-.0894841775*e-1.291485548*t,c=r+ +i,d=r+ +o,u=r+ +l;{let e=s*(1-a)+a*n,t=+a,r=e+t*i,h=e+t*o,p=e+t*l,f=r*r*r,m=h*h*h,g=p*p*p,x=3*c*r*r,v=3*d*h*h,b=3*u*p*p,y=6*c*c*r,j=6*d*d*h,w=6*u*u*p,k=4.0767416621*f-3.3077115913*m+.2309699292*g-1,C=4.0767416621*x-3.3077115913*v+.2309699292*b,S=C/(C*C-.5*k*(4.0767416621*y-3.3077115913*j+.2309699292*w)),M=-k*S,N=-1.2684380046*f+2.6097574011*m-.3413193965*g-1,I=-1.2684380046*x+2.6097574011*v-.3413193965*b,T=I/(I*I-.5*N*(-1.2684380046*y+2.6097574011*j-.3413193965*w)),E=-N*T,L=-.0041960863*f-.7034186147*m+1.707614701*g-1,_=-.0041960863*x-.7034186147*v+1.707614701*b,P=_/(_*_-.5*L*(-.0041960863*y-.7034186147*j+1.707614701*w)),A=-L*P;a+=Math.min(M=S>=0?M:1e6,Math.min(E=T>=0?E:1e6,A=P>=0?A:1e6))}}}return a}(t,n,e,0,e,r),i=rR(t,n,r),a=.11516993+1/(7.4477897+4.1590124*n+t*(-2.19557347+1.75198401*n+t*(-2.13704948-10.02301043*n+t*(-4.24894561+5.38770819*n+4.69891013*t)))),o=.11239642+1/(1.6132032-.68124379*n+t*(.40370612+.90148123*n+t*(-.27087943+.6122399*n+t*(.00299215-.45399568*n-.14661872*t)))),l=s/Math.min(e*i[0],(1-e)*i[1]),c=e*a,d=(1-e)*o,u=.9*l*Math.sqrt(Math.sqrt(1/(1/(c*c*c*c)+1/(d*d*d*d))));return[Math.sqrt(1/(1/((c=.4*e)*c)+1/((d=(1-e)*.8)*d))),u,s]}function rF(e){let t,n=void 0!==e.l?e.l:0,r=void 0!==e.a?e.a:0,s=void 0!==e.b?e.b:0,i={mode:"okhsl",l:r_(n)};void 0!==e.alpha&&(i.alpha=e.alpha);let a=Math.sqrt(r*r+s*s);if(!a)return i.s=0,i;let[o,l,c]=rD(n,r/a,s/a);if(a<l){let e=.8*o;t=(a-0)/(e+(1-e/l)*(a-0))*.8}else{let e=.2*l*l*1.5625/o;t=.8+.2*((a-l)/(e+(1-e/(c-l))*(a-l)))}return t&&(i.s=t,i.h=nw(180*Math.atan2(s,r)/Math.PI)),i}function rO(e){let t,n,r,s,i=void 0!==e.h?e.h:0,a=void 0!==e.s?e.s:0,o=void 0!==e.l?e.l:0,l={mode:"oklab",l:rP(o)};if(void 0!==e.alpha&&(l.alpha=e.alpha),!a||1===o)return l.a=l.b=0,l;let c=Math.cos(i/180*Math.PI),d=Math.sin(i/180*Math.PI),[u,h,p]=rD(l.l,c,d);a<.8?(t=1.25*a,n=0,s=1-(r=.8*u)/h):(t=5*(a-.8),n=h,s=1-(r=.2*h*h*1.5625/u)/(p-h));let f=n+t*r/(1-s*t);return l.a=f*c,l.b=f*d,l}let r$={...nY,mode:"okhsl",channels:["h","s","l","alpha"],parse:["--okhsl"],serialize:"--okhsl",fromMode:{oklab:rF,rgb:e=>rF(rT(e))},toMode:{oklab:rO,rgb:e=>rL(rO(e))}};function rV(e){let t=void 0!==e.l?e.l:0,n=void 0!==e.a?e.a:0,r=void 0!==e.b?e.b:0,s=Math.sqrt(n*n+r*r),i=s?n/s:1,a=s?r/s:1,[o,l]=rR(i,a),c=l/(s+t*l),d=c*t,u=c*s,h=rP(d),p=u*h/d,f=rE({l:h,a:i*p,b:a*p}),m=Math.cbrt(1/Math.max(f.r,f.g,f.b,0));t/=m;let g={mode:"okhsv",s:(s=s/m*r_(t)/t)?(.5+l)*u/(.5*l+l*(1-.5/o)*u):0,v:(t=r_(t))?t/d:0};return g.s&&(g.h=nw(180*Math.atan2(r,n)/Math.PI)),void 0!==e.alpha&&(g.alpha=e.alpha),g}function rz(e){let t={mode:"oklab"};void 0!==e.alpha&&(t.alpha=e.alpha);let n=void 0!==e.h?e.h:0,r=void 0!==e.s?e.s:0,s=void 0!==e.v?e.v:0,i=Math.cos(n/180*Math.PI),a=Math.sin(n/180*Math.PI),[o,l]=rR(i,a),c=1-.5/o,d=1-.5*r/(.5+l-l*c*r),u=r*l*.5/(.5+l-l*c*r),h=rP(d),p=u*h/d,f=rE({l:h,a:i*p,b:a*p}),m=Math.cbrt(1/Math.max(f.r,f.g,f.b,0)),g=rP(s*d),x=u*g/d;return t.l=g*m,t.a=x*i*m,t.b=x*a*m,t}let rB={...nQ,mode:"okhsv",channels:["h","s","v","alpha"],parse:["--okhsv"],serialize:"--okhsv",fromMode:{oklab:rV,rgb:e=>rV(rT(e))},toMode:{oklab:rz,rgb:e=>rL(rz(e))}},rH={...rp,mode:"oklab",toMode:{lrgb:rE,rgb:rL},fromMode:{lrgb:rI,rgb:rT},ranges:{l:[0,1],a:[-.4,.4],b:[-.4,.4]},parse:[function(e,t){if(!t||"oklab"!==t[0])return;let n={mode:"oklab"},[,r,s,i,a]=t;if("hue"!==r.type&&"hue"!==s.type&&"hue"!==i.type)return r.type!==t9&&(n.l=Math.min(Math.max(0,r.type===t4?r.value:r.value/100),1)),s.type!==t9&&(n.a=s.type===t4?s.value:.4*s.value/100),i.type!==t9&&(n.b=i.type===t4?i.value:.4*i.value/100),a.type!==t9&&(n.alpha=Math.min(1,Math.max(0,a.type===t4?a.value:a.value/100))),n}],serialize:e=>`oklab(${void 0!==e.l?e.l:"none"} ${void 0!==e.a?e.a:"none"} ${void 0!==e.b?e.b:"none"}${e.alpha<1?` / ${e.alpha}`:""})`},rU={...rm,mode:"oklch",toMode:{oklab:e=>n_(e,"oklab"),rgb:e=>rL(n_(e,"oklab"))},fromMode:{rgb:e=>nL(rT(e),"oklch"),oklab:e=>nL(e,"oklch")},parse:[function(e,t){if(!t||"oklch"!==t[0])return;let n={mode:"oklch"},[,r,s,i,a]=t;if(r.type!==t9){if("hue"===r.type)return;n.l=Math.min(Math.max(0,r.type===t4?r.value:r.value/100),1)}if(s.type!==t9&&(n.c=Math.max(0,s.type===t4?s.value:.4*s.value/100)),i.type!==t9){if(i.type===t6)return;n.h=i.value}return a.type!==t9&&(n.alpha=Math.min(1,Math.max(0,a.type===t4?a.value:a.value/100))),n}],serialize:e=>`oklch(${void 0!==e.l?e.l:"none"} ${void 0!==e.c?e.c:"none"} ${void 0!==e.h?e.h:"none"}${e.alpha<1?` / ${e.alpha}`:""})`,ranges:{l:[0,1],c:[0,.4],h:[0,360]}},rW=e=>{let{r:t,g:n,b:r,alpha:s}=ng(e),i={mode:"xyz65",x:.486570948648216*t+.265667693169093*n+.1982172852343625*r,y:.2289745640697487*t+.6917385218365062*n+.079286914093745*r,z:0*t+.0451133818589026*n+1.043944368900976*r};return void 0!==s&&(i.alpha=s),i},rq=({x:e,y:t,z:n,alpha:r})=>{void 0===e&&(e=0),void 0===t&&(t=0),void 0===n&&(n=0);let s=nb({r:2.4934969119414263*e-.9313836179191242*t-.402710784450717*n,g:-.8294889695615749*e+1.7626640603183465*t+.0236246858419436*n,b:.0358458302437845*e-.0761723892680418*t+.9568845240076871*n},"p3");return void 0!==r&&(s.alpha=r),s},rG={...nd,mode:"p3",parse:["display-p3"],serialize:"display-p3",fromMode:{rgb:e=>rq(nx(e)),xyz65:rq},toMode:{rgb:e=>ny(rW(e)),xyz65:rW}},rX=e=>{let t=Math.abs(e);return t>=1/512?Math.sign(e)*Math.pow(t,1/1.8):16*e},rZ=({x:e,y:t,z:n,alpha:r})=>{void 0===e&&(e=0),void 0===t&&(t=0),void 0===n&&(n=0);let s={mode:"prophoto",r:rX(1.3457868816471585*e-.2555720873797946*t-.0511018649755453*n),g:rX(-.5446307051249019*e+1.5082477428451466*t+.0205274474364214*n),b:rX(0*e+0*t+1.2119675456389452*n)};return void 0!==r&&(s.alpha=r),s},rY=(e=0)=>{let t=Math.abs(e);return t>=16/512?Math.sign(e)*Math.pow(t,1.8):e/16},rJ=e=>{let t=rY(e.r),n=rY(e.g),r=rY(e.b),s={mode:"xyz50",x:.7977666449006423*t+.1351812974005331*n+.0313477341283922*r,y:.2880748288194013*t+.7118352342418731*n+899369387256e-16*r,z:0*t+0*n+.8251046025104602*r};return void 0!==e.alpha&&(s.alpha=e.alpha),s},rK={...nd,mode:"prophoto",parse:["prophoto-rgb"],serialize:"prophoto-rgb",fromMode:{xyz50:rZ,rgb:e=>rZ(rc(e))},toMode:{xyz50:rJ,rgb:e=>ro(rJ(e))}},rQ=e=>{let t=Math.abs(e);return t>.018053968510807?(Math.sign(e)||1)*(1.09929682680944*Math.pow(t,.45)-(1.09929682680944-1)):4.5*e},r0=({x:e,y:t,z:n,alpha:r})=>{void 0===e&&(e=0),void 0===t&&(t=0),void 0===n&&(n=0);let s={mode:"rec2020",r:rQ(1.7166511879712683*e-.3556707837763925*t-.2533662813736599*n),g:rQ(-.6666843518324893*e+1.6164812366349395*t+.0157685458139111*n),b:rQ(.0176398574453108*e-.0427706132578085*t+.9421031212354739*n)};return void 0!==r&&(s.alpha=r),s},r1=(e=0)=>{let t=Math.abs(e);return t<.08124285829863151?e/4.5:(Math.sign(e)||1)*Math.pow((t+1.09929682680944-1)/1.09929682680944,1/.45)},r2=e=>{let t=r1(e.r),n=r1(e.g),r=r1(e.b),s={mode:"xyz65",x:.6369580483012911*t+.1446169035862083*n+.1688809751641721*r,y:.262700212011267*t+.6779980715188708*n+.059301716469862*r,z:0*t+.0280726930490874*n+1.0609850577107909*r};return void 0!==e.alpha&&(s.alpha=e.alpha),s},r5={...nd,mode:"rec2020",fromMode:{xyz65:r0,rgb:e=>r0(nx(e))},toMode:{xyz65:r2,rgb:e=>ny(r2(e))},parse:["rec2020"],serialize:"rec2020"},r3=Math.cbrt(.0037930732552754493),r4=e=>Math.cbrt(e)-r3,r6=e=>Math.pow(e+r3,3),r9={mode:"xyb",channels:["x","y","b","alpha"],parse:["--xyb"],serialize:"--xyb",toMode:{rgb:({x:e,y:t,b:n,alpha:r})=>{void 0===e&&(e=0),void 0===t&&(t=0),void 0===n&&(n=0);let s=r6(e+t)-.0037930732552754493,i=r6(t-e)-.0037930732552754493,a=r6(n+t)-.0037930732552754493,o=nb({r:11.031566904639861*s-9.866943908131562*i-.16462299650829934*a,g:-3.2541473810744237*s+4.418770377582723*i-.16462299650829934*a,b:-3.6588512867136815*s+2.7129230459360922*i+1.9459282407775895*a});return void 0!==r&&(o.alpha=r),o}},fromMode:{rgb:e=>{let{r:t,g:n,b:r,alpha:s}=ng(e),i=r4(.3*t+.622*n+.078*r+.0037930732552754493),a=r4(.23*t+.692*n+.078*r+.0037930732552754493),o={mode:"xyb",x:(i-a)/2,y:(i+a)/2,b:r4(.2434226892454782*t+.2047674442449682*n+.5518098665095535*r+.0037930732552754493)-(i+a)/2};return void 0!==s&&(o.alpha=s),o}},ranges:{x:[-.0154,.0281],y:[0,.8453],b:[-.2778,.388]},interpolate:{x:nl,y:nl,b:nl,alpha:{use:nl,fixup:nc}}},r8={mode:"yiq",toMode:{rgb:({y:e,i:t,q:n,alpha:r})=>{void 0===e&&(e=0),void 0===t&&(t=0),void 0===n&&(n=0);let s={mode:"rgb",r:e+.95608445*t+.6208885*n,g:e-.27137664*t-.6486059*n,b:e-1.10561724*t+1.70250126*n};return void 0!==r&&(s.alpha=r),s}},fromMode:{rgb:({r:e,g:t,b:n,alpha:r})=>{void 0===e&&(e=0),void 0===t&&(t=0),void 0===n&&(n=0);let s={mode:"yiq",y:.29889531*e+.58662247*t+.11448223*n,i:.59597799*e-.2741761*t-.32180189*n,q:.21147017*e-.52261711*t+.31114694*n};return void 0!==r&&(s.alpha=r),s}},channels:["y","i","q","alpha"],parse:["--yiq"],serialize:"--yiq",ranges:{i:[-.595,.595],q:[-.522,.522]},interpolate:{y:nl,i:nl,q:nl,alpha:{use:nl,fixup:nc}}};tK(nj),tK(nE),tK({mode:"dlab",parse:["--din99o-lab"],serialize:"--din99o-lab",toMode:{lab65:nG,rgb:e=>nF(nG(e))},fromMode:{lab65:nX,rgb:e=>nX(nV(e))},channels:["l","a","b","alpha"],ranges:{l:[0,100],a:[-40.09,45.501],b:[-40.469,44.344]},interpolate:{l:nl,a:nl,b:nl,alpha:{use:nl,fixup:nc}}}),tK({mode:"dlch",parse:["--din99o-lch"],serialize:"--din99o-lch",toMode:{lab65:nW,dlab:e=>n_(e,"dlab"),rgb:e=>nF(nW(e))},fromMode:{lab65:nq,dlab:e=>nL(e,"dlch"),rgb:e=>nq(nV(e))},channels:["l","c","h","alpha"],ranges:{l:[0,100],c:[0,51.484],h:[0,360]},interpolate:{l:nl,c:nl,h:{use:nl,fixup:nk},alpha:{use:nl,fixup:nc}},difference:{h:nI},average:{h:nT}}),tK({mode:"hsi",toMode:{rgb:function({h:e,s:t,i:n,alpha:r}){let s;e=nw(void 0!==e?e:0),void 0===t&&(t=0),void 0===n&&(n=0);let i=Math.abs(e/60%2-1);switch(Math.floor(e/60)){case 0:s={r:n*(1+t*(3/(2-i)-1)),g:n*(1+t*(3*(1-i)/(2-i)-1)),b:n*(1-t)};break;case 1:s={r:n*(1+t*(3*(1-i)/(2-i)-1)),g:n*(1+t*(3/(2-i)-1)),b:n*(1-t)};break;case 2:s={r:n*(1-t),g:n*(1+t*(3/(2-i)-1)),b:n*(1+t*(3*(1-i)/(2-i)-1))};break;case 3:s={r:n*(1-t),g:n*(1+t*(3*(1-i)/(2-i)-1)),b:n*(1+t*(3/(2-i)-1))};break;case 4:s={r:n*(1+t*(3*(1-i)/(2-i)-1)),g:n*(1-t),b:n*(1+t*(3/(2-i)-1))};break;case 5:s={r:n*(1+t*(3/(2-i)-1)),g:n*(1-t),b:n*(1+t*(3*(1-i)/(2-i)-1))};break;default:s={r:n*(1-t),g:n*(1-t),b:n*(1-t)}}return s.mode="rgb",void 0!==r&&(s.alpha=r),s}},parse:["--hsi"],serialize:"--hsi",fromMode:{rgb:function({r:e,g:t,b:n,alpha:r}){void 0===e&&(e=0),void 0===t&&(t=0),void 0===n&&(n=0);let s=Math.max(e,t,n),i=Math.min(e,t,n),a={mode:"hsi",s:e+t+n===0?0:1-3*i/(e+t+n),i:(e+t+n)/3};return s-i!=0&&(a.h=(s===e?(t-n)/(s-i)+(t<n)*6:s===t?(n-e)/(s-i)+2:(e-t)/(s-i)+4)*60),void 0!==r&&(a.alpha=r),a}},channels:["h","s","i","alpha"],ranges:{h:[0,360]},gamut:"rgb",interpolate:{h:{use:nl,fixup:nk},s:nl,i:nl,alpha:{use:nl,fixup:nc}},difference:{h:nN},average:{h:nT}});let r7=tK(nY),se=tK(nQ);tK({mode:"hwb",toMode:{rgb:function({h:e,w:t,b:n,alpha:r}){if(void 0===t&&(t=0),void 0===n&&(n=0),t+n>1){let e=t+n;t/=e,n/=e}return nJ({h:e,s:1===n?1:1-t/(1-n),v:1-n,alpha:r})}},fromMode:{rgb:function(e){let t=nK(e);if(void 0===t)return;let n=void 0!==t.s?t.s:0,r=void 0!==t.v?t.v:0,s={mode:"hwb",w:(1-n)*r,b:1-r};return void 0!==t.h&&(s.h=t.h),void 0!==t.alpha&&(s.alpha=t.alpha),s}},channels:["h","w","b","alpha"],ranges:{h:[0,360]},gamut:"rgb",parse:[function(e,t){if(!t||"hwb"!==t[0])return;let n={mode:"hwb"},[,r,s,i,a]=t;if(r.type!==t9){if(r.type===t6)return;n.h=r.value}if(s.type!==t9){if("hue"===s.type)return;n.w=s.value/100}if(i.type!==t9){if("hue"===i.type)return;n.b=i.value/100}return a.type!==t9&&(n.alpha=Math.min(1,Math.max(0,a.type===t4?a.value:a.value/100))),n}],serialize:e=>`hwb(${void 0!==e.h?e.h:"none"} ${void 0!==e.w?100*e.w+"%":"none"} ${void 0!==e.b?100*e.b+"%":"none"}${e.alpha<1?` / ${e.alpha}`:""})`,interpolate:{h:{use:nl,fixup:nk},w:nl,b:nl,alpha:{use:nl,fixup:nc}},difference:{h:(e,t)=>{if(void 0===e.h||void 0===t.h)return 0;let n=nw(e.h),r=nw(t.h);return Math.abs(r-n)>180?n-(r-360*Math.sign(r-n)):r-n}},average:{h:nT}}),tK({mode:"itp",channels:["i","t","p","alpha"],parse:["--ictcp"],serialize:"--ictcp",toMode:{xyz65:n5,rgb:e=>ny(n5(e))},fromMode:{xyz65:n4,rgb:e=>n4(nx(e))},ranges:{i:[0,.581],t:[-.369,.272],p:[-.164,.331]},interpolate:{i:nl,t:nl,p:nl,alpha:{use:nl,fixup:nc}}}),tK({mode:"jab",channels:["j","a","b","alpha"],parse:["--jzazbz"],serialize:"--jzazbz",fromMode:{rgb:rt,xyz65:n8},toMode:{rgb:rn,xyz65:re},ranges:{j:[0,.222],a:[-.109,.129],b:[-.185,.134]},interpolate:{j:nl,a:nl,b:nl,alpha:{use:nl,fixup:nc}}}),tK({mode:"jch",parse:["--jzczhz"],serialize:"--jzczhz",toMode:{jab:rs,rgb:e=>rn(rs(e))},fromMode:{rgb:e=>rr(rt(e)),jab:rr},channels:["j","c","h","alpha"],ranges:{j:[0,.221],c:[0,.19],h:[0,360]},interpolate:{h:{use:nl,fixup:nk},c:nl,j:nl,alpha:{use:nl,fixup:nc}},difference:{h:nI},average:{h:nT}}),tK(rp),tK(rf),tK(rm),tK(rg),tK({mode:"lchuv",toMode:{luv:rv,rgb:e=>ro(rM(rv(e)))},fromMode:{rgb:e=>rx(rk(rc(e))),luv:rx},channels:["l","c","h","alpha"],parse:["--lchuv"],serialize:"--lchuv",ranges:{l:[0,100],c:[0,176.956],h:[0,360]},interpolate:{h:{use:nl,fixup:nk},c:nl,l:nl,alpha:{use:nl,fixup:nc}},difference:{h:nI},average:{h:nT}}),tK(rN),tK({mode:"luv",toMode:{xyz50:rM,rgb:e=>ro(rM(e))},fromMode:{xyz50:rk,rgb:e=>rk(rc(e))},channels:["l","u","v","alpha"],parse:["--luv"],serialize:"--luv",ranges:{l:[0,100],u:[-84.936,175.042],v:[-125.882,87.243]},interpolate:{l:nl,u:nl,v:nl,alpha:{use:nl,fixup:nc}}}),tK(r$),tK(rB),tK(rH),tK(rU),tK(rG),tK(rK),tK(r5),tK(nd),tK(r9),tK({mode:"xyz50",parse:["xyz-d50"],serialize:"xyz-d50",toMode:{rgb:ro,lab:ru},fromMode:{rgb:rc,lab:ra},channels:["x","y","z","alpha"],ranges:{x:[0,.964],y:[0,.999],z:[0,.825]},interpolate:{x:nl,y:nl,z:nl,alpha:{use:nl,fixup:nc}}}),tK({mode:"xyz65",toMode:{rgb:ny,xyz50:e=>{let{x:t,y:n,z:r,alpha:s}=e;void 0===t&&(t=0),void 0===n&&(n=0),void 0===r&&(r=0);let i={mode:"xyz50",x:1.0479298208405488*t+.0229467933410191*n-.0501922295431356*r,y:.0296278156881593*t+.990434484573249*n-.0170738250293851*r,z:-.0092430581525912*t+.0150551448965779*n+.7518742899580008*r};return void 0!==s&&(i.alpha=s),i}},fromMode:{rgb:nx,xyz50:e=>{let{x:t,y:n,z:r,alpha:s}=e;void 0===t&&(t=0),void 0===n&&(n=0),void 0===r&&(r=0);let i={mode:"xyz65",x:.9554734527042182*t-.0230985368742614*n+.0632593086610217*r,y:-.0283697069632081*t+1.0099954580058226*n+.021041398966943*r,z:.0123140016883199*t-.0205076964334779*n+1.3303659366080753*r};return void 0!==s&&(i.alpha=s),i}},ranges:{x:[0,.95],y:[0,1],z:[0,1.088]},channels:["x","y","z","alpha"],parse:["xyz","xyz-d65"],serialize:"xyz-d65",interpolate:{x:nl,y:nl,z:nl,alpha:{use:nl,fixup:nc}}}),tK(r8),((e=4)=>t=>{let n;return"number"==typeof t?Math.round(t*(n=Math.pow(10,n=e)))/n:t})(2);let st=e=>Math.round(255*Math.max(0,Math.min(1,e||0))),sn=tq("rgb");tq("hsl");let sr=e=>(e=>{if(void 0!==e)return"#"+(0x1000000|st(e.r)<<16|st(e.g)<<8|st(e.b)).toString(16).slice(1)})(sn(e));var ss=e.i(614346);let si=new Set(["jpg","jpeg","png","gif","webp","bmp","tif","tiff","apng","avif","heic","jxl","bpg","flif","icns","jxr","psd","xcf","cr2","cr3","dng","nef","orf","raf","rw2","arw","j2c","jp2","jpm","jpx","jls","mj2","ktx"]);function sa(){return Array.from(ss.supportedExtensions).filter(e=>si.has(e))}let so=(i=sa().join("|"),[RegExp(`src\\s*=\\s*"([^"]*\\.(${i})[^"]*)"`,"i"),RegExp(`src\\s*=\\s*'([^']*\\.(${i})[^']*)'`,"i"),RegExp(`src\\s*=\\s*\\{\\s*["']([^"']*\\.(${i})[^"']*)["']\\s*\\}`,"i"),RegExp(`src\\s*=\\s*\\{\\s*([^}]*\\.(${i})[^}]*)\\s*\\}`,"i"),RegExp(`src\\s*=[\\s\\S]*?["']([^"']*\\.(${i})[^"']*)["']`,"i"),/src\s*=\s*"([^"]*placeholder[^"]*)"/i,/src\s*=\s*'([^']*placeholder[^"]*)'/i,/src\s*=\s*\{\s*["']([^"']*placeholder[^"']*)["']\s*\}/i]),sl=[/src\s*=\s*"([^"]*\.svg[^"]*)"/i,/src\s*=\s*'([^']*\.svg[^']*)'/i,/src\s*=\s*\{\s*`([^`]*\.svg[^`]*)`\s*\}/i,/src\s*=\s*\{\s*["']([^"']*\.svg[^"']*)["']\s*\}/i,/src\s*=\s*\{\s*([^}]*\.svg[^}]*)\s*\}/i,/src\s*=[\s\S]*?["']([^"']*\.svg[^"']*)["']/i];function sc(e){return e.startsWith("motion.")}function sd(e){let t=e.toString(16);return 1===t.length?"0"+t:t}function su(e){if(!e)return[];let t=e9.indexOf(e);return -1===t?e9:e9.slice(t)}function sh(e){return 1===e.a?`rgb(${e.r}, ${e.g}, ${e.b})`:`rgba(${e.r}, ${e.g}, ${e.b}, ${e.a.toFixed(2)})`}function sp(e){return!(!e||e.startsWith("http://")||e.startsWith("https://")||e.startsWith("data:")||e.startsWith("//"))}function sf(e,t,n,r){if(t<0||t+n>e.length)throw Error("Index or length out of bounds");return e.slice(0,t)+r+e.slice(t+n)}function sm(e,t){if(!e.parts)return!1;if(e.lib?.props?.src){let t=Array.isArray(e.lib.props.src)?e.lib.props.src[0]||null:e.lib.props.src;if(t&&t.toLowerCase().includes(".svg"))return!0}if(e.content?.value)for(let t of sl)try{if(t.test(e.content.value))return!0}catch(e){continue}if(t&&e.file&&e.start&&e.end){let n=t(e.file);if(n){let t=Math.max(0,e.start-500),r=Math.min(n.length,e.end+500),s=n.slice(t,r);for(let e of sl)try{if(e.test(s))return!0}catch(e){continue}}}return!1}function sg(e){return!!e&&e.includes("placeholder-")}function sx(e,t,n){let r=0,s=t,i=!1,a=e=>["img","Image","input","br","hr","meta","link"].includes(e),o=/<(\w+(?:\.\w+)?)[^>]*>/g,l=/<\/(\w+(?:\.\w+)?)>/g;for(;s<n.length;){let c=n.indexOf("/>",s),d=n.indexOf("<",s),u=n.indexOf("</",s),h=-1,p=null,f=[{pos:c,type:"self"},{pos:d,type:"open"},{pos:u,type:"close"}].filter(e=>-1!==e.pos);if(0===f.length)break;let m=f.reduce((e,t)=>t.pos<e.pos?t:e);if(h=m.pos,"self"===(p=m.type)){let r=n.lastIndexOf("<",h),a=n.slice(r,h+2).match(/<(\w+(?:\.\w+)?)[^>]*\/>/);if(a&&a[1]){let r=a[1];if(!i&&r===e)return{content:n.slice(t,h+2),end:h+2}}s=h+2}else if("close"===p){l.lastIndex=h;let i=l.exec(n);if(i&&i[1]&&0==--r&&i[1]===e){let e=l.lastIndex;return{content:n.slice(t,e),end:e}}s=l.lastIndex||h+1}else if("open"===p){o.lastIndex=h;let t=o.exec(n);if(t&&t[1]){let n=t[1];i||n!==e?i&&!a(n)&&r++:(i=!0,r=1)}s=o.lastIndex||h+1}s<=h&&(s=h+1)}return{content:n.slice(t,n.length),end:n.length}}function sv(e,t){if(!e.parts)return!1;if("img"===e.name||"Image"===e.name||"AvatarImage"===e.name||"motion.img"===e.name)return!sm(e,t);if(("Avatar"===e.name||"AvatarImage"===e.name)&&e.lib?.source==="@/components/ui/avatar")return!0;if("img"===e.name&&function(e,t){if(!e.parts)return!1;if(t&&e.file&&e.start&&e.end){let n=t(e.file);if(n){let t=Math.max(0,e.start-200),r=Math.min(n.length,e.end+200),s=n.slice(t,r);return/<Avatar[^>]*>[\s\S]*<img[\s\S]*>[\s\S]*<\/Avatar>/i.test(s)||/<Avatar[^>]*>[\s\S]*<AvatarImage[\s\S]*>[\s\S]*<\/Avatar>/i.test(s)}}return!1}(e,t)||e.lib?.source==="next/image"||e.lib?.name==="Image")return!sm(e,t);if(sc(e.name)&&t&&e.file&&e.start&&e.end){let n=t(e.file);if(n){let t=n.slice(e.start,e.end);if([/<img\s+/i,/<Image\s+/i,/<motion\.img\s+/i,/<AvatarImage\s+/i].some(e=>e.test(t)))return!sl.some(e=>e.test(t))}}let n=e=>{if((/<Image\b/i.test(e)||/<img\b/i.test(e))&&sl.some(t=>t.test(e)))return!1;let t=sa().join("|");return[/<Image\b/i,/<img\b/i,RegExp(`src\\s*=\\s*["'][^"']*\\.(${t})`,"i"),/alt\s*=\s*["'][^"']*"/i].some(t=>t.test(e))};if(e.content?.value&&n(e.content.value))return!0;for(let t=0;t<e.parts.length;t++)if(n(e.parts[t].value))return!0;if("div"===e.name||"span"===e.name||"figure"===e.name){let t=[e.content?.value||"",...e.parts.map(e=>e.value)].join(" ");if(n(t)||[/className\s*=\s*["'][^"']*image[^"']*["']/i,/className\s*=\s*["'][^"']*img[^"']*["']/i,/object-cover|object-contain|object-fill/i].some(e=>e.test(t)))return!0}if(t&&e.file&&e.start&&e.end){let n=t(e.file);if(n){let t=Math.max(0,e.start-500),r=Math.min(n.length,e.end+500),s=n.slice(t,r);if((/<Image\s+/i.test(s)||/<img\s+/i.test(s))&&sl.some(e=>e.test(s)))return!1;let i=sa().join("|");if([/<Image\s+/i,/<img\s+/i,RegExp(`src\\s*=\\s*["'][^"']*\\.(${i})`,"i"),/alt\s*=\s*["'][^"']*"/i,/fill\s*=\s*\{?true\}?/i,/priority\s*=\s*\{?true\}?/i,/width\s*=\s*\{?\d+\}?/i,/height\s*=\s*\{?\d+\}?/i].some(e=>e.test(s)))return!0}}return!1}var sb=e.i(471964);function sy({tokens:e,open:t,onPointerEnter:n,onSelect:r}){return(0,a.jsxs)(ty.Command,{className:"rounded-none",children:[(0,a.jsx)(ty.CommandInput,{placeholder:"Search for a color...",divClassName:"px-2 pb-1 gap-2 border-none [&>span]:size-3",className:"h-7 py-0 text-sm",iconSize:12}),(0,a.jsxs)(ty.CommandList,{className:"rounded-none",children:[(0,a.jsx)(ty.CommandEmpty,{children:(0,a.jsx)("span",{className:"text-v0-gray-900",children:"No color found."})}),(0,a.jsx)(ty.CommandGroup,{className:"p-0",children:t?e.map(e=>(0,a.jsxs)(ty.CommandItem,{value:e.label,onPointerEnter:()=>n(e),onSelect:t=>r(t,e),className:"gap-2 py-1",children:[e.value?(0,a.jsx)("span",{className:"block size-3 rounded-sm border border-v0-gray-300",style:{background:e.value}}):(0,a.jsx)("div",{children:(0,a.jsx)(tP.AlphaSquare,{className:"size-3"})}),e.label]},e.label)):null})]})]})}function sj({title:e,displayedColorName:t,colorTokens:n,onColorChange:r,onTokensChange:s,onPointerEnter:i,onPointerLeave:o,updateColorNameTextContent:c,clearRevertPreview:d,parsedColor:u,alphaEnabled:h,isLoading:p,nameInInput:f}){let m=(0,l.useRef)(null),g=(0,l.useRef)(null),[x,v]=(0,l.useState)(!1),b=(0,l.useRef)(null),y=(0,tN.useDebounceCallback)(r,100,{maxWait:150}),j=(0,tN.useDebounceCallback)(s,50),w=()=>{b.current=null,m.current?.style.removeProperty("background"),y(null)},k=(e,t)=>{d(),"Default"===e?w():(m.current?.style.setProperty("background",t.value),void 0===f&&c(g,e),j(e)),v(!1)},C=(0,l.useMemo)(()=>{if(u){let e=tW(u);if(!e)return;let t=tQ(e.mode);if(!t.serialize||"string"==typeof t.serialize){let n=`color(${t.serialize||`--${e.mode}`} `;return t.channels.forEach((t,r)=>{"alpha"!==t&&(n+=(r?" ":"")+(void 0!==e[t]?e[t]:"none"))}),void 0!==e.alpha&&e.alpha<1&&(n+=` / ${e.alpha}`),n+")"}return"function"==typeof t.serialize?t.serialize(e):void 0}return"color(srgb 1 1 1)"},[u]),{tailwindTokens:S,shadcnTokens:M}=(0,l.useMemo)(()=>{let e=[],t=[],r=new Set([...Object.keys(sb.initialStyles.common),...Object.keys(sb.initialStyles.light),...Object.keys(sb.initialStyles.dark)]);for(let s of n)r.has(s.label)?t.push(s):e.push(s);return{tailwindTokens:e,shadcnTokens:t}},[n]),N=S.length>0,I=M.length>0,T=N||I;return p?(0,a.jsx)("div",{title:e,className:"flex w-full min-w-0",children:(0,a.jsx)("div",{className:"w-full",children:(0,a.jsxs)(A.Button,{variant:"secondary",size:"sm",className:"w-full justify-between rounded-md px-2 font-normal",disabled:!0,children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("div",{className:"block size-4 shrink-0 rounded-sm border border-v0-gray-200 bg-v0-gray-100 animate-pulse"}),(0,a.jsx)("div",{className:"h-4 w-16 bg-v0-gray-200 rounded animate-pulse"})]}),(0,a.jsx)(tf.ChevronDownSmall,{className:"size-4 text-v0-gray-300"})]})})}):(0,a.jsx)("div",{title:e,className:"flex w-full min-w-0",children:(0,a.jsxs)(tw.Popover,{open:x,onOpenChange:v,children:[(0,a.jsx)(tw.PopoverTrigger,{asChild:!0,children:(0,a.jsxs)(A.Button,{variant:"secondary",size:"sm",className:"w-full justify-between rounded-md px-2 font-normal",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 min-w-0",children:[u?(0,a.jsx)("span",{ref:m,className:"block size-4 shrink-0 rounded-sm border border-v0-gray-200",style:{background:C}}):(0,a.jsx)(tP.AlphaSquare,{className:"size-4 shrink-0"}),t?(0,a.jsx)("span",{className:"text-v0-gray-1000 truncate",ref:g,children:f??t}):(0,a.jsx)("span",{className:"text-v0-gray-900",children:"Default"})]}),(0,a.jsx)(tf.ChevronDownSmall,{className:"size-4"})]})}),(0,a.jsx)(tw.PopoverContent,{className:"w-auto min-w-[226px] rounded shadow-lg",align:"start",withOverlay:!0,onPointerLeave:o,children:(0,a.jsx)("div",{className:"flex flex-col gap-1 p-1",children:(0,a.jsxs)(tE.Tabs,{defaultValue:T?I?"system":"tailwind":"picker",variant:"secondary",className:"flex flex-col gap-1",children:[T?(0,a.jsxs)(tE.TabsList,{className:"justify-center border-b bg-transparent px-0 pb-1",children:[I?(0,a.jsx)(tE.TabsTrigger,{value:"system",className:"flex h-6 w-full items-center text-xs",children:"System"}):null,N?(0,a.jsx)(tE.TabsTrigger,{value:"tailwind",className:"flex h-6 w-full items-center text-xs",children:"Tailwind"}):null,(0,a.jsx)(tE.TabsTrigger,{value:"picker",className:"flex h-6 w-full items-center text-xs",children:"Custom"})]}):null,(0,a.jsxs)(tE.TabsContent,{value:"picker",children:[(0,a.jsx)(tT.default,{color:function(e){let t=no(e);if(!t)return{h:0,s:0,v:100,a:1};let n=se(t);return{h:Math.round(n.h??0),s:Math.round(100*n.s),v:Math.round(100*n.v),a:t.alpha??1}}(b.current||C),onChange:e=>{var t,n,r,s;b.current=sh(e.rgba),m.current?.style.setProperty("background",sh(e.rgba)),g.current&&void 0===f&&(g.current.textContent=(t=e.rgba.r,n=e.rgba.g,r=e.rgba.b,s=e.rgba.a,`#${sd(t)}${sd(n)}${sd(r)}${s<1?sd(Math.round(255*s)):""}`)),y(e.rgba)},disableAlpha:!h,presetColors:!1}),(0,a.jsxs)("div",{className:"flex items-center justify-end gap-0.5",children:[(0,a.jsx)("button",{className:"flex h-6 items-center justify-center rounded-full px-2 text-xs text-v0-gray-900 transition-colors hover:bg-v0-gray-100 hover:text-v0-gray-900",onClick:w,children:"Inherit"}),(0,a.jsx)("button",{className:"flex h-6 w-6 items-center justify-center rounded-full text-v0-gray-900 transition-colors hover:bg-v0-gray-100",onClick:async()=>{if("EyeDropper"in window){let e=new EyeDropper,t=await e.open();if(t){let e=t.sRGBHex.match(/[a-f0-9]{2}/g).map(e=>parseInt(e,16));y({r:e[0],g:e[1],b:e[2],a:1})}}},children:(0,a.jsx)(tI.default,{className:"size-3"})})]})]}),N?(0,a.jsx)(tE.TabsContent,{value:"tailwind",children:(0,a.jsx)(sy,{tokens:S,open:x,onPointerEnter:i,onSelect:k})}):null,I?(0,a.jsx)(tE.TabsContent,{value:"system",children:(0,a.jsx)(sy,{tokens:M,open:x,onPointerEnter:i,onSelect:k})}):null]})})})]})})}function sw({text:e,content:t}){return(0,a.jsx)(tp.Tooltip,{content:t||(0,a.jsx)("div",{className:"text-center whitespace-pre-line",children:e}),side:"right",children:(0,a.jsx)(tL.InformationFillSmall,{})})}function sk({title:e,children:t,infoIcon:n}){return(0,a.jsxs)("div",{className:"border-v0-alpha-400 flex flex-col gap-3 border-b p-3 [&_svg]:text-v0-gray-900! [&:is(:last-child)]:border-b-0 [&:is(:last-child)]:pb-6",children:[(0,a.jsxs)("div",{className:"text-label-12 select-none font-medium flex items-center gap-1",children:[e,n]}),t]})}function sC({value:e,type:t,onUpdate:n}){let r=(0,tN.useDebounceCallback)(e=>{e||"jsxText"!==t?n(e):n('{""}')},100,{maxWait:50});return(0,a.jsx)(t_.Textarea,{defaultValue:e.trim(),onChange:e=>{if("jsxText"===t){let t=e.currentTarget.value;t.includes("\n")?r("{"+JSON.stringify(t)+"}"):r(t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/\{/g,"&#123;").replace(/\}/g,"&#125;"))}else r(e.currentTarget.value)},rows:3,spellCheck:!1})}let sS=["0","","2","4","8"],sM=[["0","0px"],["","1px"],["2","2px"],["4","4px"],["8","8px"]],sN=["3","4","5","6","7","8","9","10"],sI=[["3","0.75rem"],["4","1rem"],["5","1.25rem"],["6","1.5rem"],["7","1.75rem"],["8","2rem"],["9","2.25rem"],["10","2.5rem"]],sT=["tighter","tight","normal","wide","wider","widest"],sE=[["tighter","-0.05em"],["tight","-0.025em"],["normal","0em"],["wide","0.025em"],["wider","0.05em"],["widest","0.1em"]],sL=["0","px","0.5","1","1.5","2","2.5","3","3.5","4","5","6","7","8","9","10","11","12","14","16","20","24","28","32","36","40","44","48","52","56","60","64","72","80","96"],s_=[["0","0px"],["px","1px"],["0.5","2px"],["1","4px"],["1.5","6px"],["2","8px"],["2.5","10px"],["3","12px"],["3.5","14px"],["4","16px"],["5","20px"],["6","24px"],["7","28px"],["8","32px"],["9","36px"],["10","40px"],["11","44px"],["12","48px"],["14","56px"],["16","64px"],["20","80px"],["24","96px"],["28","112px"],["32","128px"],["36","144px"],["40","160px"],["44","176px"],["48","192px"],["52","208px"],["56","224px"],["60","240px"],["64","256px"],["72","288px"],["80","320px"],["96","384px"]],sP=[...s_,["auto","auto"]],sA=[...s_,["auto","auto"],["1/2","50%"],["1/3","33.333333%"],["2/3","66.666667%"],["1/4","25%"],["2/4","50%"],["3/4","75%"],["1/5","20%"],["2/5","40%"],["3/5","60%"],["4/5","80%"],["1/6","16.666667%"],["2/6","33.333333%"],["3/6","50%"],["4/6","66.666667%"],["5/6","83.333333%"],["1/12","8.333333%"],["2/12","16.666667%"],["3/12","25%"],["4/12","33.333333%"],["5/12","41.666667%"],["6/12","50%"],["7/12","58.333333%"],["8/12","66.666667%"],["9/12","75%"],["10/12","83.333333%"],["11/12","91.666667%"],["full","100%"],["min","min-content"],["max","max-content"],["fit","fit-content"]],sR=["white","black","transparent","border","input","ring-3","background","foreground","primary","secondary","destructive","warning","muted","accent","popover","card","sidebar"],sD={100:"font-thin",200:"font-extralight",300:"font-light",400:"font-normal",500:"font-medium",600:"font-semibold",700:"font-bold",800:"font-extrabold",900:"font-black"},sF=Array.from({length:21},(e,t)=>[String(5*t),String(5*t)]);function sO({title:e,options:t,type:n,classNames:r,match:s,fallbackValue:i,breakpoint:o,icon:c,showTitle:u,onUpdate:h}){let p,f=[],m=su(o),[g,x]=(0,l.useState)(null),v="",b=0,y=!1;for(let{display:e,value:i,fallback:o,title:l}of t){let t=!1;e:for(let e=0;e<r.length;e++){for(let n of m)if(r[e]?.includes(n+":"+i)){if(p&&e9.indexOf(p)<e9.indexOf(n))continue;b=e,t=!0,v=i,p=n;break e}if(!p&&r[e]?.includes(i)){b=e,t=!0,v=i;break}}if(o&&(y=!0),"dropdown"===n){f.push((0,a.jsx)(th.SelectItem,{value:i||" ",className:"h-8 w-full",onPointerEnter:()=>{g||x([r[b].join(" "),v||" "]);let e=r[b].filter(e=>e!==(p?p+":"+v:v)&&(!s||!s(e)));i&&e.push(p?p+":"+i:i),h(b,e.join(" "),!0)},children:e},i));continue}f.push((0,a.jsx)(tp.Tooltip,{content:l||i,delayDuration:200,sideOffset:0,children:(0,a.jsx)("button",{className:(0,d.cn)("flex flex-1 items-center justify-center rounded-sm py-1 transition-colors",t?"bg-v0-gray-200 [&_svg]:text-v0-gray-1000! hover:bg-v0-gray-300":"text-v0-gray-900 hover:bg-v0-gray-100"),onClick:()=>{let e=r[b].filter(e=>e!==(p?p+":"+v:v)&&(!s||!s(e)));i&&e.push(p?p+":"+i:i),h(b,e.join(" "))},children:e})},i))}if(!v&&!y)if(!i)return null;else v=i,y=!0;let j=(0,a.jsxs)(th.Select,{value:(g?.[1]??v)||" ",onValueChange:e=>{x(null),e=e.trim();let t=r[b].filter(e=>e!==(p?p+":"+v:v)&&(!s||!s(e)));e&&t.push(p?p+":"+e:e),h(b,t.join(" "),!1)},children:[(0,a.jsx)(A.Button,{size:"sm",variant:"secondary",asChild:!0,className:"justify-between rounded-md font-normal",children:(0,a.jsxs)(th.SelectTrigger,{hideChevron:!0,children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[c,v?(0,a.jsx)(th.SelectValue,{}):(0,a.jsx)("span",{className:"text-v0-gray-900",children:"Default"})]}),(0,a.jsx)(tf.ChevronDownSmall,{className:"size-4"})]})}),(0,a.jsx)(th.SelectContent,{onPointerLeave:()=>{if(g){let[e]=g;h(b,e,!0)}},children:f})]}),w=(0,a.jsx)("div",{className:"bg-v0-background-300 inline-flex h-8 w-full gap-0.5 rounded-md border border-v0-gray-200 p-[2px] text-sm",children:f});return"dropdown"!==n?(0,a.jsx)("div",{title:e,className:"flex flex-1",children:(0,a.jsxs)("div",{className:"flex w-full flex-col gap-1.5",children:[(0,a.jsx)("label",{className:"text-label-12 select-none capitalize leading-4 text-v0-gray-900",children:e}),w]})}):u?(0,a.jsxs)("div",{className:"flex w-full flex-col gap-1.5",children:[(0,a.jsx)("label",{className:"text-label-12 select-none capitalize leading-4 text-v0-gray-900",children:e}),j]}):(0,a.jsx)("div",{title:e,className:"flex flex-1",children:j})}function s$({title:e,options:t,classNames:n,breakpoint:r,onUpdate:s}){let i=[],o=su(r);for(let{display:e,value:r,title:l,conflict:c}of t){let t,u="",h=0,p=!1;e:for(let e=0;e<n.length;e++){for(let s of o)if(n[e]?.includes(s+":"+r)){if(t&&e9.indexOf(t)<e9.indexOf(s))continue;h=e,p=!0,u=r,t=s;break e}if(!t&&n[e]?.includes(r)){h=e,p=!0,u=r;break}}i.push((0,a.jsx)(tp.Tooltip,{content:l||r,delayDuration:200,sideOffset:0,children:(0,a.jsx)("button",{className:(0,d.cn)("flex flex-1 items-center justify-center rounded-sm py-1 transition-colors",p?"bg-v0-gray-200 [&_svg]:text-v0-gray-1000! hover:bg-v0-gray-300":"text-v0-gray-900 hover:bg-v0-gray-100"),onClick:()=>{let e=!1,i=n[h].filter(n=>n!==(t?t+":"+u:u)?!(c&&c.includes(n)):(e=!0,!1));r&&!e&&i.push(t?t+":"+r:r),s(h,i.join(" "))},children:e})},r))}return(0,a.jsx)("div",{title:e,className:"flex flex-1",children:(0,a.jsxs)("div",{className:"flex w-full flex-col gap-1.5",children:[(0,a.jsx)("label",{className:"text-label-12 select-none capitalize leading-4 text-v0-gray-900",children:e}),(0,a.jsx)("div",{className:"bg-v0-background-300 inline-flex h-8 w-full gap-0.5 rounded-md border border-v0-gray-200 p-[2px] text-sm",children:i})]})})}function sV({title:e,icon:t,value:n,step:r,allowNegative:s,allowIconSliding:i,min:o,max:l,disabled:c,onChange:d,suffix:u,presets:h=s_}){return(0,a.jsx)(tS,{title:e,prefix:t,suffix:u,disabled:c,value:n,onChange:d,step:r,min:o,max:l,allowNegative:s,allowIconSliding:i,presets:h})}function sz(e){return e[2]?e[2]+":"+e[0]:e[0]}function sB({title:e,showTitle:t,classNames:n,prefix:r,prefixX:s,prefixY:i,prefixT:o,prefixR:c,prefixB:u,prefixL:h,icon:p,iconX:f,iconY:m,iconT:g,iconR:x,iconB:v,iconL:b,breakpoint:y,generate:j,match:w,min:k,max:C,allowNegative:S,allowIconSliding:M,defaultValue:N=0,onUpdate:I,presets:T}){let E=su(y),L={},_={};for(let e=0;e<n.length;e++)for(let t of n[e]||[]){for(let n of E)if(t.startsWith(n+":")){let r=t.slice(n.length+1),s=w(r);if(null!==s){let t=L[s[0]];if(t?.[2]&&e9.indexOf(t[2])<e9.indexOf(n))continue;L[s[0]]=[r,s[1],n],_[s[0]]=e}}let n=w(t);if(null!==n){let r=L[n[0]];r?.[2]||(L[n[0]]=[t,n[1],void 0],_[n[0]]=e)}}let P=(e,t,a)=>{let l,d=j(e,t);if(null===d)return;let p=_[e]||0,f=new Set;L[e]?.[0]?(f.add(sz(L[e])),l=L[e][2]):e===r||(e===s||e===i?l=L[r]?.[2]:e===o||e===u?l=L[i||""]?.[2]||L[r]?.[2]:(e===c||e===h)&&(l=L[s||""]?.[2]||L[r]?.[2]));let m=e.startsWith("gap"),g=e.startsWith("space");if(m||g){let e=m?[/^gap-/,/^gap-x-/,/^gap-y-/]:[/^space-x-/,/^space-y-/];for(let t=0;t<n.length;t++)for(let r of n[t]||[]){let t=r.includes(":")?r.split(":")[1]||"":r;e.some(e=>e.test(t))&&f.add(r)}}(e===s||e===i||e===r)&&(o&&L[o]?.[0]&&f.add(sz(L[o])),c&&L[c]?.[0]&&f.add(sz(L[c])),u&&L[u]?.[0]&&f.add(sz(L[u])),h&&L[h]?.[0]&&f.add(sz(L[h])),e===r&&(s&&L[s]?.[0]&&f.add(sz(L[s])),i&&L[i]?.[0]&&f.add(sz(L[i]))));let x=n[p].filter(e=>!f.has(e));x.push(l?l+":"+d:d),I(p,x.join(" "),a)},R=s?L[s]??L[r]:void 0,D=i?L[i]??L[r]:void 0,F=o?L[o]??(i?L[i]:void 0)??L[r]:void 0,O=c?L[c]??(s?L[s]:void 0)??L[r]:void 0,$=u?L[u]??(i?L[i]:void 0)??L[r]:void 0,V=h?L[h]??(s?L[s]:void 0)??L[r]:void 0,z=$!==F||V!==O,[B,H]=(0,l.useState)(z),[U,W]=(0,l.useState)(!1),q=(0,a.jsx)(sV,{presets:T,title:e,allowNegative:S,value:L[r]?.[1]??N,icon:U?null:p,min:S?void 0:0,allowIconSliding:M,onChange:(e,t,n,s)=>{if("number"==typeof e){if(e<k||e>C||isNaN(e)){n(),e<k&&(t.value=k.toString()),e>C&&(t.value=C.toString());return}P(r,e,s)}else P(r,e,s)}}),G=s?(0,a.jsx)(sV,{presets:T,title:`${e} X`,icon:f,allowNegative:S,value:R?.[1]??N,min:S?void 0:0,allowIconSliding:M,onChange:(e,t,n,i)=>{if("number"==typeof e){if(e<k||e>C||isNaN(e)){n(),e<k&&(t.value=k.toString()),e>C&&(t.value=C.toString());return}U?P(r,e,i):P(s,e,i)}else U?P(r,e,i):P(s,e,i)}}):null,X=i?(0,a.jsx)(sV,{presets:T,title:`${e} Y`,icon:m,allowNegative:S,disabled:U,value:U?R?.[1]??N:D?.[1]??N,min:S?void 0:0,allowIconSliding:M,onChange:(e,t,n,r)=>{if("number"==typeof e){if(e<k||e>C||isNaN(e)){n(),e<k&&(t.value=k.toString()),e>C&&(t.value=C.toString());return}P(i,e,r)}else P(i,e,r)}}):null,Z=o?(0,a.jsx)(sV,{presets:T,title:`${e} Top`,icon:g,allowNegative:S,value:F?.[1]??N,min:S?void 0:0,allowIconSliding:M,onChange:(e,t,n,r)=>{if("number"==typeof e){if(e<k||e>C||isNaN(e)){n(),e<k&&(t.value=k.toString()),e>C&&(t.value=C.toString());return}P(o,e,r)}else P(o,e,r)}}):null,Y=c?(0,a.jsx)(sV,{presets:T,title:`${e} Right`,icon:x,allowNegative:S,value:O?.[1]??N,min:S?void 0:0,allowIconSliding:M,onChange:(e,t,n,r)=>{if("number"==typeof e){if(e<k||e>C||isNaN(e)){n(),e<k&&(t.value=k.toString()),e>C&&(t.value=C.toString());return}P(c,e,r)}else P(c,e,r)}}):null,J=u?(0,a.jsx)(sV,{presets:T,title:`${e} Bottom`,icon:v,allowNegative:S,value:$?.[1]??N,min:S?void 0:0,allowIconSliding:M,onChange:(e,t,n,r)=>{if("number"==typeof e){if(e<k||e>C||isNaN(e)){n(),e<k&&(t.value=k.toString()),e>C&&(t.value=C.toString());return}P(u,e,r)}else P(u,e,r)}}):null,K=h?(0,a.jsx)(sV,{presets:T,title:`${e} Left`,icon:b,allowNegative:S,value:V?.[1]??N,min:S?void 0:0,allowIconSliding:M,onChange:(e,t,n,r)=>{if("number"==typeof e){if(e<k||e>C||isNaN(e)){n(),e<k&&(t.value=k.toString()),e>C&&(t.value=C.toString());return}P(h,e,r)}else P(h,e,r)}}):null,Q=o&&c&&u&&h&&!U,ee=G&&X,et=(0,a.jsxs)("div",{className:"items-top flex w-full justify-between gap-2",children:[B?(0,a.jsxs)("div",{className:"flex w-full flex-1 flex-col gap-3",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("span",{className:"flex-1",children:Z}),(0,a.jsx)("span",{className:"flex-1",children:J})]}),(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("span",{className:"flex-1",children:K}),(0,a.jsx)("span",{className:"flex-1",children:Y})]})]}):U?(0,a.jsx)("div",{className:"flex flex-1 items-center gap-3",children:q}):G&&X?(0,a.jsxs)("div",{className:"flex flex-1 items-center gap-3",children:[G,X]}):(0,a.jsx)("div",{className:"flex flex-1 items-center gap-3",children:q}),Q||ee?(0,a.jsxs)("div",{className:"flex gap-1",children:[Q?(0,a.jsx)(tp.Tooltip,{content:"Toggle all sides",children:(0,a.jsx)(A.Button,{variant:"ghost",size:"sm",className:"w-8",onClick:()=>{H(!B)},children:B?(0,a.jsx)(tg.FullscreenClose,{}):(0,a.jsx)(tm.Fullscreen,{})})}):null,ee?(0,a.jsx)(tp.Tooltip,{content:U?"Unlock":"Lock",children:(0,a.jsx)(A.Button,{variant:U?"blue-ghost":"ghost",size:"sm","data-locked":U,className:(0,d.cn)("w-8",U&&"[&[data-locked=true]_svg]:text-v0-blue-800!"),onClick:()=>{U?W(!1):(W(!0),B&&H(!1))},children:(0,a.jsx)(tx.LockClosed,{})})}):null]}):null]});return t?(0,a.jsxs)("div",{className:"flex w-full flex-col gap-1.5",children:[(0,a.jsx)("label",{className:"text-label-12 select-none capitalize leading-4 text-v0-gray-900",children:e}),et]}):et}function sH({title:e,classNames:t,defaultValue:n,step:r,allowNegative:s,breakpoint:i,prefix:o,icon:l,suffix:c,generate:d,match:u,min:h,max:p,onUpdate:f,presets:m}){let g=su(i),x={},v={};for(let e=0;e<t.length;e++)for(let n of t[e]||[]){for(let t of g)if(n.startsWith(t+":")){let r=u(n.slice(t.length+1));if(null!==r){let s=x[r[0]];if(s?.[2]&&e9.indexOf(s[2])<e9.indexOf(t))continue;x[r[0]]=[n,r[1],t],v[r[0]]=e}}let t=u(n);if(null!==t){let r=x[t[0]];r?.[2]||(x[t[0]]=[n,t[1],void 0],v[t[0]]=e)}}let b=(e,n,r)=>{let s,i,a=d(e,n);if(null===a)return!1;let o=v[e]||0;x[e]?.[0]&&(s=sz(x[e]),i=x[e][2]);let l=s?t[o].filter(e=>e!==s):[...t[o]];l.push(i?i+":"+a:a),f(o,l.join(" "),r)};return(0,a.jsx)("div",{className:"items-top flex w-full justify-between gap-2",children:(0,a.jsx)("div",{className:"flex flex-1 items-center gap-3",children:(0,a.jsx)(sV,{presets:m,title:e,value:x[o]?.[1]??n,icon:l,suffix:c,step:r,min:h,max:p,allowIconSliding:!0,allowNegative:s,onChange:(e,t,n,r)=>{if("number"!=typeof e)return b(o,e,r);if(e<h||e>p||isNaN(e)){n(),e<h&&(t.value=h.toString()),e>p&&(t.value=p.toString());return}return b(o,e,r)}})})})}function sU({title:e,classNames:t,computedColor:n,tokens:r,prefix:s,match:i,fallback:o,onUpdate:c}){let{colorClassName:d,activeIndex:u}=(0,l.useMemo)(()=>{let e="",n=0;for(let r=0;r<t.length;r++)for(let s=0;s<(t[r]||[]).length;s++){let a=i(t[r]?.[s]||"");if(null!==a){e=a,n=r;break}}return{colorClassName:e,activeIndex:n}},[t,i]),[h,p]=(0,l.useState)(null),f=(0,l.useCallback)(e=>{let n=t[u].filter(e=>e!==d);if(e){let t=`${s}[rgba(${e.r},${e.g},${e.b},${e.a})]`;n.push(t)}c(u,n.join(" "),!0)},[u,t,d,c,s]),m=(0,l.useCallback)(e=>{let n=t[u].filter(e=>e!==d);if(e){let t=`${s}${e}`;n.push(t)}c(u,n.join(" "),!1)},[u,t,d,c,s]),g=(0,l.useCallback)(()=>{if(h){let[e]=h;c(u,e,!0),p(null)}},[u,c,h]),x=(0,l.useCallback)(e=>{h||p([t[u].join(" "),d||" "]);let n=t[u].filter(e=>e!==d);"Default"!==e.label&&n.push(`${s}${e.label}`),c(u,n.join(" "),!0)},[u,t,d,c,s,h]),v=(0,l.useCallback)((e,t)=>{e.current&&(e.current.textContent=t)},[]),b=(0,l.useMemo)(()=>r?[{label:"Default",value:""},...Object.entries(r).map(([e,t])=>({label:e,value:t}))]:[],[r]),{displayedColorName:y,parsedColor:j}=(0,l.useMemo)(()=>{if(!d)return{displayedColorName:null,parsedColor:null};let e=d.startsWith(s)?d.slice(s.length):null;if(r&&e&&r[e])return{displayedColorName:e,parsedColor:no(r[e])??null};if(n){let e=no(n);return{displayedColorName:e?sr(e):null,parsedColor:e??null}}return{displayedColorName:null,parsedColor:null}},[d,s,r,n]);return d||o?(0,a.jsx)(sj,{title:e,displayedColorName:y,colorTokens:b,onColorChange:f,onTokensChange:m,onPointerEnter:x,onPointerLeave:g,updateColorNameTextContent:v,clearRevertPreview:()=>p(null),parsedColor:j,alphaEnabled:!0}):null}var sW=e.i(756317);function sq({source:e,name:t,props:n,onUpdate:r}){let s=[];function i(e,t,n){"__v0_dynamic"!==t&&s.push({name:e,active:t?JSON.parse(t):n[0],options:n})}return("@/components/ui/button"===e&&"Button"===t?i("variant",n.variant?.[0],["default","secondary","destructive","outline","ghost","link"]):"@/components/ui/badge"===e&&"Badge"===t?i("variant",n.variant?.[0],["default","secondary","destructive","outline"]):"@/components/ui/alert"===e&&"Alert"===t?i("variant",n.variant?.[0],["default","destructive"]):"@/components/ui/toggle"===e&&"Toggle"===t?(i("variant",n.variant?.[0],["default","outline"]),i("size",n.size?.[0],["default","sm","lg"])):"@/components/ui/sidebar"===e?("SidebarMenuButton"===t&&i("variant",n.variant?.[0],["default","outline"]),("SidebarMenuButton"===t||"SidebarMenuSubButton"===t)&&i("size",n.size?.[0],["default","sm","lg"])):"@/components/ui/input"===e&&"Input"===t?i("type",n.type?.[0],["text","email","password","number","search","tel","url"]):"@/components/ui/select"===e&&"SelectContent"===t&&(i("side",n.side?.[0],["top","bottom","left","right"]),i("align",n.align?.[0],["start","center","end"])),0===s.length)?null:(0,a.jsx)(sk,{title:"Component",children:(0,a.jsx)("div",{className:"flex flex-col gap-2",children:s.map(({name:e,active:t,options:n})=>(0,a.jsxs)("div",{className:"flex flex-col items-start gap-1",children:[(0,a.jsx)("label",{className:"text-label-12 capitalize opacity-60",children:e}),(0,a.jsxs)(th.Select,{onValueChange:t=>{r(e,t)},value:t,children:[(0,a.jsx)(A.Button,{size:"sm",variant:"secondary",asChild:!0,className:"justify-between font-normal min-w-0 flex-1",children:(0,a.jsx)(th.SelectTrigger,{children:(0,a.jsx)("div",{className:"flex items-center gap-2 capitalize",children:t})})}),(0,a.jsx)(th.SelectContent,{children:n.map(e=>(0,a.jsx)(th.SelectItem,{value:e,className:"h-8 w-full capitalize",children:e},e))})]})]},e))})})}var sG=e.i(470259);let sX=(0,sW.default)(()=>e.A(556530).then(e=>e.DevToolsIcon),{loadableGenerated:{modules:[747854]}});function sZ({classNames:e,classNamesInfo:t,handleClassUpdate:n,handleContentUpdate:r,handleIconUpdate:s,handleImageSrcUpdate:i,handlePropUpdate:o,selected:d,imageUpload:u,getFileContent:p}){let f,{iedm:m}=(0,W.useFlags)(),g=(0,v.useChatId)(),x=(0,h.useActiveBlockState)(),b=d.info?.twTokens.colors,y=d.info?.twVersion||3,j=d.lib?.source==="lucide-react",w=(d.lib?.source||"").startsWith("@/components/ui/"),k=sv(d,p),C=t.size||j,{inputFileRef:S,onInputChange:M,isUploading:N,imageSrc:I}=u,T=function({currentImageUrl:e,onImageUpdate:t}){let n=(0,c.useRouter)(),r=(0,v.useChatId)(),s=(0,h.useActiveBlockState)(),[i,a]=(0,l.useState)({state:"idle",originalUrl:null,variants:[],selectedIndex:null}),o=(0,l.useCallback)(async r=>{if(!e)return;let s=sg(e);a({state:"loading",originalUrl:e,variants:[],selectedIndex:null});try{let i=await fetch("/api/chat/images/regenerate",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({imageUrl:e,modifications:r||void 0,isPlaceholder:s})});if(!i.ok){if(402===i.status&&await i.text()===sG.OUT_OF_CREDITS){a({state:"idle",originalUrl:null,variants:[],selectedIndex:null}),(0,R.handleChatError)(sG.OUT_OF_CREDITS,n);return}throw Error(`API error: ${i.status} ${i.statusText}`)}let o=await i.json();if(!o.variants||!Array.isArray(o.variants))throw Error("Invalid API response: missing variants");let l=o.variants.map(e=>e.url);a(e=>{let n=s?0:-1;if(-1===n)t(e.originalUrl||"",!0);else{let e=l[n];e&&t(e,!0)}return{...e,state:"completed",variants:l,selectedIndex:n}})}catch(r){let e;console.error("❌ Image regeneration failed:",r);let{errorType:t,errorMessage:n}=(e=r instanceof Error?r.message:String(r),"TypeError"===r.name&&e.includes("fetch")?{errorType:"network",errorMessage:"Connection failed. Please check your internet and try again."}:e.includes("401")||e.includes("Authentication")?{errorType:"auth",errorMessage:"Authentication expired. Please sign in again."}:e.includes("429")||e.includes("rate limit")?{errorType:"rate_limit",errorMessage:"Too many requests. Please wait a moment and try again."}:e.includes("timeout")||e.includes("took too long")?{errorType:"timeout",errorMessage:"Processing is taking too long. Please try again."}:e.includes("400")||e.includes("Invalid")||e.includes("invalid")?{errorType:"validation",errorMessage:"Unable to process this image. Please try a different image."}:e.includes("missing variants")||e.includes("Invalid API response")?{errorType:"invalid_response",errorMessage:"Unexpected server response. Please try again."}:{errorType:"api",errorMessage:"Server error. Please try again in a moment."});a(e=>({...e,state:"error",errorMessage:n,errorType:t,variants:[],selectedIndex:null}))}},[e,t,n]),d=(0,l.useCallback)(e=>{a(n=>{let r={...n,selectedIndex:e};if(-1===e)t(n.originalUrl||"",!0);else{let r=n.variants[e];r&&t(r,!0)}return r})},[t,r,s?.id,e]),u=(0,l.useCallback)(()=>{let{selectedIndex:e}=i;if(null===e)return;if(-1===e)return void a({state:"idle",originalUrl:null,variants:[],selectedIndex:null});let n=i.variants[e];n&&t(n,!1),a({state:"idle",originalUrl:null,variants:[],selectedIndex:null})},[i,t,r,s?.id,e]),p=(0,l.useCallback)(()=>{i.originalUrl&&t(i.originalUrl,!0),a({state:"idle",originalUrl:null,variants:[],selectedIndex:null})},[i,t,r,s?.id,e]),f=(0,l.useCallback)(async()=>{await o()},[o]),m=(0,l.useCallback)(()=>{a({state:"idle",originalUrl:null,variants:[],selectedIndex:null})},[]),g=(0,l.useMemo)(()=>"completed"!==i.state||null===i.selectedIndex?null:-1===i.selectedIndex?i.originalUrl:i.variants[i.selectedIndex],[i.state,i.selectedIndex,i.originalUrl,i.variants]);return(0,l.useEffect)(()=>{if("completed"===i.state&&i.variants.length>0){let e=[];if(i.variants.forEach(t=>{let n=new Image;n.onerror=()=>{console.warn(`Failed to preload variant: ${t}`)},n.src=t,e.push(n)}),i.originalUrl){let t=new Image;t.onerror=()=>{console.warn(`Failed to preload original: ${i.originalUrl}`)},t.src=i.originalUrl,e.push(t)}return()=>{e.forEach(e=>{e.src="",e.onload=null,e.onerror=null})}}},[i.state,i.variants,i.originalUrl]),{regenerationState:i,regenerateImage:o,selectVariant:d,acceptRegeneration:u,declineRegeneration:p,retryRegeneration:f,resetToIdle:m,isRegenerating:"loading"===i.state,hasVariants:"completed"===i.state,hasError:"error"===i.state,selectedImageUrl:g,selectedVariantUrl:null===i.selectedIndex?null:-1===i.selectedIndex?i.originalUrl:i.variants[i.selectedIndex]}}({currentImageUrl:I,onImageUpdate:(e,t)=>{sv(d,p)?i(e,t):r(e,t)}}),[E,L]=(0,l.useState)(!1),[_,P]=(0,l.useState)(!1),[D,F]=(0,l.useState)(""),O=(0,l.useRef)(null),$=(0,l.useCallback)(e=>{e.style.height="auto",e.style.height=`${e.scrollHeight}px`},[]),V=(0,l.useCallback)(async()=>{if(!D.trim())return;let e=D.trim();P(!1),F(""),await T.regenerateImage(e)},[D,T,g,x?.id,I]);(0,l.useEffect)(()=>{L(!1)},[I]),(0,l.useEffect)(()=>{T.isRegenerating&&(P(!1),F(""))},[T.isRegenerating]),(0,l.useEffect)(()=>{_&&O.current&&$(O.current)},[_,$]);let z=(0,l.useCallback)((e,t,n,r,s)=>(0,a.jsxs)("div",{className:`flex-1 aspect-video rounded-md border-2 overflow-hidden cursor-pointer transition-all relative ${r?"border-blue-500 ring-2 ring-blue-200":"border-gray-300 hover:border-gray-400"}`,onClick:s,children:[(0,a.jsx)("img",{src:"/chat-static/chuckerboard.png",alt:"",className:"absolute inset-0 w-full h-full object-cover"}),(0,a.jsx)("img",{src:e,alt:t,className:"relative z-10 w-full h-full object-contain",onError:e=>{let t=e.target;"/chat-static/chuckerboard.png"!==t.src&&(t.src="/chat-static/chuckerboard.png")}})]}),[]),B=(0,l.useCallback)(()=>sg(I)?(0,a.jsxs)(A.Button,{variant:"secondary",size:"xs",className:"w-full min-h-[30px] rounded-md",onClick:()=>P(!0),disabled:!I||T.isRegenerating,children:[(0,a.jsx)(tP.EditPrompt,{className:"w-2.5 h-2.5 !fill-v0-gray-1000"}),(0,a.jsx)("span",{className:"font-medium",children:"Prompt to Edit"})]}):(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsxs)(A.Button,{variant:"secondary",size:"xs",className:"flex-1 min-h-[30px] rounded-md",onClick:()=>{T.regenerateImage()},disabled:!I,children:[(0,a.jsx)(tl.RotateCounterClockwise,{className:"w-2.5 h-2.5 !fill-v0-gray-1000"}),(0,a.jsx)("span",{className:"font-medium",children:"Regenerate"})]}),(0,a.jsxs)(A.Button,{variant:"secondary",size:"xs",className:"flex-1 min-h-[30px] rounded-md",onClick:()=>P(!0),disabled:!I||T.isRegenerating,children:[(0,a.jsx)(tP.EditPrompt,{className:"w-2.5 h-2.5 !fill-v0-gray-1000"}),(0,a.jsx)("span",{className:"font-medium",children:"Prompt to Edit"})]})]}),[I,T,P]),H=(0,l.useCallback)(()=>{let e,{isPlaceholder:t,middleThumbnail:n,rightThumbnail:r}={isPlaceholder:e=sg(I),showThreeVariants:e,middleThumbnail:e?{index:1,label:"Variant 2"}:{index:-1,label:"Original"},rightThumbnail:e?{index:2,label:"Variant 3"}:{index:1,label:"Variant 2"}};return(0,a.jsxs)("div",{className:"flex gap-2",children:[z(T.regenerationState.variants[0]||"","Variant 1",0,0===T.regenerationState.selectedIndex,()=>T.selectVariant(0)),z(-1===n.index?T.regenerationState.originalUrl||"":T.regenerationState.variants[n.index]||"",n.label,n.index,T.regenerationState.selectedIndex===n.index,()=>T.selectVariant(n.index)),z(T.regenerationState.variants[r.index]||"",r.label,r.index,T.regenerationState.selectedIndex===r.index,()=>T.selectVariant(r.index))]})},[I,T,z]);return(0,a.jsxs)(a.Fragment,{children:[j?(0,a.jsx)(sk,{title:"Icon",children:(0,a.jsx)(l.Suspense,{fallback:(0,a.jsx)("div",{className:"h-8 w-full animate-pulse rounded-md bg-v0-gray-200"}),children:(0,a.jsx)(sX,{name:d.lib.name,lib:d.lib.source,onUpdate:s})})}):null,w?(0,a.jsx)(sq,{source:d.lib.source,name:d.lib.name,props:d.lib.props,onUpdate:o}):null,k&&m?(0,a.jsx)(sk,{title:"Image",infoIcon:(0,a.jsx)(sw,{content:(0,a.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,a.jsx)("div",{className:"text-xs font-medium",children:"Generate an image"}),(0,a.jsx)("div",{className:"text-xs",children:"$0.05 per image generation"})]})}),children:(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{className:"relative rounded-md border overflow-hidden group",children:[(0,a.jsxs)("div",{className:"w-full aspect-[16/9] flex items-center justify-center relative",children:[(0,a.jsx)("img",{src:"/chat-static/chuckerboard.png",alt:"",className:"absolute inset-0 w-full h-full object-cover"}),(f=T.hasVariants&&T.selectedImageUrl?T.selectedImageUrl:I)&&!E?(0,a.jsx)("img",{src:f,alt:"Preview",className:"absolute inset-0 w-full h-full relative z-10 object-contain opacity-100",onError:()=>L(!0)},f):(0,a.jsx)("div",{className:"relative z-10 w-16 h-16 bg-v0-gray-300 rounded flex items-center justify-center",children:(0,a.jsxs)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",children:[(0,a.jsx)("rect",{x:"3",y:"3",width:"18",height:"18",rx:"2",stroke:"#9CA3AF",strokeWidth:"2"}),(0,a.jsx)("circle",{cx:"9",cy:"9",r:"2",stroke:"#9CA3AF",strokeWidth:"2"}),(0,a.jsx)("path",{d:"M21 15l-3.086-3.086a2 2 0 00-2.828 0L6 21",stroke:"#9CA3AF",strokeWidth:"2"})]})}),T.isRegenerating&&(0,a.jsx)("div",{className:"absolute inset-0 z-15 overflow-hidden",children:(0,a.jsx)("div",{className:"absolute inset-0",style:{background:"linear-gradient(135deg, transparent 30%, rgba(255,255,255,0.5) 50%, transparent 70%)",width:"200%",height:"200%",top:"-50%",left:"-50%",animation:"image-regeneration-shimmer 2s ease-in-out infinite"}})})]}),!T.isRegenerating&&!T.hasVariants&&!_&&(0,a.jsx)("div",{className:"absolute inset-0 flex items-center justify-center transition-all bg-black/60 opacity-0 group-hover:opacity-100 duration-300 z-20",children:(0,a.jsxs)(A.Button,{variant:"secondary",size:"sm",onClick:()=>{S.current?.click(),setTimeout(()=>{document.activeElement instanceof HTMLElement&&document.activeElement.blur()},100)},disabled:N,className:"z-30",children:[(0,a.jsx)(to.CloudUpload,{className:"w-4 h-4 mr-2"}),(0,a.jsx)("span",{children:N?"Uploading...":"Upload File"})]})})]}),(0,a.jsx)("input",{ref:S,type:"file",accept:"image/*",onChange:M,className:"hidden"}),T.isRegenerating?(0,a.jsx)(tu.TransitionNode,{...tu.PRESETS.fade,children:(0,a.jsx)(td.SpinnerButton,{pending:!0,variant:"default",size:"xs",className:"w-full min-h-[30px] rounded-md",disabled:!0,children:"Regenerating"})}):T.hasError?(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 p-3 bg-v0-red-200 border border-v0-red-300 rounded-md",children:[(0,a.jsxs)("svg",{className:"w-5 h-5 text-v0-gray-1000 flex-shrink-0",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[(0,a.jsx)("circle",{cx:"12",cy:"12",r:"10"}),(0,a.jsx)("line",{x1:"15",y1:"9",x2:"9",y2:"15"}),(0,a.jsx)("line",{x1:"9",y1:"9",x2:"15",y2:"15"})]}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("p",{className:"text-sm font-medium text-v0-gray-1000",children:"Regeneration Failed"}),(0,a.jsx)("p",{className:"text-xs text-v0-gray-1000 mt-1",children:T.regenerationState.errorMessage||"An error occurred while regenerating the image."})]})]}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsxs)(A.Button,{variant:"secondary",size:"xs",className:"flex-1 rounded-md",onClick:T.retryRegeneration,disabled:!I,children:[(0,a.jsx)(tl.RotateCounterClockwise,{className:"w-2.5 h-2.5 !text-v0-gray-900"}),"Try Again"]}),(0,a.jsx)(A.Button,{variant:"outline",size:"xs",className:"flex-1 rounded-md",onClick:T.resetToIdle,children:"Cancel"})]})]}):!function(e,t){if(!e.hasVariants)return!1;let n=sg(t);return e.regenerationState.variants.length>=(n?3:2)}(T,I)?(0,a.jsx)(tu.TransitionNode,{...tu.PRESETS.fade,renderKey:_?"prompt":"buttons",children:_?(0,a.jsxs)("div",{className:"flex w-full items-end rounded-md border !border-v0-alpha-400 bg-v0-background-300 text-sm focus-within:!border-v0-alpha-600 hover:!border-v0-alpha-500 focus-within:hover:!border-v0-alpha-600 min-h-[30px] px-1.5 py-1",children:[(0,a.jsx)("textarea",{ref:O,value:D,onChange:e=>{F(e.target.value),$(e.target)},onKeyDown:e=>{"Enter"===e.key&&!e.shiftKey&&D.trim()?(e.preventDefault(),V()):"Escape"===e.key&&(P(!1),F(""))},placeholder:"Describe your changes...",rows:1,className:"flex-1 bg-transparent border-0 outline-0 text-sm placeholder:text-v0-gray-600 placeholder:font-geist placeholder:font-normal resize-none leading-tighter",style:{minHeight:"20px"},autoFocus:!0}),D.trim()?(0,a.jsx)("button",{type:"button",className:"ml-2 h-4 w-4 p-0 flex items-center justify-center text-v0-gray-600 hover:text-v0-gray-900 dark:hover:text-v0-gray-100 transition-all duration-200 ease-in-out flex-shrink-0 self-center rounded",onClick:()=>void V(),children:(0,a.jsx)(tc.ArrowUp,{className:"w-4 h-4"})}):(0,a.jsx)("kbd",{className:"ml-2 h-5 w-auto px-1 py-0 flex items-center justify-center text-v0-gray-600 transition-all duration-200 ease-in-out flex-shrink-0 self-center rounded-md border border-v0-alpha-100 dark:border-v0-alpha-200 bg-v0-background-200 dark:bg-v0-alpha-200 tracking-[-0.1em] cursor-pointer font-mono font-medium text-[11px]",onClick:()=>{P(!1),F("")},children:"Esc"})]}):B()}):(0,a.jsxs)("div",{className:"space-y-3",children:[H(),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)(A.Button,{variant:"outline",size:"xs",className:"flex-1 aspect-square p-0",onClick:T.declineRegeneration,children:(0,a.jsxs)("svg",{className:"w-4 h-4 text-v0-gray-1000",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[(0,a.jsx)("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),(0,a.jsx)("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})}),(0,a.jsx)(A.Button,{size:"xs",className:"flex-1 aspect-square p-0 bg-v0-blue-700 hover:bg-v0-blue-600 text-v0-white border-0",onClick:T.acceptRegeneration,disabled:null===T.regenerationState.selectedIndex,children:(0,a.jsx)("svg",{className:"w-4 h-4",viewBox:"0 0 24 24",fill:"none",stroke:"white",strokeWidth:"2",children:(0,a.jsx)("polyline",{points:"20,6 9,17 4,12"})})})]})]})]})}):null,d.content?(0,a.jsx)(sk,{title:"Content",children:(0,a.jsx)(sC,{value:d.content.value,onUpdate:r,type:d.content.type})}):null,j?null:(0,a.jsxs)(sk,{title:"Typography",children:[(0,a.jsx)(sO,{title:"Font Family",onUpdate:n,classNames:e,breakpoint:d.info?.activeBreakpoint,type:"dropdown",options:[{display:(0,a.jsx)("span",{className:"text-v0-gray-900",children:"Default"}),value:"",fallback:!0},{display:"Sans Serif",value:"font-sans"},{display:"Serif",value:"font-serif"},{display:"Monospace",value:"font-mono"}]}),(0,a.jsxs)("div",{className:"flex w-full gap-3",children:[(0,a.jsx)(sO,{title:"Weight",onUpdate:n,classNames:e,fallbackValue:sD[d.info?.fontWeight||"400"],breakpoint:d.info?.activeBreakpoint,type:"dropdown",options:[{display:"Thin",value:"font-thin"},{display:"Extra Light",value:"font-extralight"},{display:"Light",value:"font-light"},{display:"Regular",value:"font-normal"},{display:"Medium",value:"font-medium"},{display:"Semi Bold",value:"font-semibold"},{display:"Bold",value:"font-bold"},{display:"Extra Bold",value:"font-extrabold"},{display:"Black",value:"font-black"}]}),(0,a.jsx)(sO,{title:"Size",onUpdate:n,classNames:e,breakpoint:d.info?.activeBreakpoint,type:"dropdown",match:e=>/^text-\[[\d.]+(px|em|rem|pt|%)\]$/.test(e),options:[{display:(0,a.jsx)("span",{className:"text-v0-gray-900",children:"Default"}),value:"",fallback:!0},{display:"xs",value:"text-xs"},{display:"sm",value:"text-sm"},{display:"base",value:"text-base"},{display:"lg",value:"text-lg"},{display:"xl",value:"text-xl"},{display:"2xl",value:"text-2xl"},{display:"3xl",value:"text-3xl"},{display:"4xl",value:"text-4xl"},{display:"5xl",value:"text-5xl"},{display:"6xl",value:"text-6xl"},{display:"7xl",value:"text-7xl"},{display:"8xl",value:"text-8xl"},{display:"9xl",value:"text-9xl"}]})]}),(0,a.jsxs)("div",{className:"flex w-full flex-wrap gap-3",children:[(0,a.jsxs)("div",{className:"flex flex-1 flex-col gap-1.5",children:[(0,a.jsx)("label",{className:"text-label-12 select-none capitalize leading-4 opacity-60",children:"Line Height"}),(0,a.jsx)(sH,{title:"Line Height",classNames:e,breakpoint:d.info?.activeBreakpoint,presets:sI,icon:null,prefix:"leading",defaultValue:4,step:.05,generate:(e,t)=>`${e}-${"number"==typeof t?sN[t]:`[${t}]`}`,match:e=>{let t=e.match(/^leading-(.+)$/);if(t&&t[1]){let e=sN.indexOf(t[1]);if(-1!==e)return["leading",e];if(t[1].startsWith("[")&&t[1].endsWith("]"))return["leading",t[1].slice(1,-1)]}return null},min:0,max:sN.length-1,onUpdate:n})]}),(0,a.jsxs)("div",{className:"flex flex-1 flex-col gap-1.5",children:[(0,a.jsx)("label",{className:"text-label-12 select-none capitalize leading-4 opacity-60",children:"Letter Spacing"}),(0,a.jsx)(sH,{title:"Letter Spacing",classNames:e,breakpoint:d.info?.activeBreakpoint,presets:sE,icon:null,prefix:"tracking",defaultValue:2,step:.01,allowNegative:!0,generate:(e,t)=>`${e}-${"number"==typeof t?sT[t]:`[${t}]`}`,match:e=>{let t=e.match(/^tracking-(.+)$/);if(t&&t[1]){let e=sT.indexOf(t[1]);if(-1!==e)return["tracking",e];if(t[1].startsWith("[")&&t[1].endsWith("]"))return["tracking",t[1].slice(1,-1)]}return null},min:0,max:sT.length-1,onUpdate:n})]})]}),(0,a.jsxs)("div",{className:"flex w-full flex-wrap gap-3",children:[(0,a.jsx)(sO,{title:"Alignment",onUpdate:n,classNames:e,breakpoint:d.info?.activeBreakpoint,options:[{display:(0,a.jsx)(tP.Undo,{className:"opacity-50"}),value:"",fallback:!0,title:"Reset"},{display:(0,a.jsx)(tr.AlignmentLeft,{}),value:"text-left",title:"Align Left"},{display:(0,a.jsx)(ts,{}),value:"text-center",title:"Align Center"},{display:(0,a.jsx)(ti,{}),value:"text-right",title:"Align Right"},{display:(0,a.jsx)(ta,{}),value:"text-justify",title:"Justify"}]}),(0,a.jsx)(s$,{title:"Decoration",onUpdate:n,classNames:e,breakpoint:d.info?.activeBreakpoint,options:[{display:(0,a.jsx)(e7,{}),value:"italic",title:"Italic"},{display:(0,a.jsx)(te,{}),value:"line-through",title:"Strikethrough",conflict:["underline","overline"]},{display:(0,a.jsx)(tP.TextUnderline,{}),value:"underline",title:"Underline",conflict:["line-through","overline"]},{display:(0,a.jsx)(tP.TextOverline,{}),value:"overline",title:"Overline",conflict:["line-through","underline"]},{display:(0,a.jsx)(tP.TextTabularNumbers,{}),value:"tabular-nums",title:"Tabular Numbers"}]})]})]}),(0,a.jsx)(sk,{title:"Color",children:(0,a.jsx)(sU,{title:"Color",fallback:!0,onUpdate:n,classNames:e,computedColor:d.info?.color,tokens:b,prefix:"text-",match:e=>{if(!e.startsWith("text-"))return null;let t=e.slice(5);return(/\/\d+$/.test(t)&&(t=t.slice(0,t.lastIndexOf("/"))),sR.includes(t)||b?.[t]||t&&/^[a-z]+-(|1|2|3|4|5|6|7|8|9)(00|50)$/.test(t)||t&&t.startsWith("[rgb"))?e:null}})}),(0,a.jsx)(sk,{title:"Background",children:(0,a.jsx)("div",{className:"flex w-full gap-3",children:(0,a.jsx)(sU,{title:"Background Color",fallback:!0,onUpdate:n,classNames:e,computedColor:d.info?.backgroundColor,tokens:b,prefix:"bg-",match:e=>{if(!e.startsWith("bg-"))return null;let t=e.slice(3);return(/\/\d+$/.test(t)&&(t=t.slice(0,t.lastIndexOf("/"))),sR.includes(t)||b?.[t]||t&&/^[a-z]+-(|1|2|3|4|5|6|7|8|9)(00|50)$/.test(t)||t&&t.startsWith("[rgb"))?e:null}})})}),(0,a.jsxs)(sk,{title:"Layout",children:[t.flex?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"flex w-full gap-3",children:(0,a.jsx)(sO,{title:"Direction",onUpdate:n,classNames:e,breakpoint:d.info?.activeBreakpoint,options:[{display:(0,a.jsx)(tt,{}),value:"flex-row",title:"Row",fallback:!0},{display:(0,a.jsx)(tn,{}),title:"Column",value:"flex-col"}]})}),(0,a.jsxs)("div",{className:"flex w-full flex-wrap gap-3",children:[(0,a.jsx)("div",{className:"flex-1",children:(0,a.jsx)(sO,{title:"Alignment",showTitle:!0,onUpdate:n,classNames:e,breakpoint:d.info?.activeBreakpoint,options:[{display:t.flexColumn?(0,a.jsx)(tP.AlignColStretch,{}):(0,a.jsx)(tP.AlignRowStretch,{}),value:"items-stretch",title:"Align Stretch",fallback:!0},{display:t.flexColumn?(0,a.jsx)(tP.AlignColStart,{}):(0,a.jsx)(tP.AlignRowStart,{}),value:"items-start",title:"Align Start"},{display:t.flexColumn?(0,a.jsx)(tP.AlignColCenter,{}):(0,a.jsx)(tP.AlignRowCenter,{}),value:"items-center",title:"Align Center"},{display:t.flexColumn?(0,a.jsx)(tP.AlignColEnd,{}):(0,a.jsx)(tP.AlignRowEnd,{}),value:"items-end",title:"Align End"}]})}),(0,a.jsx)("div",{className:"flex-1",children:(0,a.jsx)(sO,{title:"Justification",showTitle:!0,type:"dropdown",onUpdate:n,classNames:e,breakpoint:d.info?.activeBreakpoint,options:[{display:"Start",value:"justify-start",title:"Justify Start",fallback:!0},{display:"Center",value:"justify-center",title:"Justify Center"},{display:"End",value:"justify-end",title:"Justify End"},{display:"Space Between",value:"justify-between",title:"Justify Space Between"},{display:"Space Around",value:"justify-around",title:"Justify Space Around"},{display:"Space Evenly",value:"justify-evenly",title:"Justify Space Evenly"},{display:"Stretch",value:"justify-stretch",title:"Justify Stretch"}]})})]}),t.showGap?(0,a.jsx)(sB,{title:"Gap",showTitle:!0,allowIconSliding:!0,classNames:e,breakpoint:d.info?.activeBreakpoint,prefix:"gap",...t.flexColumn?{prefixY:"gap-y"}:{prefixX:"gap-x"},icon:t.flexColumn?(0,a.jsx)(tP.GapY,{}):(0,a.jsx)(tP.GapX,{}),generate:(e,t)=>`${e}-${"number"==typeof t?sL[t]:`[${t}]`}`,match:e=>{let t=e.match(/^(gap|gap-x|gap-y|gap-t|gap-r|gap-b|gap-l)-([^-]+)$/);if(t&&t[1]&&t[2]){let e=t[1],n=sL.indexOf(t[2]);if(-1!==n)return[e,n];if(t[2].startsWith("[")&&t[2].endsWith("]"))return[e,t[2].slice(1,-1)]}return null},min:0,max:sL.length-1,onUpdate:n}):(0,a.jsx)(sB,{title:"Gap",showTitle:!0,classNames:e,breakpoint:d.info?.activeBreakpoint,prefix:t.flexColumn?"space-y":"space-x",icon:t.flexColumn?(0,a.jsx)(tP.GapY,{}):(0,a.jsx)(tP.GapX,{}),generate:(e,t)=>`${e}-${"number"==typeof t?sL[t]:`[${t}]`}`,match:e=>{let t=e.match(/^(space-x|space-y)-([^-]+)$/);if(t&&t[1]&&t[2]){let e=t[1],n=sL.indexOf(t[2]);if(-1!==n)return[e,n];if(t[2].startsWith("[")&&t[2].endsWith("]"))return[e,t[2].slice(1,-1)]}return null},min:0,max:sL.length-1,onUpdate:n})]}):(0,a.jsx)(a.Fragment,{children:t.showGap?(0,a.jsx)(sB,{title:"Gap",showTitle:!0,allowIconSliding:!0,classNames:e,breakpoint:d.info?.activeBreakpoint,prefix:"gap",...t.flexColumn?{prefixY:"gap-y"}:{prefixX:"gap-x"},icon:t.flexColumn?(0,a.jsx)(tP.GapY,{}):(0,a.jsx)(tP.GapX,{}),generate:(e,t)=>`${e}-${"number"==typeof t?sL[t]:`[${t}]`}`,match:e=>{let t=e.match(/^(gap|gap-x|gap-y|gap-t|gap-r|gap-b|gap-l)-([^-]+)$/);if(t&&t[1]&&t[2]){let e=t[1],n=sL.indexOf(t[2]);if(-1!==n)return[e,n];if(t[2].startsWith("[")&&t[2].endsWith("]"))return[e,t[2].slice(1,-1)]}return null},min:0,max:sL.length-1,onUpdate:n}):t.space?(0,a.jsx)(sB,{title:"Gap",showTitle:!0,classNames:e,breakpoint:d.info?.activeBreakpoint,prefix:"space",prefixX:"space-x",prefixY:"space-y",icon:(0,a.jsx)(tP.GapX,{}),iconX:(0,a.jsx)(tP.GapX,{}),iconY:(0,a.jsx)(tP.GapY,{}),allowIconSliding:!0,generate:(e,t)=>`${e}-${"number"==typeof t?sL[t]:`[${t}]`}`,match:e=>{let t=e.match(/^(space-x|space-y)-([^-]+)$/);if(t&&t[1]&&t[2]){let e=t[1],n=sL.indexOf(t[2]);if(-1!==n)return[e,n];if(t[2].startsWith("[")&&t[2].endsWith("]"))return[e,t[2].slice(1,-1)]}return null},min:0,max:sL.length-1,onUpdate:n}):null}),(0,a.jsx)(sB,{title:"Margin",showTitle:!0,classNames:e,breakpoint:d.info?.activeBreakpoint,allowNegative:!0,prefix:"m",prefixX:"mx",prefixY:"my",prefixT:"mt",prefixR:"mr",prefixB:"mb",prefixL:"ml",iconX:(0,a.jsx)(tP.MarginX,{}),iconY:(0,a.jsx)(tP.MarginY,{}),iconT:(0,a.jsx)(tP.MarginTop,{}),iconR:(0,a.jsx)(tP.MarginRight,{}),iconB:(0,a.jsx)(tP.MarginBottom,{}),iconL:(0,a.jsx)(tP.MarginLeft,{}),presets:sP,generate:(e,t)=>`${e}-${"number"==typeof t?sP[t][0]:`[${t}]`}`,match:e=>{let t=e.match(/^(m|mx|my|mt|mr|mb|ml)-(.+)$/);if(t&&t[1]&&t[2]){let e=t[1],n=sP.findIndex(([e])=>e===t[2]);if(-1!==n)return[e,n];if(t[2].startsWith("[")&&t[2].endsWith("]"))return[e,t[2].slice(1,-1)]}return null},min:0,allowIconSliding:!0,max:sP.length-1,onUpdate:n}),(0,a.jsx)(sB,{title:"Padding",showTitle:!0,classNames:e,breakpoint:d.info?.activeBreakpoint,prefix:"p",prefixX:"px",prefixY:"py",prefixT:"pt",prefixR:"pr",prefixB:"pb",prefixL:"pl",iconX:(0,a.jsx)(tP.PaddingX,{}),iconY:(0,a.jsx)(tP.PaddingY,{}),iconT:(0,a.jsx)(tP.PaddingTop,{}),iconR:(0,a.jsx)(tP.PaddingRight,{}),iconB:(0,a.jsx)(tP.PaddingBottom,{}),iconL:(0,a.jsx)(tP.PaddingLeft,{}),allowIconSliding:!0,generate:(e,t)=>`${e}-${"number"==typeof t?sL[t]:`[${t}]`}`,match:e=>{let t=e.match(/^(p|px|py|pt|pr|pb|pl)-([^-]+)$/);if(t&&t[1]&&t[2]){let e=t[1],n=sL.indexOf(t[2]);if(-1!==n)return[e,n];if(t[2].startsWith("[")&&t[2].endsWith("]"))return[e,t[2].slice(1,-1)]}return null},min:0,max:sL.length-1,onUpdate:n})]}),C?(0,a.jsx)(sk,{title:"Size",children:(0,a.jsx)("div",{className:"flex w-full gap-3",children:(0,a.jsx)(sB,{title:"Size",classNames:e,breakpoint:d.info?.activeBreakpoint,presets:sA,prefix:"size",prefixX:"w",prefixY:"h",defaultValue:"auto",iconX:(0,a.jsx)(tt,{}),iconY:(0,a.jsx)(tt,{className:"rotate-90"}),generate:(e,t)=>`${e}-${"number"==typeof t?sA[t][0]:`[${t}]`}`,allowIconSliding:!0,match:e=>{let t=e.match(/^(size|w|h)-([^-]+)$/);if(t){let e=t[1],n=sA.findIndex(([e])=>e===t[2]);if(-1!==n)return[e,n];if(t[2].startsWith("[")&&t[2].endsWith("]"))return[e,t[2].slice(1,-1)]}return null},min:0,max:sA.length-1,onUpdate:n})})}):null,(0,a.jsxs)(sk,{title:"Border",children:[(0,a.jsxs)("div",{className:"flex w-full gap-3",children:[(0,a.jsx)(sU,{title:"Border Color",fallback:!0,onUpdate:n,classNames:e,computedColor:d.info?.borderColor,tokens:b,prefix:"border-",match:e=>{if(!e.startsWith("border-"))return null;let t=e.slice(7);return(/\/\d+$/.test(t)&&(t=t.slice(0,t.lastIndexOf("/"))),sR.includes(t)||b?.[t]||t&&/^[a-z]+-(|1|2|3|4|5|6|7|8|9)(00|50)$/.test(t)||t&&t.startsWith("[rgba"))?e:null}}),(0,a.jsx)(sO,{title:"Border Style",onUpdate:n,classNames:e,breakpoint:d.info?.activeBreakpoint,type:"dropdown",options:[{display:(0,a.jsx)("span",{className:"text-v0-gray-900",children:"Default"}),value:"",fallback:!0},{display:"None",value:"border-none"},{display:"Solid",value:"border-solid"},{display:"Dashed",value:"border-dashed"},{display:"Dotted",value:"border-dotted"},{display:"Double",value:"border-double"}]})]}),(0,a.jsx)(sB,{title:"Border Width",classNames:e,breakpoint:d.info?.activeBreakpoint,presets:sM,prefix:"border",prefixT:"border-t",prefixR:"border-r",prefixB:"border-b",prefixL:"border-l",icon:(0,a.jsx)(tP.BorderWeight,{}),iconT:(0,a.jsx)(tP.BorderTop,{}),iconR:(0,a.jsx)(tP.BorderRight,{}),iconB:(0,a.jsx)(tP.BorderBottom,{}),iconL:(0,a.jsx)(tP.BorderLeft,{}),allowIconSliding:!0,generate:(e,t)=>"number"==typeof t?sS[t]?`${e}-${sS[t]}`:e:`${e}-[${t}]`,match:e=>{let t=e.match(/^(border|border-t|border-r|border-b|border-l)-([^-]+)$/);if(t){let e=t[1],n=sS.indexOf(t[2]);if(-1!==n)return[e,n];if(t[2].startsWith("[")&&t[2].endsWith("]"))return[e,t[2].slice(1,-1)]}let n=e.match(/^(border|border-t|border-r|border-b|border-l)$/);if(n){let e=n[1],t=sS.indexOf("");if(-1!==t)return[e,t]}return null},min:0,max:sS.length-1,onUpdate:n})]}),(0,a.jsx)(sk,{title:"Appearance",children:(0,a.jsxs)("div",{className:"flex w-full flex-wrap gap-3",children:[(0,a.jsxs)("div",{className:"flex flex-1 flex-col gap-1.5",children:[(0,a.jsx)("label",{className:"text-label-12 select-none capitalize leading-4 opacity-60",children:"Opacity"}),(0,a.jsx)(sH,{title:"Opacity",classNames:e,breakpoint:d.info?.activeBreakpoint,prefix:"opacity",defaultValue:100,step:1,presets:sF,icon:(0,a.jsx)(e8,{}),suffix:(0,a.jsx)("span",{className:"text-sm text-v0-gray-900",children:"%"}),generate:(e,t)=>{if(0===t)return"opacity-0";if("number"==typeof t)return`opacity-${5*t}`;let n=parseFloat(t);return isNaN(n)||n<0||n>100?null:`opacity-[${n<1?n:n/100}]`},match:e=>{let t=e.match(/^opacity-\[?([.0-9]+)\]?$/);if(t){let e=Number(t[1]);return["opacity",String(e<1?Math.floor(100*e):e)]}return null},min:0,max:100,onUpdate:n})]}),(0,a.jsxs)("div",{className:"flex flex-1 flex-col gap-1.5",children:[(0,a.jsx)("label",{className:"text-label-12 select-none capitalize leading-4 opacity-60",children:"Radius"}),(0,a.jsx)(sO,{title:"Border Radius",onUpdate:n,classNames:e,breakpoint:d.info?.activeBreakpoint,icon:(0,a.jsx)(tP.Radius,{}),type:"dropdown",match:e=>/^rounded-\[[\d.]+(px|em|rem|pt|%)\]$/.test(e),options:3===y?[{display:(0,a.jsx)("span",{className:"text-v0-gray-900",children:"Default"}),value:"",fallback:!0},{display:"None",value:"rounded-none"},{display:"Small",value:"rounded-sm"},{display:"Normal",value:"rounded"},{display:"Medium",value:"rounded-md"},{display:"Large",value:"rounded-lg"},{display:"Extra Large",value:"rounded-xl"},{display:"Double Extra Large",value:"rounded-2xl"},{display:"Triple Extra Large",value:"rounded-3xl"},{display:"Full",value:"rounded-full"}]:[{display:(0,a.jsx)("span",{className:"text-v0-gray-900",children:"Default"}),value:"",fallback:!0},{display:"None",value:"rounded-none"},{display:"Extra Small",value:"rounded-xs"},{display:"Small",value:"rounded-sm"},{display:"Medium",value:"rounded-md"},{display:"Large",value:"rounded-lg"},{display:"Extra Large",value:"rounded-xl"},{display:"Double Extra Large",value:"rounded-2xl"},{display:"Triple Extra Large",value:"rounded-3xl"},{display:"Quadruple Extra Large",value:"rounded-4xl"},{display:"Full",value:"rounded-full"}]})]})]})}),(0,a.jsx)(sk,{title:"Shadow",children:(0,a.jsx)(sO,{title:"Shadow",onUpdate:n,classNames:e,breakpoint:d.info?.activeBreakpoint,icon:(0,a.jsx)(tP.Shadow,{}),type:"dropdown",options:3===y?[{display:(0,a.jsx)("span",{className:"text-v0-gray-900",children:"Default"}),value:"",fallback:!0},{display:"None",value:"shadow-none"},{display:"Small",value:"shadow-sm"},{display:"Normal",value:"shadow"},{display:"Medium",value:"shadow-md"},{display:"Large",value:"shadow-lg"},{display:"Extra Large",value:"shadow-xl"},{display:"Double Extra Large",value:"shadow-2xl"},{display:"Inner",value:"shadow-inner"}]:[{display:(0,a.jsx)("span",{className:"text-v0-gray-900",children:"Default"}),value:"",fallback:!0},{display:"None",value:"shadow-none"},{display:"Extra Small",value:"shadow-xs"},{display:"Small",value:"shadow-sm"},{display:"Normal",value:"shadow"},{display:"Medium",value:"shadow-md"},{display:"Large",value:"shadow-lg"},{display:"Extra Large",value:"shadow-xl"}]})})]})}function sY(){let{actions:e}=(0,e5.useCurrentBlockDesignMode)(),{pushUndoHistory:t,popUndoHistory:n,popRedoHistory:r,clearHistory:s}=e,i=(0,l.useCallback)((e,n)=>{eZ.designModeInlineEditRef.current&&(n||"string"==typeof(n=eZ.designModeInlineEditRef.current.getContent(e)))&&t(e,n)},[t]);return(0,tN.useEventListener)("dm-undo",()=>n(eZ.designModeInlineEditRef)),(0,tN.useEventListener)("dm-redo",()=>r(eZ.designModeInlineEditRef)),(0,l.useEffect)(()=>{let e=e=>{(e.metaKey||e.ctrlKey)&&("z"!==e.key||e.shiftKey?("y"===e.key||"z"===e.key&&e.shiftKey)&&(e.preventDefault(),r(eZ.designModeInlineEditRef)):(e.preventDefault(),n(eZ.designModeInlineEditRef)))};return window.addEventListener("keydown",e),()=>{window.removeEventListener("keydown",e)}},[n,r]),{pushHistory:i,performUndo:()=>n(eZ.designModeInlineEditRef),performRedo:()=>r(eZ.designModeInlineEditRef),clearHistory:s}}var sJ=e.i(393799);function sK(){let{atoms:e,actions:t}=(0,e5.useCurrentBlockDesignMode)(),{setLastFileContent:n,setSaveNextState:r,setLastIsPreview:s}=t,i=(0,sJ.useAtomValue)(e.currentQueue),a=(0,sJ.useAtomValue)(e.lastFileContent),o=(0,sJ.useAtomValue)(e.saveNextState),c=(0,sJ.useAtomValue)(e.lastIsPreview);return{queueVersion:(0,l.useCallback)((e,t,n)=>{(0!==i.current.length||n())&&(i.current[i.current.length-1]?.[0]===e?i.current=[...i.current.slice(0,-1),[e,t,n]]:i.current=[...i.current,[e,t,n]])},[i]),lastFileContent:a,saveNextState:o,lastIsPreview:c,currentQueue:i,setLastFileContent:n,setSaveNextState:r,setLastIsPreview:s}}var sQ=e.i(577745),s0=e.i(926224),s1=e.i(462222),s2=e.i(48008),s5=e.i(974980);e.i(472428);var s3=e.i(542245),s4=(0,I.createServerReference)("7f3a2fc24f326312f0987ee78fadb3a16fdaa96268",I.callServer,void 0,I.findSourceMapURL,"applyDesignSystemRegistry"),s6=e.i(455552),s9=e.i(204575),s8=e.i(476371),s7=e.i(276221);function ie(e){return e.replace(/\s+/g," ").trim()}var it=e.i(671908);let ir=["app/layout.tsx","src/app/layout.tsx"];function is(e){for(let t of ir)if(e.some(e=>e.meta.file===t))return t;return"app/layout.tsx"}function ii(e){if(!e)return null;let t=is(e);return e.find(e=>e.meta.file===t)??null}let ia=`import type { Metadata } from 'next'
import { GeistSans } from 'geist/font/sans'
import { GeistMono } from 'geist/font/mono'
import { Analytics } from '@vercel/analytics/next'
import './globals.css'

export const metadata: Metadata = {
  title: 'v0 App',
  description: 'Created with v0',
  generator: 'v0.app',
}

export default function RootLayout({
  children,
}: Readonly<{
  children: React.ReactNode
}>) {
  return (
    <html lang="en">
      <body className={\`font-sans antialiased \${GeistSans.variable} \${GeistMono.variable}\`}>
        {children}
        <Analytics />
      </body>
    </html>
  )
}

`,io=`import type { Metadata } from 'next'
import { Geist, Geist_Mono } from 'next/font/google'
import { Analytics } from '@vercel/analytics/next'
import './globals.css'

const _geist = Geist({ subsets: ["latin"] });
const _geistMono = Geist_Mono({ subsets: ["latin"] });

export const metadata: Metadata = {
  title: 'v0 App',
  description: 'Created with v0',
  generator: 'v0.app',
}

export default function RootLayout({
  children,
}: Readonly<{
  children: React.ReactNode
}>) {
  return (
    <html lang="en">
      <body className={\`font-sans antialiased\`}>
        {children}
        <Analytics />
      </body>
    </html>
  )
}

`,il=/([\p{Ll}\d])(\p{Lu})/gu,ic=/(\p{Lu})([\p{Lu}][\p{Ll}])/gu,id=/(\d)\p{Ll}|(\p{L})\d/u,iu=/[^\p{L}\d]+/giu,ih="$1\0$2";function ip(e){let t=e.trim();t=(t=t.replace(il,ih).replace(ic,ih)).replace(iu,"\0");let n=0,r=t.length;for(;"\0"===t.charAt(n);)n++;if(n===r)return[];for(;"\0"===t.charAt(r-1);)r--;return t.slice(n,r).split(/\0/g)}function im(e){let t=ip(e);for(let e=0;e<t.length;e++){let n=t[e],r=id.exec(n);if(r){let s=r.index+(r[1]??r[2]).length;t.splice(e,1,n.slice(0,s),n.slice(s))}}return t}function ig(e,t){var n,r;let[s,i,a]=iy(e,t),o=ix(t?.locale),l=iv(t?.locale),c=t?.mergeAmbiguousCharacters?ib(o,l):(n=o,r=l,(e,t)=>{let s=e[0];return(t>0&&s>="0"&&s<="9"?"_"+s:r(s))+n(e.slice(1))});return s+i.map((e,t)=>0===t?o(e):c(e,t)).join(t?.delimiter??"")+a}function ix(e){return!1===e?e=>e.toLowerCase():t=>t.toLocaleLowerCase(e)}function iv(e){return!1===e?e=>e.toUpperCase():t=>t.toLocaleUpperCase(e)}function ib(e,t){return n=>`${t(n[0])}${e(n.slice(1))}`}function iy(e,t={}){let n=t.split??(t.separateNumbers?im:ip),r=t.prefixCharacters??"",s=t.suffixCharacters??"",i=0,a=e.length;for(;i<e.length;){let t=e.charAt(i);if(!r.includes(t))break;i++}for(;a>i;){let t=a-1,n=e.charAt(t);if(!s.includes(n))break;a=t}return[e.slice(0,i),n(e.slice(i,a)),e.slice(a)]}var ij=e.i(567407),iw=e.i(952946),ik=e.i(137134);function iC(e,t,n){if(e.split("\n").length<t)throw Error("Line out of bounds");let r=e.split("\n"),s=r[t];return r[t]=s+n,r.join("\n")}function iS(e){return e.replace(/(\n)?\/\/ Initialize fonts\n(?:\s*(?:const\s+\w+\s*=\s*)?V0_Font_[A-Za-z0-9_]+\([^)]*\)\s*\n*)+(?:\s*const\s+_v0_fontVariables\s*=\s*`[^`]*`\s*\n*)?/gs,"\n").replace(/(\n)?\/\/ Initialize fonts\n/g,"\n")}function iM(e){return e.replace(/\n{3,}/g,"\n\n")}function iN(e,t){if(0===t.length)return e;let n="_v0_fontVariables";return e.replace(/<body([^>]*?)>/s,(e,t)=>{let r=-1,s=-1,i=!1,a=!1,o="",l=t.match(/className\s*=\s*/);if(!l)return`<body${t} className={${n}}>`;let c=t.indexOf(l[0]),d=c+l[0].length;if("{"===t[d]){i=!0,r=d;let e=0,n=!1,a="";for(let r=d;r<t.length;r++){let i=t[r];if(n)i===a&&"\\"!==t[r-1]&&(n=!1,a="");else if('"'===i||"'"===i||"`"===i)n=!0,a=i;else if("{"===i)e++;else if("}"===i&&0==--e){s=r+1;break}}}else if('"'===t[d]||"'"===t[d]){a=!0,o=t[d],r=d;for(let e=d+1;e<t.length;e++)if(t[e]===o&&"\\"!==t[e-1]){s=e+1;break}}if(-1===r||-1===s)return`<body${t} className={${n}}>`;let u=t.slice(r,s),h=t.slice(0,c),p=t.slice(c+l[0].length+u.length);if(i){let e=u.slice(1,-1);if(e.includes("_v0_fontVariables"));else{let t=e.trim();if('""'===t||"''"===t){let e=`className={${n}}`;return`<body${h}${e}${p}>`}if(t.startsWith("`")&&t.endsWith("`")){let e=t.slice(1,-1),r=`className={\`${e} \${${n}}\`}`;return`<body${h}${r}${p}>`}{let t=`className={${e} + " " + ${n}}`;return`<body${h}${t}${p}>`}}}else if(a){let e=u.slice(1,-1),t=e.trim()?`className={\`${e} \${${n}}\`}`:`className={${n}}`;return`<body${h}${t}${p}>`}return e})}function iI({layoutFile:e,styles:t,isNext14:n}){if(!ir.includes(e.meta.file)||!ij.SHADCN_FONT_TOKENS.filter(e=>t.common[e]).length)return{content:e.source,changed:!1};let r=(0,ik.getFontsToApply)(t);if(!r.length)return{content:e.source,changed:!1};let s=function(e){let t=e.split("\n"),n=[];for(let e=0;e<t.length;e++){let r=t[e];if(!r)continue;let s=r.trim();if(!(!s||s.startsWith("//")||s.startsWith("/*"))&&s.startsWith("import ")){let r=e,i=s,a=e,o=t[e];if(!o)continue;let l=o.indexOf("import");if(!s.includes(";")&&!s.endsWith("}'")&&!s.endsWith('}"')&&!s.endsWith('"`')&&!s.endsWith("'")&&!s.endsWith('"')){let n=e+1;for(;n<t.length;){let r=t[n];if(!r){n++;continue}let s=r.trim();if(i+=" "+s,a=n,s.includes(";")||s.endsWith("}'")||s.endsWith('}"')||s.endsWith('"`')||s.endsWith("'")||s.endsWith('"')){e=n;break}n++}}let c=t[a];if(!c)continue;let d=c.length;r===a&&(d=l+i.length),n.push({import:i,startLine:r,endLine:a,startIndex:l,endIndex:d})}}return n}(e.source),i=s.find(e=>e.import.includes("next/font/google")),a=e.source,o=i&&function(e){let t=/^import\s*\{([^}]*)\}\s*from\s*['"](.*)['"]$/,n=/^import\s*\*\s*as\s*([a-zA-Z0-9_$]+)\s*from\s*['"](.*)['"]$/,r=/^import\s+([a-zA-Z0-9_$]+)\s*from\s*['"](.*)['"]$/;if(t.test(e)){let n=e.match(t)[1];return n?{type:"named",names:n.split(",").map(e=>e.trim()).filter(Boolean).map(e=>{let[t,n]=e.split(/\s+as\s+/).map(e=>e.trim());return t?n?{name:t,alias:n}:{name:t}:null}).filter(e=>null!==e)}:{type:"none"}}if(n.test(e)){let t=e.match(n)[1];return t?{type:"namespace",names:{name:t}}:{type:"none"}}if(r.test(e)){let t=e.match(r)[1];return t?{type:"default",name:t}:{type:"none"}}return/^import\s+['"](.*)['"]$/.test(e),{type:"none"}}(i.import);if(o&&"named"===o.type){let e=s[s.length-1],t=e?e.endLine:0;a=(a=(a=iS(a)).replace(/const _geist = Geist\(\{[^}]*\}\);?\s*\n?/g,"")).replace(/const _geistMono = Geist_Mono\(\{[^}]*\}\);?\s*\n?/g,"");let d=new Set;for(let e of o.names)if(e.alias&&e.alias.startsWith("V0_Font_")){var l,c;e.alias&&e.alias.startsWith("V0_Font_")&&(l=a,c=e.name,a=l.replace(RegExp(`(^|\\n)[\\t ]*V0_Font_${c}\\([^)]*\\)[\\t ]*(?:\\n|$)`,"g"),"$1").replace(RegExp(`(^|\\n)[\\t ]*const\\s+\\w+\\s*=\\s*V0_Font_${c}\\([^)]*\\)[\\t ]*(?:\\n|$)`,"g"),"$1"))}else{let t="Geist"===e.name||"Geist_Mono"===e.name,n=r.includes(e.name);(!t||n)&&d.add(e.name)}let u=new Set([...d,...r.map(e=>`${e} as V0_Font_${e}`)]),h=`import { ${Array.from(u).join(", ")} } from 'next/font/google'
`,p=r.map(e=>`const _${ig(e)} = V0_Font_${e}({ subsets: ['latin'], weight: ${JSON.stringify((0,iw.getFontAvailableWeights)(e))}${n?`, variable: '--v0-font-${e.toLowerCase().replace(/_/g,"-")}'`:""} })`).join("\n"),f=n?`
const _v0_fontVariables = \`${r.map(e=>`\${_${ig(e)}.variable}`).join(" ")}\``:"";return a=iM(a=iC(a=iS(a=function(e,t,n){let r=e.split("\n");if(t.line===n.line){let s=r[t.line];if(!s)return e;let i=s.slice(0,t.index),a=s.slice(n.index);""===i.trim()&&""===a.trim()?r[t.line]="":r[t.line]=i+a}else{let s=r[t.line],i=r[n.line];if(!s||!i)return e;r[t.line]=s.slice(0,t.index)+i.slice(n.index),r.splice(t.line+1,n.line-t.line),r[t.line]?.trim()===""&&(r[t.line]="")}return r.join("\n")}(a,{line:i.startLine,index:i.startIndex},{line:i.endLine,index:i.endIndex})),t,"\n"+h+"\n// Initialize fonts\n"+p+f+"\n")),n&&(a=iN(a,r)),{content:a,changed:!0}}{let t=s[s.length-1],i=0;if(s.length>0&&t)i=t.endLine;else{let t=e.source.split("\n"),n=t[0]?.trim()||"";i=n.startsWith('"use ')||n.startsWith("'use ")?1:0}let o=`import { ${r.map(e=>`${e} as V0_Font_${e}`).join(", ")} } from 'next/font/google'
`,l=r.map(e=>`const _${ig(e)} = V0_Font_${e}({ subsets: ['latin'], weight: ${JSON.stringify((0,iw.getFontAvailableWeights)(e))}${n?`, variable: '--v0-font-${e.toLowerCase().replace(/_/g,"-")}'`:""} })`).join("\n"),c=n?`
const _v0_fontVariables = \`${r.map(e=>`\${_${ig(e)}.variable}`).join(" ")}\``:"";return a=iM(a=iC(a=iS(a),i,"\n"+o+"\n// Initialize fonts\n"+l+c+"\n\n")),n&&(a=iN(a,r)),{content:a,changed:!0}}}var iT=e.i(514989);function iE(e,t){return function(e){let t;if(!e)return;let n=e["package.json"];if(!n)return;try{t=JSON.parse(n)}catch{return}let r={...t.devDependencies,...t.dependencies}.next;if("string"==typeof r){let e=r.match(/^[\^~>=<]*?(\d+)/);if(e&&e[1]){let t=parseInt(e[1]);if(15===t)return 15;if(14===t)return 14}}}(e)??(t.nextVersion15Default?15:14)}var iL=e.i(387040);function i_({chatId:e,designSystems:t}){let[n,r]=(0,l.useState)(null),[s,i]=(0,l.useState)(null),[a,c]=(0,l.useState)(!1),d=(0,h.useActiveBlockState)(),{latestBlock:u}=(0,m.useBlockHistory)({blockId:d?.id,searchAll:!0}),{actions:p}=(0,e5.useCurrentBlockDesignMode)(),{setPendingDesignSystem:f}=p,g=(0,W.useFlags)().n5ge??!1,x=(0,l.useCallback)(()=>d?{files:"code-project"===d.type?(0,s0.parseMultiFileSource)({source:d.source,blockType:"code-project",blockId:d.id}):[]}:null,[d]),v=(0,l.useCallback)(()=>{if(!d)return null;let e="code-project"===d.type?(0,s0.parseMultiFileSource)({source:d.source,blockType:"code-project",blockId:d.id}):[];if(!e.length)return null;let t={};for(let n of e)t[n.meta.file]=n.source;return t},[d]),b=(0,l.useMemo)(()=>{let e=v();return!!e&&14===iE(e,{nextVersion15Default:g})},[v,g]),y=(0,l.useCallback)(e=>{if(!d)return null;let t=(0,it.getGlobalsCssFromFiles)(e),n=ii(e),r=(0,it.getGlobalsCssPathFromFiles)(e),s=is(e),i=(0,s0.createNewFile)((0,s7.createDefaultGlobals)(),r,"css",d.id),a=(0,s0.createNewFile)(function({nextVersion:e}){return 14===e?ia:io}({nextVersion:b?14:15}),s,"typescriptreact",d.id);return{rootLayout:n??a,globalsCss:t??i,existingGlobalsCssFile:t,existingLayoutFile:n,defaultGlobalsCssFile:i,defaultLayoutFile:a}},[d,b]),j=(0,l.useCallback)(e=>e?t.find(t=>t.designSystemId===e)?.registry:null,[t]),w=(0,l.useCallback)((e,t)=>{let n=j(t);return n?iI({layoutFile:e,styles:(0,iT.getShadcnStyleFromRegistry)(n),isNext14:b}):null},[j,b]),k=(0,l.useCallback)(async()=>{if(e&&d&&!a&&!s){c(!0);try{let n=x();if(!n)return;let{files:r}=n,s=y(r);if(!s)return;let{globalsCss:a}=s,o=[...t.map(e=>e.designSystemId),null].map(async t=>{try{let e={designSystemId:t,globalsCss:a.source,isNext14:b},n=await fetch("/api/design-systems/apply-registry",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!n.ok){let e=await n.text();throw Error(`Failed to apply design system: ${e}`)}let r=await n.json();if(!r.ok)throw r.error;return{id:t||"default",result:r}}catch(n){return(0,N.track)("ApplyDesignSystemError",{designSystemId:t,chatId:e,globalsCssContent:ie(a.source),error:`Failed to fetch design system registry: ${n instanceof Error?n.message:"Request failed"}`}),{id:t||"default",result:(0,iL.err)("Request failed")}}}),l=await Promise.allSettled(o),c={};l.forEach(e=>{if("fulfilled"===e.status){let{id:t,result:n}=e.value;n.ok&&(c[t]=n.value.data)}}),i(c)}catch(t){o.toast.error("There was an error applying the design system. The team has been notified."),(0,N.track)("ApplyDesignSystemError",{designSystemId:null,chatId:e,globalsCssContent:ie(""),error:`Failed to precompute globals with design systems: ${t instanceof Error?t.message:"Unknown error"}`})}finally{c(!1)}}},[e,d,a,s,x,y,t,b]);(0,l.useEffect)(()=>{i(null)},[d?.id]);let C=(0,l.useCallback)(({activeDesignSystemId:e,designSystemId:t})=>{if(!s||!d)return;let n=x();if(!n)return;let{files:i}=n,a=y(i);if(!a)return;let{rootLayout:o,globalsCss:l}=a,c=(0,s9.getBlockIframeId)(d.resultId||d.id),u=document.getElementById(c);if(!u)return;(0,e4.sendToIframeFromBlockId)(d.id,{type:"devtools_revert_design"});let h=s[t||"default"];if(!h)return;let p=w(o,t),f={[l.meta.file]:h,[o.meta.file]:p?.content||o.source},m=(0,s6.getMultiFileSourceMap)((0,s6.updateFilesInFileList)(f,i));(0,s8.updatePreviewImmediate)(u,m),r([e,t])},[s,d,x,y,w]),S=(0,l.useCallback)(async t=>{if(!e||!d)return;let n=({trackError:n,uiError:r,globalsCss:s})=>{(0,N.track)("ApplyDesignSystemError",{designSystemId:t,chatId:e,globalsCssContent:ie(s),error:n}),o.toast.error(r)},s=(0,s9.getBlockIframeId)(d.resultId||d.id);if(!document.getElementById(s))return;let i=x();if(!i)return void n({globalsCss:"",trackError:"Failed to get files and globals CSS: No files found",uiError:"Failed to get files and globals CSS: No files found"});let{files:a}=i,l=y(a);if(!l)return void n({globalsCss:"",trackError:"Failed to prepare default files",uiError:"Failed to prepare default files"});let{globalsCss:c,rootLayout:h}=l,p=await s4({designSystemId:t,globalsCss:c.source,isNext14:b});if(!p.ok)return void n({globalsCss:c.source,trackError:`Failed to apply design system registry: ${p.error instanceof Error?p.error.message:"Unknown registry error"}`,uiError:"There was an error applying the design system. The team has been notified."});let m=p.value,g=w(h,t);if(eZ.designModeInlineEditRef.current&&c.meta.file){let e=[{file:c.meta.file,value:m.data},...g?.changed?[{file:h.meta.file,value:g.content}]:[]];eZ.designModeInlineEditRef.current.bulkFileChange(e)}f({isPending:!0,designSystemId:t}),r(null),t&&(0,N.track)("ApplyDesignSystem",{designSystemId:t,latestBlockId:u?.id||null})},[e,d,x,y,w,f,u?.id,b]);return{preloadFontsInFrame:(0,l.useCallback)(()=>{if(!d)return;let e=(0,s9.getBlockIframeId)(d.resultId||d.id);if(!document.getElementById(e))return;let n=new Set;for(let e of t.map(e=>(0,iT.getShadcnStyleFromRegistry)(e.registry)))for(let t of(0,ik.getFontsToApply)(e))n.add(t);for(let e of n)(0,e4.sendToIframeFromBlockId)(d.id,{type:"preload_google_font",fontId:e})},[d,t]),globalsCssWithDesignSystem:s,isPrecomputingGlobals:a,loadGlobalsWithDesignSystem:k,previewDesignSystem:C,revertPreview:n,setRevertPreview:r,applyDesignSystem:S}}let iP=['@import "tailwindcss"',"@import 'tailwindcss'"];var iA=e.i(819969);function iR(){let e=(0,h.useActiveBlockState)(),{atoms:t}=(0,iA.useCurrentChat)(),n=(0,sJ.useAtomValue)(t.attributes),r=n.ok&&n.value.tailwindV4Default;return{isTWv4:(0,l.useMemo)(()=>{var t,n;if(e?.type!=="code-project")return!1;let s=(0,s0.parseMultiFileSource)({source:e.source,blockType:"code-project",blockId:e.id||""}),i={};for(let e of s)i[e.meta.file]=e.source;return 4===(t=i,n={tailwindV4Default:r},function(e){let t;if(!e)return;let n=e["package.json"];if(!n)return;try{t=JSON.parse(n)}catch{return}let r={...t.devDependencies,...t.dependencies}.tailwindcss;if("string"==typeof r){let e=r.match(/^[\^~>=<]*?(\d+)/);if(e&&e[1]){let t=parseInt(e[1]);if(4===t)return 4;if(3===t)return 3}}}(t)??function(e){if(!e)return;let t=!1,n=!1;for(let[r,s]of Object.entries(e))if(r.endsWith(".css")){if(iP.some(e=>s.includes(e))){t=!0;break}s.includes("@tailwind")&&(n=!0)}return t?4:n?3:void 0}(t)??function(e){if(e&&(e["tailwind.config.js"]||e["tailwind.config.ts"]))return 3}(t)??(n.tailwindV4Default?4:3))},[r,e])}}var iD=e.i(790288),iF=e.i(285945);function iO(e){if(e.startsWith("var(--v0-font-")&&e.endsWith(")")){let t=e.slice(14,-1).split("-").map(e=>{let t=e.toLowerCase();return"pt"===t?"PT":"ibm"===t?"IBM":"dm"===t?"DM":"sc"===t?"SC":e.charAt(0).toUpperCase()+e.slice(1)}).join("_");return t&&(0,iw.isGoogleFont)(t)?t:void 0}let t=e.split(",")[0].trim().replace(/['"]/g,"").replace(/ /g,"_");if(t&&(0,iw.isGoogleFont)(t))return t}var i$=e.i(455891),iV=e.i(403055);function iz({children:e,className:t=""}){return(0,a.jsx)("div",{className:(0,iV.cn)("border-v0-alpha-400 flex flex-col border-b",t),children:e})}function iB({children:e,action:t,onClick:n,className:r}){return(0,a.jsxs)("div",{className:(0,iV.cn)("flex items-center justify-between px-3 py-3",n&&"cursor-pointer hover:text-v0-gray-1000 group",r),onClick:n,children:[(0,a.jsx)("p",{className:"text-label-12 select-none font-medium",children:e}),t]})}function iH(){return(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsx)("span",{className:"text-label-12 text-v0-gray-600 opacity-0 group-hover:opacity-100 group-hover:text-v0-gray-1000 transition-all duration-150",children:"Edit"}),(0,a.jsx)(e$.ChevronRightSmall,{className:"size-4 text-v0-gray-700! group-hover:text-v0-gray-1000!"})]})}function iU({title:e,onBack:t,action:n,className:r}){return(0,a.jsxs)("div",{className:(0,iV.cn)("border-v0-alpha-400 h-13 flex w-full items-center justify-between gap-3 border-b px-3 py-3",r),children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(A.Button,{size:"sm",variant:"ghost",onClick:t,className:"size-7 rounded-md p-0",children:(0,a.jsx)(i$.ArrowLeft,{className:"size-4"})}),(0,a.jsx)("p",{className:"text-label-13 text-v0-gray-900 font-medium",children:e})]}),n&&(0,a.jsx)("div",{className:"flex items-center gap-2",children:n})]})}var iW=e.i(235009);function iq(e){let{atoms:t}=(0,e5.useCurrentBlockDesignMode)(),n=(0,sJ.useAtomValue)(t.previewTheme);return Object.keys(e[n]).length>0?e[n]:Object.keys(e.light).length>0?e.light:{}}function iG({globalsFile:e,fontType:t,fontId:n,isNext14:r}){let s=`--font-${t}`,i=n.replace(/_/g," "),a=r?`var(--v0-font-${n.toLowerCase().replace(/_/g,"-")})`:`'${i}', '${i} Fallback'`,o=e,l=!1,c=o.match(/@theme inline\s*\{([^}]+)\}/s);if(c){let e=function(e,t,n,r){let s=t[1];if(!s)return{updatedContent:e,changed:!1};let i=RegExp(`\\s*${n}:[^;]+;`,"g");if(s.includes(n)){let t=s.replace(i,`
  ${n}: ${r};`);return{updatedContent:e.replace(s,t),changed:!0}}{let t=s.trimEnd()+`
  ${n}: ${r};`;return{updatedContent:e.replace(s,t),changed:!0}}}(o,c,s,a);o=e.updatedContent,l=e.changed||l}else{let e=`
@theme inline {
  ${s}: ${a};
}
`;o=o.trimEnd()+e,l=!0}return{content:o,changed:l}}var iX=e.i(982835),iZ=e.i(616216);function iY({onClick:e}){return(0,a.jsx)("div",{className:"border-b border-v0-gray-200 bg-v0-blue-300 p-3 text-v0-blue-900 mb-4 rounded-md",children:(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsx)("div",{className:"text-sm font-medium mb-1",children:"No Default Font"}),(0,a.jsx)("div",{className:"text-sm mb-3",children:"This generation does not have a default font. Add one to switch font families."}),(0,a.jsxs)(A.Button,{size:"sm",variant:"ghost",className:"h-7 rounded-md px-2 hover:bg-v0-alpha-500 focus-visible:bg-v0-alpha-500 border-transparent bg-v0-alpha-200 text-v0-gray-1000 hover:border-transparent focus:border-transparent focus-visible:border-transparent disabled:border-transparent disabled:bg-v0-alpha-200 disabled:text-v0-gray-500 aria-disabled:border-transparent aria-disabled:bg-v0-alpha-200 aria-disabled:text-v0-gray-500",onClick:e,children:[(0,a.jsx)("span",{children:"Fix with "}),(0,a.jsx)(iZ.V0LoadableLogo,{})]})]})})}let iJ={sans:"font-sans",serif:"font-serif",mono:"font-mono"},iK={"font-sans":"sans","font-serif":"serif","font-mono":"mono"},iQ=(0,l.createContext)(null);function i0({onClick:e}){let t=(0,l.useContext)(iQ);if(!t)return(0,a.jsxs)(iz,{children:[(0,a.jsx)(iB,{onClick:e,className:"group",action:(0,a.jsx)(iH,{}),children:"Fonts"}),(0,a.jsx)("div",{className:"px-3 pb-3",children:(0,a.jsx)("button",{className:"w-full hover:brightness-90 dark:hover:brightness-110 transition-all duration-150",onClick:e,children:(0,a.jsx)("div",{className:"w-full flex rounded-md overflow-hidden h-8 border border-v0-alpha-400 bg-v0-background-100 items-center justify-center text-v0-gray-900 text-xs",children:"System Font"})})})]});let{activeFontId:n,changeActiveFont:r,designTokensLoaded:s,hasActiveFont:i}=t,o=n?(0,iw.fontIdToName)(n):"Default";return(0,a.jsxs)(iz,{children:[(0,a.jsx)(iB,{onClick:e,className:"group",action:(0,a.jsx)(iH,{}),children:"Fonts"}),(0,a.jsx)("div",{className:"px-3 pb-3",children:(0,a.jsxs)(th.Select,{value:n||"",onValueChange:r,disabled:!s||!i,children:[(0,a.jsx)(th.SelectTrigger,{className:"border-v0-alpha-400 text-v0-gray-1000 text-sm h-8",children:(0,a.jsx)(th.SelectValue,{placeholder:"Select font...",children:(0,a.jsx)("span",{style:{fontFamily:`"${o}"`},children:o})})}),(0,a.jsx)(th.SelectContent,{children:iw.GoogleFonts.map(e=>{let t=(0,iw.fontIdToName)(e);return(0,a.jsx)(th.SelectItem,{value:e,children:(0,a.jsx)("span",{style:{fontFamily:t},children:t})},e)})})]},`active-font-${n||"none"}`)})]})}let i1=(0,l.memo)(function({label:e,blockId:t,fontType:n}){let r=(0,l.useContext)(iQ);if(!r)throw Error("FontItem must be used within RootEditorContext");let{changeCategoryFont:s,getCurrentFont:i,designTokensLoaded:o}=r,c=iO(i(n)),d=(0,l.useCallback)(e=>{s(n,e,!1)},[n,s]);return(0,a.jsxs)("div",{className:"flex flex-col gap-1.5",children:[(0,a.jsx)("label",{className:"text-label-12 select-none capitalize leading-4 opacity-60",children:e}),(0,a.jsxs)(th.Select,{value:c,onValueChange:d,disabled:!o,children:[(0,a.jsx)(th.SelectTrigger,{className:"border-v0-gray-200 text-v0-gray-1000 text-sm",children:(0,a.jsx)(th.SelectValue,{placeholder:"Select font..."})}),(0,a.jsx)(th.SelectContent,{children:(0,iw.getFontsByCategory)("sans"===n?"sans":"serif"===n?"serif":"mono").map((e,n,r)=>{let s=(0,iw.fontIdToName)(e),i=(0,iw.getFontCategory)(e),o=n>0?(0,iw.getFontCategory)(r[n-1]):null;return(0,a.jsxs)("div",{children:["other"===i&&"other"!==o&&(0,a.jsx)("div",{className:"px-2 py-1 text-xs text-v0-gray-900 border-t mt-1 pt-2",children:"Other fonts"}),(0,a.jsx)(th.SelectItem,{value:e,onMouseEnter:()=>{(0,e4.sendToIframeFromBlockId)(t||"",{type:"preload_google_font",fontId:e})},children:(0,a.jsx)("span",{style:{fontFamily:s},children:s})})]},e)})})]},`${n}-${c||"none"}`)]})});function i2({onBack:e}){let t=(0,h.useActiveBlockState)(),n=t?.id||"",r=(0,l.useContext)(iQ),{actions:s}=(0,eB.useCurrentChatPrompt)();if(!r)return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(iU,{title:"Fonts",onBack:e}),(0,a.jsx)("div",{className:"flex-1 overflow-auto",children:(0,a.jsx)("div",{className:"p-4",children:(0,a.jsx)("div",{className:"text-sm text-v0-gray-600",children:"Font context not available"})})})]});let{activeFontClass:i,changeActiveFont:o,hasActiveFont:c,designTokensLoaded:u}=r,p=i?iK[i]:null,f={sans:iO(sb.FONTS_INITIAL_STYLES["font-sans"])??"Geist",serif:iO(sb.FONTS_INITIAL_STYLES["font-serif"])??"Source_Serif_4",mono:iO(sb.FONTS_INITIAL_STYLES["font-mono"])??"Geist_Mono"};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(iU,{title:"Fonts",onBack:e}),(0,a.jsx)("div",{className:"flex-1 overflow-auto",children:(0,a.jsxs)("div",{className:"p-4",children:[!c&&(0,a.jsx)(iY,{onClick:()=>{s.handleInputChange({initialValue:"Add the font-sans class to the root layout body element."})}}),(0,a.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,a.jsxs)("div",{className:(0,d.cn)("flex flex-col gap-1.5",(!c||!u)&&"opacity-30 pointer-events-none"),children:[(0,a.jsx)("label",{className:"text-label-12 select-none leading-4 opacity-60",children:"Default Font Style"}),(0,a.jsxs)(iW.TabsToggle,{className:"w-full h-8",value:p??void 0,onValueChange:e=>{let t;t=iO(r.getCurrentFont(e)),(0,iw.isGoogleFont)(t)?o(t):o(f[e])},children:[(0,a.jsx)(iW.TabsToggleTrigger,{value:"sans",className:"flex-1",children:"Sans"}),(0,a.jsx)(iW.TabsToggleTrigger,{value:"serif",className:"flex-1",children:"Serif"}),(0,a.jsx)(iW.TabsToggleTrigger,{value:"mono",className:"flex-1",children:"Mono"})]})]}),(0,a.jsx)(i1,{label:"Sans",fontType:"sans",blockId:n}),(0,a.jsx)(i1,{label:"Serif",fontType:"serif",blockId:n}),(0,a.jsx)(i1,{label:"Mono",fontType:"mono",blockId:n})]})]})})]})}function i5({children:e,designTokens:t}){let n=(0,h.useActiveBlockState)(),r=iq(t),s=(0,l.useMemo)(()=>Object.keys(r).length>0,[r]),{atoms:i}=(0,e5.useCurrentBlockDesignMode)(),o=(0,sJ.useAtomValue)(i.previewTheme),[c,d]=(0,l.useState)(null),[u,p]=(0,l.useState)(null),[f,m]=(0,l.useState)(!1),g=(0,l.useCallback)(e=>t.theme[iJ[e]]||t.light[iJ[e]]||"",[t]);(0,l.useEffect)(()=>{if(!n)return;let e="code-project"===n.type?(0,s0.parseMultiFileSource)({source:n.source,blockType:"code-project",blockId:n.id}):[],t=ii(e)?.source;if(eZ.designModeInlineEditRef.current&&t){let n=is(e),r=eZ.designModeInlineEditRef.current.getContent(n);r&&(t=r)}if(t){let e=(0,iw.getActiveFontClassFromLayout)(t);d(e??null);let n=g(iK[e??"font-sans"]);n?m(!0):m(!1);let r=iO(n);(0,iw.isGoogleFont)(r)&&p(r)}else{d("font-sans"),m(!0);let e=iO(g("sans"));(0,iw.isGoogleFont)(e)?p(e):p({sans:iO(sb.FONTS_INITIAL_STYLES["font-sans"])??"Geist",serif:iO(sb.FONTS_INITIAL_STYLES["font-serif"])??"Source_Serif_4",mono:iO(sb.FONTS_INITIAL_STYLES["font-mono"])??"Geist_Mono"}.sans)}},[n,g]);let x=(0,v.useChatId)(),{data:y}=(0,b.useServerQuerySWR)(["chat","attributes"],{chatId:x},{stopFetch:!x}),j=y?.ok?y.value.designSystemId:null,w=(0,W.useFlags)().n5ge??!1,k=(0,l.useCallback)(()=>{if(!n)return null;let e="code-project"===n.type?(0,s0.parseMultiFileSource)({source:n.source,blockType:"code-project",blockId:n.id}):[];if(!e.length)return null;let t={};for(let n of e)t[n.meta.file]=n.source;return t},[n]),C=(0,l.useMemo)(()=>{let e=k();return!!e&&14===iE(e,{nextVersion15Default:w})},[k,w]),S=(0,l.useCallback)(()=>{if(!n)return null;let e="code-project"===n.type?(0,s0.parseMultiFileSource)({source:n.source,blockType:"code-project",blockId:n.id}):[];if(!e.length)return null;let t=(0,it.getGlobalsCssFromFiles)(e),r=ii(e),s=(0,it.getGlobalsCssPathFromFiles)(e),i=is(e),a=(0,s0.createNewFile)((0,s7.createDefaultGlobals)(),s,"css",n.id),o=(0,s0.createNewFile)(function({nextVersion:e}){return 14===e?ia:io}({nextVersion:C?14:15}),i,"typescriptreact",n.id);return{rootLayout:r??o,globalsCss:t??a,existingGlobalsCssFile:t,existingLayoutFile:r,defaultGlobalsCssFile:a,defaultLayoutFile:o}},[n,C]),M=(0,l.useCallback)((e,r)=>{if(!n||!eZ.designModeInlineEditRef.current)return;let s=S();if(!s)return;let{rootLayout:i,globalsCss:a,existingLayoutFile:l}=s,{content:c}=(0,it.getGlobalsCssWithInlineEdit)(eZ.designModeInlineEditRef);if(!c)return;let d=iI({layoutFile:i,styles:{light:{},dark:{},common:{"font-sans":t.theme["font-sans"]||t.light["font-sans"],"font-serif":t.theme["font-serif"]||t.light["font-serif"],"font-mono":t.theme["font-mono"]||t.light["font-mono"],[iJ[e]]:(0,iX.googleFontIdToCssValue)(r,C?14:15)}},isNext14:C}),u=iG({globalsFile:c,fontType:e,fontId:r,isNext14:C}),h=[];(!l||d.changed)&&h.push({file:i.meta.file,value:d.content}),u.changed&&a.meta.file&&h.push({file:a.meta.file,value:u.content}),0!==h.length&&(eZ.designModeInlineEditRef.current.bulkFileChange(h),(0,N.track)("EditDesignSystemToken",{designSystemId:j,token:`font-${e}`,value:r,theme:o,editor:"design-mode"}))},[n,j,t,S,o,C]),I=(0,l.useCallback)(e=>{if(!n||!eZ.designModeInlineEditRef.current)return;let r=S();if(!r)return;let{rootLayout:s,existingLayoutFile:i}=r,a=(0,iw.getFontCategory)(e),l=iw.CATEGORY_TO_CLASS_NAME[a],u=s.source,h=is([s]),f=eZ.designModeInlineEditRef.current.getContent(h);f&&(u=f);let g={content:u,changed:!1};if(l!==c){let e=(0,iw.updateBodyFontClass)(u,l);g={content:e,changed:e!==u},d(l)}let x=iK[l],{content:v}=(0,it.getGlobalsCssWithInlineEdit)(eZ.designModeInlineEditRef);if(!v)return;let b={light:{},dark:{},common:{"font-sans":t.theme["font-sans"]||t.light["font-sans"],"font-serif":t.theme["font-serif"]||t.light["font-serif"],"font-mono":t.theme["font-mono"]||t.light["font-mono"],[iJ[x]]:(0,iX.googleFontIdToCssValue)(e,C?14:15)}},y=iI({layoutFile:{...s,source:g.content},styles:b,isNext14:C}),w=iG({globalsFile:v,fontType:x,fontId:e,isNext14:C}),k=[];if((!i||g.changed||y.changed)&&k.push({file:s.meta.file,value:y.content}),w.changed){let e=S();e&&e.globalsCss.meta.file&&k.push({file:e.globalsCss.meta.file,value:w.content})}k.length>0&&eZ.designModeInlineEditRef.current.bulkFileChange(k),p(e),m(!0),(0,N.track)("EditDesignSystemToken",{designSystemId:j,token:"active-font",value:e,theme:o,editor:"design-mode"})},[n,c,t.light,t.theme,S,j,o,C]),T=(0,l.useMemo)(()=>({designTokens:t,changeCategoryFont:M,getCurrentFont:g,designTokensLoaded:s,activeFontClass:c,activeFontId:u,changeActiveFont:I,hasActiveFont:f}),[t,M,g,I,s,c,u,f]);return(0,a.jsx)(iQ.Provider,{value:T,children:e})}var i3=e.i(948020),i4=e.i(762585),i6=e.i(343258);function i9({designSystem:e,disabled:t,preFetchFunction:n,editedValues:r,showEditedTag:s=!1}){let{atoms:i}=(0,e5.useCurrentBlockDesignMode)(),o=(0,sJ.useAtomValue)(i.previewTheme),c=(0,sJ.useAtomValue)(i3.designSystemUnsavedChangesAtom),u=(0,l.useMemo)(()=>{if(!e)return null;let t=(0,iT.getShadcnStyleFromRegistry)(e.registry);return r?{...t,common:{...t.common,...Object.fromEntries(Object.entries(r.common).filter(([e,t])=>!e.startsWith("font-")||"string"==typeof t&&t.includes("'"))),...Object.fromEntries(Object.entries(r.theme).filter(([e])=>e.startsWith("font-")))},light:{...t.light,...r.light,...Object.fromEntries(Object.entries(r.theme).filter(([e])=>!e.startsWith("font-")&&!e.startsWith("color-")))},dark:{...t.dark,...r.dark,...Object.fromEntries(Object.entries(r.theme).filter(([e])=>!e.startsWith("font-")&&!e.startsWith("color-")))}}:t},[e,r]);return(0,a.jsxs)("div",{className:(0,d.cn)("light:hover:brightness-90 dark:hover:brightness-110 transition-all h-22 w-full rounded-md p-3 flex flex-col gap-4",t&&"cursor-not-allowed",e&&u?"border border-v0-gray-300 bg-v0-background-100 text-v0-gray-1000":"bg-transparent text-v0-gray-600 border border-dashed border-v0-gray-300"),style:u?{backgroundColor:u[o].background,color:u[o].foreground}:void 0,onMouseEnter:n,onTouchStart:n,children:[e&&u?(0,a.jsxs)("p",{className:"text-label-12 w-full text-start font-medium",children:[e.name,s&&c.hasUnsavedChanges&&(0,a.jsx)("span",{className:"font-normal text-v0-gray-700",children:" (edited)"})]}):(0,a.jsx)("div",{className:"flex-1 flex items-center justify-center",children:(0,a.jsx)("span",{className:"text-label-12 font-medium text-v0-gray-600",children:"Add a design system"})}),e&&u&&(0,a.jsxs)("div",{className:"flex gap-2 items-center",children:[(0,a.jsx)(ar,{shadcnStyle:u}),(0,a.jsx)(iD.DesignSystemMiniPreview,{borderAsBorderColor:!0,shadcnStyle:u,size:"long",theme:o}),(0,a.jsx)("div",{className:"px-3 h-8 text-[11px] font-medium flex items-center justify-center",style:{borderRadius:u.common.radius,backgroundColor:u[o].primary,color:u[o]["primary-foreground"]},children:"Button"})]})]})}function i8({designSystem:e,isSelected:t,onSelect:n,disabled:r=!1,onPointerEnter:s,isCurrentActive:i=!1}){let o=e?.designSystemId||null,l=(0,D.useT)(),c=e?.name||l("designSystemButton.default"),u=!i&&!r;return(0,a.jsx)(ty.CommandItem,{value:`${c} ${o}`,onSelect:()=>{u&&n(o)},className:(0,d.cn)("p-0 relative",r&&"cursor-not-allowed pointer-events-none",i&&"cursor-default"),onPointerEnter:u?s:void 0,children:(0,a.jsxs)("div",{className:"relative w-full",children:[(0,a.jsx)(i9,{designSystem:e,disabled:r,showEditedTag:i}),t&&(0,a.jsx)("div",{className:"absolute top-2 right-2",children:(0,a.jsx)("div",{className:"bg-v0-background-100 rounded-full p-1 border border-v0-alpha-400",children:(0,a.jsx)(s1.Check,{className:"h-3 w-3 text-v0-gray-900"})})})]})},o||"unset")}function i7({disabled:e=!1,onSubmit:t}){let[n,r]=(0,l.useState)(""),s=e=>{e.preventDefault(),n.trim()&&(t(n.trim()),r(""))};return(0,a.jsx)("div",{className:"w-full",children:(0,a.jsxs)("div",{className:(0,d.cn)("w-full rounded-md border border-v0-gray-300 bg-v0-background-100 p-3 flex flex-col gap-3",e&&"opacity-50 cursor-not-allowed"),children:[(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsx)("span",{className:"text-label-12 font-semibold text-v0-gray-900",children:"Ask"}),(0,a.jsx)(s5.Logo,{className:"h-4 w-4"})]}),(0,a.jsxs)("form",{onSubmit:s,className:"flex items-center gap-2",children:[(0,a.jsx)(tj.Input,{placeholder:"Make me a design system that...",value:n,onChange:e=>r(e.target.value),onKeyDown:e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),s(e))},disabled:e,className:"flex-1"}),(0,a.jsx)(A.Button,{type:"button",variant:"default",size:"sm",className:"size-8",onClick:()=>{n.trim()&&(t(n.trim()),r(""))},disabled:e||!n.trim(),children:(0,a.jsx)(s2.ArrowRight,{className:"h-4 w-4"})})]})]})})}function ae({className:e,editedValues:t}={}){return(0,a.jsx)(l.Suspense,{fallback:(0,a.jsx)(i4.Skeleton,{className:"w-full h-22"}),children:(0,a.jsx)(an,{className:e,editedValues:t})})}function at({designSystem:e,disabled:t,tooltip:n,preFetchFunction:r,editedValues:s}){return(0,a.jsx)(tp.Tooltip,{content:n,children:(0,a.jsx)(i9,{designSystem:e,disabled:t,preFetchFunction:r,editedValues:s,showEditedTag:!0})})}function an({className:e,editedValues:t}={}){let n=(0,v.useChatId)(),r=(0,D.useT)(),{atoms:s}=(0,e5.useCurrentBlockDesignMode)(),i=(0,sJ.useAtomValue)(s.pendingDesignSystem),{actions:o}=(0,eB.useCurrentChatPrompt)();(0,b.useServerQuerySWR)(["scoped","designSystems"],{});let{data:c,isLoading:u}=(0,b.useServerQuerySWR)(["chat","attributes"],{chatId:n},{stopFetch:!n}),p=(0,l.useMemo)(()=>i.isPending?i.designSystemId:c?.ok?c.value.designSystemId:null,[i.isPending,i.designSystemId,c]),f=(0,h.useActiveBlockState)(),{latestBlock:g}=(0,m.useBlockHistory)({blockId:f?.id,searchAll:!0}),{editValueMap:x}=(0,i6.useEditValueMap)({blockId:f?.id||""}),y=(0,s3.getDesignSystemAtoms)(),j=(0,sJ.useAtomValue)(y.designSystems),{isTWv4:w}=iR(),k=(0,l.useMemo)(()=>!g||!!f&&f.id===g.id,[f,g]),[C,S]=(0,l.useState)(!1),[M,N]=(0,l.useState)(null),[I,T]=(0,l.useState)(p?{type:"saved",designSystemId:p}:{type:"none"}),[E,L]=(0,l.useState)(p),{userDesignSystems:_,exampleDesignSystems:P}=(0,l.useMemo)(()=>{let e=j??[],t=e.filter(e=>!(0,iF.isExampleDesignSystem)(e.designSystemId)),n=e.filter(e=>(0,iF.isExampleDesignSystem)(e.designSystemId));return{userDesignSystems:[...t].sort((e,t)=>e.designSystemId===E?-1:+(t.designSystemId===E)),exampleDesignSystems:n}},[j,E]),{globalsCssWithDesignSystem:R,isPrecomputingGlobals:F,loadGlobalsWithDesignSystem:O,revertPreview:$,setRevertPreview:V,applyDesignSystem:z,previewDesignSystem:B,preloadFontsInFrame:H}=i_({chatId:n||null,designSystems:(0,l.useMemo)(()=>[..._,...P],[_,P])});(0,l.useEffect)(()=>{p?T({type:"saved",designSystemId:p}):T({type:"none"})},[p]),(0,l.useEffect)(()=>{if(!C){let e=setTimeout(()=>{L(p)},150);return()=>clearTimeout(e)}},[C,p]);let U=(0,l.useMemo)(()=>p&&j.find(e=>e.designSystemId===p)||null,[p,j]),W=(0,l.useMemo)(()=>p&&U?.name||r("designSystemButton.default"),[p,U,r]),q=(0,l.useMemo)(()=>{switch(I.type){case"none":return r("designSystemButton.default");case"saved":let e=j.find(e=>e.designSystemId===I.designSystemId);return e?.name||r("designSystemButton.default")}},[I,j,r]),G=(0,l.useCallback)(e=>{T(e?{type:"saved",designSystemId:e}:{type:"none"}),$?V([$[0],e]):V([p,e]),z(e),S(!1)},[z,$,p,V]),X=(0,l.useCallback)(()=>{if(M&&f){let e=document.getElementById((0,s9.getBlockIframeId)(f.id));if(e){let t=(0,s6.getMultiFileSourceMap)(M);(0,s8.updatePreviewImmediate)(e,t)}}},[M,f]),Z=(0,l.useCallback)(()=>{R||O(),H()},[R,O,H]),Y=(0,l.useCallback)(e=>{S(!1);let t=`Make me a new design system by editing globals.css. ${e}`;o.handleInputChange({initialValue:t,force:!0}),o.focusPrompt()},[o]),J=(0,l.useMemo)(()=>u||!k||F||!w,[u,k,F,w]),K=(0,l.useCallback)(e=>e.map(e=>(0,a.jsx)(i8,{designSystem:e,isSelected:"saved"===I.type&&I.designSystemId===e.designSystemId,onSelect:G,disabled:J,onPointerEnter:()=>B({activeDesignSystemId:p,designSystemId:e.designSystemId}),isCurrentActive:p===e.designSystemId},e.designSystemId)),[I,G,J,B,p]);return(0,a.jsxs)(tw.Popover,{open:C&&k&&w,onOpenChange:e=>{if(k&&w)if(S(e),e){if(f&&"code-project"===f.type)try{let e=(0,s0.parseMultiFileSource)({source:f.source,blockType:"code-project",blockId:f.id});for(let t of e){let e=x[t.meta.file||""];e&&(t.source=e)}N(e)}catch(e){console.warn("Failed to capture original files:",e),N(null)}R||F||O()}else{if(M&&f){let e=document.getElementById((0,s9.getBlockIframeId)(f.id));if(e){let t=(0,s6.getMultiFileSourceMap)(M);(0,s8.updatePreviewImmediate)(e,t)}}N(null),p?T({type:"saved",designSystemId:p}):T({type:"none"}),$&&V(null)}},children:[(0,a.jsx)(tw.PopoverTrigger,{asChild:!0,children:(0,a.jsx)("button",{className:(0,d.cn)("w-full",e),disabled:!k||!w,children:(0,a.jsx)(at,{disabled:!k||!w,designSystem:U,preFetchFunction:Z,editedValues:t,tooltip:C?void 0:w?k?`${r("designSystemButton.designSystem")}: ${W}`:r("designSystemButton.openLatestBlockToApply"):r("designSystemButton.twv4")})})}),(0,a.jsx)(tw.PopoverContent,{className:"p-0",align:"end",onPointerLeave:X,style:{width:"var(--radix-popper-anchor-width)"},children:(0,a.jsxs)("div",{className:"flex flex-col",children:[(0,a.jsxs)(ty.Command,{defaultValue:q,children:[(0,a.jsx)(ty.CommandInput,{placeholder:r("designSystemButton.searchPlaceholder")}),(0,a.jsxs)(ty.CommandList,{children:[(0,a.jsx)(ty.CommandEmpty,{children:(0,a.jsx)("div",{className:"text-v0-gray-900 text-sm",children:r("designSystemButton.noDesignSystemsFound")})}),"none"===I.type&&(0,a.jsxs)(ty.CommandGroup,{className:"p-2",children:[(0,a.jsx)("div",{className:"px-1 pb-2 text-xs font-medium text-v0-gray-900",children:"No Design System"}),(0,a.jsx)("div",{className:"flex flex-col gap-2",children:(0,a.jsx)(i8,{designSystem:null,isSelected:!0,onSelect:G,disabled:J,isCurrentActive:null===p})})]}),(0,a.jsxs)(ty.CommandGroup,{className:"p-2",children:[(0,a.jsx)("div",{className:"px-1 pb-2 text-xs font-medium text-v0-gray-900",children:"Your Design Systems"}),(0,a.jsxs)("div",{className:"flex flex-col gap-2",children:[K(_),(0,a.jsx)(i7,{disabled:J,onSubmit:Y})]})]}),P.length>0&&(0,a.jsxs)(ty.CommandGroup,{className:"p-2",children:[(0,a.jsx)("div",{className:"px-1 pb-2 text-xs font-medium text-v0-gray-900",children:"Default Design Systems"}),(0,a.jsx)("div",{className:"flex flex-col gap-2",children:K(P)})]}),"none"!==I.type&&(0,a.jsxs)(ty.CommandGroup,{className:"p-2",children:[(0,a.jsx)("div",{className:"px-1 pb-2 text-xs font-medium text-v0-gray-900",children:"No Design System"}),(0,a.jsx)("div",{className:"flex flex-col gap-2",children:(0,a.jsx)(i8,{designSystem:null,isSelected:!1,onSelect:G,disabled:J,isCurrentActive:null===p})})]})]})]}),(0,a.jsx)("div",{className:"border-t p-2 bg-v0-background-200",children:(0,a.jsx)("a",{href:"/chat/design-systems/new",children:(0,a.jsx)(A.Button,{variant:"secondary",size:"sm",className:"w-full",children:"New Design System"})})})]})})]})}function ar({shadcnStyle:e}){let t=(0,h.useActiveBlockState)(),n=(0,l.useContext)(iQ),r=(0,l.useMemo)(()=>{let r="font-sans";if(n?.activeFontClass)r=n.activeFontClass;else if(t&&"code-project"===t.type)try{let e=(0,s0.parseMultiFileSource)({source:t.source,blockType:"code-project",blockId:t.id}),n=ii(e),s=n?.source,i=n?is(e):void 0;if(eZ.designModeInlineEditRef.current&&s&&i){let e=eZ.designModeInlineEditRef.current.getContent(i);e&&(s=e)}s&&(r=(0,iw.getActiveFontClassFromLayout)(s)??"font-sans")}catch(e){}let s=e?.common[r];if(!s)return null;let i=iO(s);return i?{fontId:i,fontName:(0,iw.fontIdToName)(i),fontType:r}:null},[e,t,n]);return(0,a.jsx)("p",{className:"text-[22px] font-normal",style:{fontFamily:r?r.fontName:void 0},children:"Abc"})}var as=e.i(210320),ai=e.i(669545),aa=e.i(60364),ao=e.i(530135),al=e.i(588385),ac=e.i(53375);function ad({className:e}){let[t,n]=(0,l.useState)(!1),[r,s]=(0,l.useTransition)(),i=(0,v.useChatId)(),c=(0,h.useActiveBlockState)(),u=(0,sJ.useAtomValue)(i3.designSystemUnsavedChangesAtom),{data:p}=(0,b.useServerQuerySWR)(["chat","attributes"],{chatId:i},{stopFetch:!i}),f=(0,s3.getDesignSystemAtoms)(),m=(0,sJ.useAtomValue)(f.designSystems),{applyDesignSystem:g}=i_({chatId:i||null,designSystems:m}),x=p?.ok?p.value.designSystemId:null,y=m.find(e=>e.designSystemId===x)||null,j=(0,l.useCallback)(()=>{u.hasUnsavedChanges&&p?.ok&&(0,ek.openDialog)({type:"createDesignSystem",data:{shadcnStyle:u.currentShadcnStyle,specFiles:null,onSuccess:e=>{(0,N.track)("CreateDesignSystemFromUnsavedChanges",{designSystemId:e.designSystemId}),s(async()=>{await g(e.designSystemId)}),u.clearUnsavedChanges(),n(!1)}}})},[p?.ok,u,g,s]),w=(0,l.useCallback)(()=>{u.hasUnsavedChanges&&c&&((0,e4.sendToIframeFromBlockId)(c.id,{type:"devtools_revert_design"}),u.clearUnsavedChanges(),n(!1),s(async()=>{await g(x)}))},[u,g,x,c,s]),k=(0,l.useCallback)(()=>{u.hasUnsavedChanges&&y&&s(async()=>{try{let e=(0,al.generateRegistryFromStyles)(y.name,"https://v0.app",[{name:y.name,style:u.currentShadcnStyle}]);await (0,ac.updateDesignSystemAction)({designSystemId:y.designSystemId,registry:e}),u.clearUnsavedChanges(),o.toast.success("Design system updated successfully"),n(!1)}catch(e){o.toast.error("Failed to update design system. Please try again.")}})},[u,y,s]);return(0,a.jsxs)(ee.DropdownMenu,{open:t,onOpenChange:n,children:[(0,a.jsx)(ee.DropdownMenuTrigger,{asChild:!0,children:(0,a.jsx)(A.Button,{className:(0,d.cn)("size-7 rounded-md",e),tooltip:"Design System Options",size:"sm",variant:"ghost",children:u.hasUnsavedChanges?(0,a.jsx)(au,{className:"text-v0-gray-900!"}):(0,a.jsx)(as.SettingsGear,{className:"text-v0-gray-900!"})})}),(0,a.jsxs)(ee.DropdownMenuContent,{side:"bottom",align:"end",children:[(0,a.jsxs)(ee.DropdownMenuGroup,{children:[(0,a.jsxs)(ee.DropdownMenuItem,{className:"cursor-pointer",onSelect:w,disabled:!u.hasUnsavedChanges||r||!y,children:[(0,a.jsx)(ao.UndoIcon,{}),(0,a.jsx)("div",{className:"truncate",children:"Reset Changes"})]}),(0,a.jsxs)(ee.DropdownMenuItem,{className:"cursor-pointer",onSelect:j,disabled:!u.hasUnsavedChanges||r,children:[(0,a.jsx)(ai.PlusCircle,{}),(0,a.jsx)("div",{className:"truncate",children:"Save as New..."})]}),(0,a.jsxs)(ee.DropdownMenuItem,{className:"cursor-pointer",onSelect:k,disabled:!u.hasUnsavedChanges||r||!y||(0,iF.isExampleDesignSystem)(y.designSystemId),children:[(0,a.jsx)(aa.FloppyDisk,{}),(0,a.jsxs)("div",{className:"truncate",children:["Save to ",y?.name||(0,a.jsx)("span",{children:"Current"}),(0,a.jsx)("span",{children:"..."})]})]})]}),(0,a.jsx)(ee.DropdownMenuSeparator,{}),(0,a.jsx)(ee.DropdownMenuGroup,{children:(0,a.jsx)(ee.DropdownMenuItem,{asChild:!0,className:"justify-between",children:(0,a.jsxs)(K.default,{href:x?`/chat/design-systems/${x}`:"/chat/design-systems",children:["Open in Editor",(0,a.jsx)(J.External,{})]})})})]})]})}let au=(0,eb.withNewIcon)('<g clip-path="url(#clip0_2148_13272)"><circle cx="13.5" cy="2.5" r="2.5" fill="var(--v0-blue-900)"/><path d="M9.72168 1.18555C9.57845 1.5973 9.5 2.03945 9.5 2.5C9.5 2.75569 9.52446 3.00569 9.57031 3.24805C8.94926 3.01023 8.43649 2.46488 8.2998 1.73633L8.25586 1.5H7.74414L7.7002 1.73633C7.55891 2.4894 7.0164 3.04829 6.36719 3.27246C6.27216 3.30527 6.17831 3.34059 6.08594 3.37891L5.69531 3.55469C5.09825 3.8001 4.37631 3.76504 3.7832 3.35938L3.58398 3.22266L3.22266 3.58398L3.35938 3.7832C3.76504 4.37631 3.80009 5.09825 3.55469 5.69531L3.37891 6.08594C3.34059 6.17831 3.30527 6.27216 3.27246 6.36719C3.04829 7.01639 2.4894 7.5589 1.73633 7.7002L1.5 7.74414V8.25488L1.73633 8.2998C2.44245 8.43229 2.97778 8.91747 3.22656 9.5127L3.27246 9.63281L3.37891 9.91406L3.55469 10.3047C3.80009 10.9017 3.76503 11.6237 3.35938 12.2168L3.22266 12.415L3.58398 12.7764L3.7832 12.6406L3.90332 12.5645C4.47191 12.2315 5.13802 12.2163 5.69531 12.4453L6.08594 12.6211C6.17831 12.6594 6.27216 12.6947 6.36719 12.7275C7.0164 12.9517 7.55891 13.5106 7.7002 14.2637L7.74414 14.5H8.25586L8.2998 14.2637L8.33008 14.125C8.50843 13.4421 9.02407 12.9377 9.63281 12.7275C9.72784 12.6947 9.82169 12.6594 9.91406 12.6211L10.3047 12.4453C10.9018 12.1999 11.6237 12.235 12.2168 12.6406L12.415 12.7764L12.7764 12.415L12.6406 12.2168C12.235 11.6237 12.1999 10.9018 12.4453 10.3047L12.6211 9.91406C12.6594 9.82169 12.6947 9.72784 12.7275 9.63281C12.9517 8.9836 13.5106 8.44109 14.2637 8.2998L14.5 8.25488V7.74414L14.2637 7.7002C13.5346 7.56343 12.9886 7.0503 12.751 6.42871C12.9937 6.4747 13.2439 6.5 13.5 6.5C13.9603 6.5 14.4019 6.42045 14.8135 6.27734L16 6.5V9.5L14.54 9.77344C14.3552 9.80814 14.207 9.94438 14.1455 10.1221C14.06 10.3698 13.9603 10.6116 13.8467 10.8447C13.7643 11.0139 13.7726 11.2148 13.8789 11.3701L14.7178 12.5967L12.5957 14.7178L11.3701 13.8789C11.2148 13.7726 11.0139 13.7643 10.8447 13.8467C10.6116 13.9603 10.3698 14.06 10.1221 14.1455C9.94438 14.207 9.80815 14.3552 9.77344 14.54L9.5 16H6.5L6.22656 14.54C6.19619 14.3784 6.08791 14.2449 5.94238 14.1729L5.87793 14.1455C5.63018 14.06 5.38842 13.9603 5.15527 13.8467C4.98607 13.7643 4.78521 13.7726 4.62988 13.8789L3.40332 14.7178L1.28223 12.5967L2.12109 11.3701C2.21409 11.2342 2.23278 11.0632 2.18066 10.9092L2.15332 10.8447C2.03967 10.6116 1.94004 10.3698 1.85449 10.1221C1.80069 9.96654 1.6804 9.8427 1.52734 9.79102L1.45996 9.77344L0 9.5V6.5L1.45996 6.22656C1.62164 6.19619 1.75509 6.08792 1.82715 5.94238L1.85449 5.87793C1.94004 5.63018 2.03968 5.38843 2.15332 5.15527C2.22539 5.00727 2.2279 4.83527 2.15625 4.69043L2.12109 4.62988L1.28223 3.40332L3.40332 1.28223L4.62988 2.12109C4.78521 2.22737 4.98607 2.23572 5.15527 2.15332C5.27178 2.09653 5.39046 2.04307 5.51074 1.99316L5.87793 1.85449C6.03345 1.80069 6.1573 1.6804 6.20898 1.52734L6.22656 1.45996L6.5 0H9.5L9.72168 1.18555ZM8 5C9.65685 5 11 6.34315 11 8C11 9.65685 9.65685 11 8 11C6.34315 11 5 9.65685 5 8C5 6.34315 6.34315 5 8 5ZM8 6.5C7.17157 6.5 6.5 7.17157 6.5 8C6.5 8.82843 7.17157 9.5 8 9.5C8.82843 9.5 9.5 8.82843 9.5 8C9.5 7.17157 8.82843 6.5 8 6.5Z" fill="currentcolor"/></g><defs><clipPath id="clip0_2148_13272"><rect width="16" height="16" fill="white"/></clipPath></defs>');function ah({tokenName:e,designTokens:t,onColorChange:n,designTokensLoaded:r,nameInInput:s}){let i=iq(t),o=(0,l.useMemo)(()=>(function(e,t){let[n,r,s]=iy(e,void 0),i=ix(void 0),a=iv(void 0);return n+r.map(ib(i,a)).join((void 0)??" ")+s})(e),[e]),{displayedColorName:c,parsedColor:d}=(0,l.useMemo)(()=>{let t=i[e]||"",n=no(t);return{displayedColorName:n?sr(n):t,parsedColor:n??null}},[i,e]);return(0,a.jsx)(sj,{title:o,displayedColorName:c,parsedColor:d,colorTokens:[],onColorChange:t=>{n&&(null===t?n(e,i[e]||"",!1):n(e,sh(t),!0))},onTokensChange:()=>{},onPointerEnter:()=>{},onPointerLeave:()=>{},updateColorNameTextContent:()=>{},clearRevertPreview:()=>{},alphaEnabled:!1,isLoading:!r,nameInInput:s})}function ap(e,t,n,r,s="light"){let i,a=null,{path:o,content:l}=(0,it.getGlobalsCssWithInlineEdit)(r);if(null===o&&(o="app/globals.css",l=`\
:root {
  ${e}: ${t};
}

.dark {
  ${e}: ${t};
}
`),l?.includes(e)&&(a=o,i=l),!a||!i)return;let c=i.split("\n"),d=-1,u="",h=!1;for(let t=0;t<c.length;t++){let n=c[t].trim();if(("dark"===s?/^\s*\.dark\s*\{/:/^\s*:root\s*\{/).test(n)){h=!0;continue}if(h&&n.includes("}")){h=!1;continue}if(h&&c[t].includes(e)){d=t,u=c[t];break}}if(-1===d)return;let p=RegExp(`(\\s*)(${e}\\s*:\\s*)([^;]+)(;.*)?$`).exec(u);if(!p)return;let[f,m,g,x,v]=p,b=p.index||0,y=`${m}${g}${t}${v||""}`;r.current?.inlineEdit(a,d+1,b+1,f.length,y,n)}let af=(0,eJ.default)(({token:e,value:t,theme:n,designSystemId:r})=>{(0,N.track)("EditDesignSystemToken",{designSystemId:r,token:e,value:t,theme:n,editor:"design-mode"})},1e3),am=(0,eJ.default)(({token:e,value:t,theme:n,designSystemId:r})=>{(0,N.track)("EditDesignSystemToken",{designSystemId:r,token:e,value:t,theme:n,editor:"design-mode"})},1e3),ag=(0,l.createContext)(null);function ax({children:e,designTokens:t}){let n=iq(t),{updateToken:r}=function(){let e=(0,h.useActiveBlockState)(),t=e?.id,{atoms:n}=(0,e5.useCurrentBlockDesignMode)(),r=(0,sJ.useAtomValue)(n.previewTheme),{queueVersion:s,lastIsPreview:i,setLastFileContent:a,setLastIsPreview:o,setSaveNextState:c}=sK(),{pushHistory:d}=sY(),u=(0,v.useChatId)(),{data:p}=(0,b.useServerQuerySWR)(["chat","attributes"],{chatId:u},{stopFetch:!u}),f=p?.ok?p.value.designSystemId:null;return{updateToken:(0,l.useCallback)((e,n,l)=>{let u=Date.now(),h=l?.isPreview,p=l?.isHistoryOp??!1,m=l?.prevValue??"";s("CSS:"+e,u,()=>{if(!eZ.designModeInlineEditRef.current||!t)return;let s=`--${e}`;if(!p){if(h&&!i||!i&&!h){let{path:e,content:t}=(0,it.getGlobalsCssWithInlineEdit)(eZ.designModeInlineEditRef);t?.includes(s)&&a({file:e,content:t})}let{path:e}=(0,it.getGlobalsCssWithInlineEdit)(eZ.designModeInlineEditRef);e&&d(e)}h?o(!0):(o(!1),c(!0)),(0,e4.sendToIframeFromBlockId)(t,{type:"devtools_sync_design",payload:{type:"css-var",variable:s,value:n,prev:m}}),ap(s,n,u,eZ.designModeInlineEditRef,r),af({token:e,value:n,theme:r,designSystemId:f})})},[t,s,i,a,d,o,c,r,f])}}(),{updateMultipleTokens:s}=function(){let e=(0,h.useActiveBlockState)(),t=e?.id,{atoms:n}=(0,e5.useCurrentBlockDesignMode)(),r=(0,sJ.useAtomValue)(n.previewTheme),{queueVersion:s,lastIsPreview:i,setLastFileContent:a,setLastIsPreview:o,setSaveNextState:c}=sK(),{pushHistory:d}=sY(),u=(0,v.useChatId)(),{data:p}=(0,b.useServerQuerySWR)(["chat","attributes"],{chatId:u},{stopFetch:!u}),f=p?.ok?p.value.designSystemId:null;return{updateMultipleTokens:(0,l.useCallback)((e,n)=>{if(!t||0===e.length)return;let l=Date.now(),u=n.isPreview??!1,h=n.isHistoryOp??!1,p=n.batchName??"batch_update",m=n.customTracking;s(`CSS:${p}`,l,()=>{if(eZ.designModeInlineEditRef.current&&t){if(!h){if(u&&!i||!i&&!u){let{path:e,content:t}=(0,it.getGlobalsCssWithInlineEdit)(eZ.designModeInlineEditRef);e&&t&&a({file:e,content:t})}let{path:e}=(0,it.getGlobalsCssWithInlineEdit)(eZ.designModeInlineEditRef);e&&d(e)}u?o(!0):(o(!1),c(!0)),function(e,t,n,r="light"){let s;if(0===e.length)return;let i=null,{path:a,content:o}=(0,it.getGlobalsCssWithInlineEdit)(n);if(null===a){a="app/globals.css";let r=e.map(({cssVariable:e,color:t})=>`  ${e}: ${t};`).join("\n"),s=e.map(({cssVariable:e,color:t})=>`  ${e}: ${t};`).join("\n");o=`\
:root {
${r}
}

.dark {
${s}
}
`,n.current?.inlineEdit(a,0,0,0,o,t);return}if(!o)return;i=a;let l=(s=o).split("\n"),c=[],d=!1;for(let t=0;t<l.length;t++){let n=l[t]?.trim();if(n){if(("dark"===r?/^\s*\.dark\s*\{/:/^\s*:root\s*\{/).test(n)){d=!0;continue}if(d&&n.includes("}")){d=!1;continue}if(d&&l[t]){for(let{cssVariable:n,color:r}of e)if(l[t].includes(n)){let e=RegExp(`(\\s*)(${n}\\s*:\\s*)([^;]+)(;.*)?$`).exec(l[t]);if(e){let[n,s,i,a,o]=e,l=e.index||0,d=`${s}${i}${r}${o||""}`;c.push({lineIndex:t,matchStartIndex:l,matchLength:n.length,replacement:d})}break}}}}if(0===c.length)return;c.sort((e,t)=>t.lineIndex-e.lineIndex);let u=s;for(let e of c){let t=s.split("\n").slice(0,e.lineIndex).join("\n").length+ +(e.lineIndex>0)+e.matchStartIndex,n=t+e.matchLength;u=u.slice(0,t)+e.replacement+u.slice(n)}n.current?.inlineEdit(i,0,0,s.length,u,t)}(e.map(({tokenName:e,value:t})=>({cssVariable:`--${e}`,color:t})),l,eZ.designModeInlineEditRef,r),e.forEach(({tokenName:e,value:n,prevValue:r})=>{let s=`--${e}`;(0,e4.sendToIframeFromBlockId)(t,{type:"devtools_sync_design",payload:{type:"css-var",variable:s,value:n,prev:r||""}})}),am({token:m.token,value:m.value,theme:r,designSystemId:f})}})},[t,s,i,a,d,o,c,r,f])}}(),i=(0,l.useMemo)(()=>Object.keys(n).length>0,[n]),o=(0,l.useMemo)(()=>({designTokens:t,currentTokens:n,updateToken:r,updateMultipleTokens:s,designTokensLoaded:i}),[t,n,r,s,i]);return(0,a.jsx)(ag.Provider,{value:o,children:e})}function av(){let e=(0,l.useContext)(ag);if(!e)throw Error("useRootEditorTokens must be used within RootEditorTokensProvider");return e}var ab=e.i(811539),ay=e.i(494713);function aj({value:e,onValueChange:t,onValueChangeStart:n,onValueChangeEnd:r,max:s,min:i,step:o,className:c="",decimalPlaces:d=0}){let u=e=>0===d?e.toFixed(0):e.toFixed(d).replace(/\.?0+$/,""),[h,p]=(0,l.useState)(u(e[0]||0)),[f,m]=(0,l.useState)(!1),g=u(e[0]||0);return f||h===g||p(g),(0,a.jsxs)("div",{className:`flex items-center gap-3 flex-1 ${c}`,children:[(0,a.jsx)(ay.Slider,{value:e,onValueChange:t,onPointerDown:e=>{e.stopPropagation(),n?.()},onPointerUp:e=>{e.stopPropagation(),setTimeout(()=>{r?.()},500)},max:s,min:i,step:o,className:"flex-1"}),(0,a.jsx)("input",{type:"number",value:h,onChange:e=>{let n=e.target.value;p(n);let r=parseFloat(n);isNaN(r)||t([Math.max(i,Math.min(s,r))])},onFocus:()=>{m(!0),n?.()},onBlur:()=>{m(!1),p(u(e[0]||0)),r?.()},onKeyDown:e=>{"Enter"===e.key&&e.currentTarget.blur()},min:i,max:s,step:o,className:"text-label-13 font-mono border rounded-md text-v0-gray-1000 border-v0-alpha-400 bg-v0-background-100 h-8 w-12 text-center focus:outline-none focus:border-v0-blue-500 focus:ring-1 focus:ring-v0-blue-500 [&::-webkit-outer-spin-button]:appearance-none [&::-webkit-inner-spin-button]:appearance-none [-moz-appearance:textfield]"})]})}let aw=[{name:"Default",shadcnStyle:{light:{background:"hsl(0 0% 100%)",foreground:"hsl(222.2 84% 4.9%)",card:"hsl(0 0% 100%)","card-foreground":"hsl(222.2 84% 4.9%)",popover:"hsl(0 0% 100%)","popover-foreground":"hsl(222.2 84% 4.9%)",primary:"hsl(222.2 47.4% 11.2%)","primary-foreground":"hsl(210 40% 98%)",secondary:"hsl(210 40% 96%)","secondary-foreground":"hsl(222.2 84% 4.9%)",muted:"hsl(210 40% 96%)","muted-foreground":"hsl(215.4 16.3% 46.9%)",accent:"hsl(210 40% 96%)","accent-foreground":"hsl(222.2 84% 4.9%)",destructive:"hsl(0 84.2% 60.2%)","destructive-foreground":"hsl(210 40% 98%)",border:"hsl(214.3 31.8% 91.4%)",input:"hsl(214.3 31.8% 91.4%)",ring:"hsl(222.2 84% 4.9%)","chart-1":"hsl(12 76% 61%)","chart-2":"hsl(173 58% 39%)","chart-3":"hsl(197 37% 24%)","chart-4":"hsl(43 74% 66%)","chart-5":"hsl(27 87% 67%)",sidebar:"hsl(0 0% 98%)","sidebar-foreground":"hsl(240 5.3% 26.1%)","sidebar-primary":"hsl(240 5.9% 10%)","sidebar-primary-foreground":"hsl(0 0% 98%)","sidebar-accent":"hsl(240 4.8% 95.9%)","sidebar-accent-foreground":"hsl(240 5.9% 10%)","sidebar-border":"hsl(220 13% 91%)","sidebar-ring":"hsl(217.2 91.2% 59.8%)"},dark:{background:"hsl(222.2 84% 4.9%)",foreground:"hsl(210 40% 98%)",card:"hsl(222.2 84% 4.9%)","card-foreground":"hsl(210 40% 98%)",popover:"hsl(222.2 84% 4.9%)","popover-foreground":"hsl(210 40% 98%)",primary:"hsl(210 40% 98%)","primary-foreground":"hsl(222.2 84% 4.9%)",secondary:"hsl(217.2 32.6% 17.5%)","secondary-foreground":"hsl(210 40% 98%)",muted:"hsl(217.2 32.6% 17.5%)","muted-foreground":"hsl(215 20.2% 65.1%)",accent:"hsl(217.2 32.6% 17.5%)","accent-foreground":"hsl(210 40% 98%)",destructive:"hsl(0 62.8% 30.6%)","destructive-foreground":"hsl(210 40% 98%)",border:"hsl(217.2 32.6% 17.5%)",input:"hsl(217.2 32.6% 17.5%)",ring:"hsl(212.7 26.8% 83.9%)","chart-1":"hsl(220 70% 50%)","chart-2":"hsl(160 60% 45%)","chart-3":"hsl(30 80% 55%)","chart-4":"hsl(280 65% 60%)","chart-5":"hsl(340 75% 55%)",sidebar:"hsl(240 5.9% 10%)","sidebar-foreground":"hsl(240 4.8% 95.9%)","sidebar-primary":"hsl(224.3 76.3% 94.1%)","sidebar-primary-foreground":"hsl(240 5.9% 10%)","sidebar-accent":"hsl(240 3.7% 15.9%)","sidebar-accent-foreground":"hsl(240 4.8% 95.9%)","sidebar-border":"hsl(240 3.7% 15.9%)","sidebar-ring":"hsl(217.2 91.2% 59.8%)"}}},{name:"Blue",shadcnStyle:{light:{background:"hsl(0 0% 100%)",foreground:"hsl(222.2 84% 4.9%)",card:"hsl(0 0% 100%)","card-foreground":"hsl(222.2 84% 4.9%)",popover:"hsl(0 0% 100%)","popover-foreground":"hsl(222.2 84% 4.9%)",primary:"hsl(221.2 83.2% 53.3%)","primary-foreground":"hsl(210 40% 98%)",secondary:"hsl(210 40% 96%)","secondary-foreground":"hsl(222.2 84% 4.9%)",muted:"hsl(210 40% 96%)","muted-foreground":"hsl(215.4 16.3% 46.9%)",accent:"hsl(210 40% 96%)","accent-foreground":"hsl(222.2 84% 4.9%)",destructive:"hsl(0 84.2% 60.2%)","destructive-foreground":"hsl(210 40% 98%)",border:"hsl(214.3 31.8% 91.4%)",input:"hsl(214.3 31.8% 91.4%)",ring:"hsl(221.2 83.2% 53.3%)","chart-1":"hsl(221.2 83.2% 53.3%)","chart-2":"hsl(212 95% 68%)","chart-3":"hsl(216 92% 60%)","chart-4":"hsl(210 98% 78%)","chart-5":"hsl(212 97% 87%)",sidebar:"hsl(0 0% 98%)","sidebar-foreground":"hsl(240 5.3% 26.1%)","sidebar-primary":"hsl(221.2 83.2% 53.3%)","sidebar-primary-foreground":"hsl(210 40% 98%)","sidebar-accent":"hsl(214.3 31.8% 91.4%)","sidebar-accent-foreground":"hsl(222.2 84% 4.9%)","sidebar-border":"hsl(214.3 31.8% 91.4%)","sidebar-ring":"hsl(221.2 83.2% 53.3%)"},dark:{background:"hsl(222.2 84% 4.9%)",foreground:"hsl(210 40% 98%)",card:"hsl(222.2 84% 4.9%)","card-foreground":"hsl(210 40% 98%)",popover:"hsl(222.2 84% 4.9%)","popover-foreground":"hsl(210 40% 98%)",primary:"hsl(217.2 91.2% 59.8%)","primary-foreground":"hsl(222.2 84% 4.9%)",secondary:"hsl(217.2 32.6% 17.5%)","secondary-foreground":"hsl(210 40% 98%)",muted:"hsl(217.2 32.6% 17.5%)","muted-foreground":"hsl(215 20.2% 65.1%)",accent:"hsl(217.2 32.6% 17.5%)","accent-foreground":"hsl(210 40% 98%)",destructive:"hsl(0 62.8% 30.6%)","destructive-foreground":"hsl(210 40% 98%)",border:"hsl(217.2 32.6% 17.5%)",input:"hsl(217.2 32.6% 17.5%)",ring:"hsl(224.3 76.3% 94.1%)","chart-1":"hsl(217.2 91.2% 59.8%)","chart-2":"hsl(212 95% 68%)","chart-3":"hsl(216 92% 60%)","chart-4":"hsl(210 98% 78%)","chart-5":"hsl(212 97% 87%)",sidebar:"hsl(240 5.9% 10%)","sidebar-foreground":"hsl(240 4.8% 95.9%)","sidebar-primary":"hsl(217.2 91.2% 59.8%)","sidebar-primary-foreground":"hsl(222.2 84% 4.9%)","sidebar-accent":"hsl(217.2 32.6% 17.5%)","sidebar-accent-foreground":"hsl(210 40% 98%)","sidebar-border":"hsl(217.2 32.6% 17.5%)","sidebar-ring":"hsl(217.2 91.2% 59.8%)"}}},{name:"Green",shadcnStyle:{light:{background:"hsl(0 0% 100%)",foreground:"hsl(240 10% 3.9%)",card:"hsl(0 0% 100%)","card-foreground":"hsl(240 10% 3.9%)",popover:"hsl(0 0% 100%)","popover-foreground":"hsl(240 10% 3.9%)",primary:"hsl(142.1 76.2% 36.3%)","primary-foreground":"hsl(355.7 100% 97.3%)",secondary:"hsl(240 4.8% 95.9%)","secondary-foreground":"hsl(240 5.9% 10%)",muted:"hsl(240 4.8% 95.9%)","muted-foreground":"hsl(240 3.8% 46.1%)",accent:"hsl(240 4.8% 95.9%)","accent-foreground":"hsl(240 5.9% 10%)",destructive:"hsl(0 84.2% 60.2%)","destructive-foreground":"hsl(0 0% 98%)",border:"hsl(240 5.9% 90%)",input:"hsl(240 5.9% 90%)",ring:"hsl(142.1 76.2% 36.3%)","chart-1":"hsl(142.1 76.2% 36.3%)","chart-2":"hsl(159 84% 45%)","chart-3":"hsl(134 61% 41%)","chart-4":"hsl(120 100% 25%)","chart-5":"hsl(103 43% 50%)",sidebar:"hsl(0 0% 98%)","sidebar-foreground":"hsl(240 5.3% 26.1%)","sidebar-primary":"hsl(142.1 76.2% 36.3%)","sidebar-primary-foreground":"hsl(355.7 100% 97.3%)","sidebar-accent":"hsl(240 4.8% 95.9%)","sidebar-accent-foreground":"hsl(240 5.9% 10%)","sidebar-border":"hsl(240 5.9% 90%)","sidebar-ring":"hsl(142.1 76.2% 36.3%)"},dark:{background:"hsl(20 14.3% 4.1%)",foreground:"hsl(0 0% 95%)",card:"hsl(24 9.8% 10%)","card-foreground":"hsl(0 0% 95%)",popover:"hsl(0 0% 9%)","popover-foreground":"hsl(0 0% 95%)",primary:"hsl(142.1 70.6% 45.3%)","primary-foreground":"hsl(144.9 80.4% 10%)",secondary:"hsl(240 3.7% 15.9%)","secondary-foreground":"hsl(0 0% 98%)",muted:"hsl(0 0% 15%)","muted-foreground":"hsl(240 5% 64.9%)",accent:"hsl(12 6.5% 15.1%)","accent-foreground":"hsl(0 0% 98%)",destructive:"hsl(0 62.8% 30.6%)","destructive-foreground":"hsl(0 85.7% 97.3%)",border:"hsl(240 3.7% 15.9%)",input:"hsl(240 3.7% 15.9%)",ring:"hsl(142.4 71.8% 29.2%)","chart-1":"hsl(142.1 70.6% 45.3%)","chart-2":"hsl(159 84% 45%)","chart-3":"hsl(134 61% 41%)","chart-4":"hsl(120 100% 25%)","chart-5":"hsl(103 43% 50%)",sidebar:"hsl(240 5.9% 10%)","sidebar-foreground":"hsl(240 4.8% 95.9%)","sidebar-primary":"hsl(142.1 70.6% 45.3%)","sidebar-primary-foreground":"hsl(144.9 80.4% 10%)","sidebar-accent":"hsl(240 3.7% 15.9%)","sidebar-accent-foreground":"hsl(0 0% 98%)","sidebar-border":"hsl(240 3.7% 15.9%)","sidebar-ring":"hsl(142.1 70.6% 45.3%)"}}},{name:"Red",shadcnStyle:{light:{background:"hsl(0 0% 100%)",foreground:"hsl(0 0% 3.9%)",card:"hsl(0 0% 100%)","card-foreground":"hsl(0 0% 3.9%)",popover:"hsl(0 0% 100%)","popover-foreground":"hsl(0 0% 3.9%)",primary:"hsl(0 72.2% 50.6%)","primary-foreground":"hsl(0 85.7% 97.3%)",secondary:"hsl(0 0% 96.1%)","secondary-foreground":"hsl(0 0% 9%)",muted:"hsl(0 0% 96.1%)","muted-foreground":"hsl(0 0% 45.1%)",accent:"hsl(0 0% 96.1%)","accent-foreground":"hsl(0 0% 9%)",destructive:"hsl(0 84.2% 60.2%)","destructive-foreground":"hsl(0 0% 98%)",border:"hsl(0 0% 89.8%)",input:"hsl(0 0% 89.8%)",ring:"hsl(0 72.2% 50.6%)","chart-1":"hsl(0 72.2% 50.6%)","chart-2":"hsl(12 76% 61%)","chart-3":"hsl(25 83% 53%)","chart-4":"hsl(349 89% 60%)","chart-5":"hsl(320 65% 52%)",sidebar:"hsl(0 0% 98%)","sidebar-foreground":"hsl(240 5.3% 26.1%)","sidebar-primary":"hsl(0 72.2% 50.6%)","sidebar-primary-foreground":"hsl(0 85.7% 97.3%)","sidebar-accent":"hsl(0 0% 96.1%)","sidebar-accent-foreground":"hsl(0 0% 9%)","sidebar-border":"hsl(0 0% 89.8%)","sidebar-ring":"hsl(0 72.2% 50.6%)"},dark:{background:"hsl(0 0% 3.9%)",foreground:"hsl(0 0% 98%)",card:"hsl(0 0% 3.9%)","card-foreground":"hsl(0 0% 98%)",popover:"hsl(0 0% 3.9%)","popover-foreground":"hsl(0 0% 98%)",primary:"hsl(0 72.2% 50.6%)","primary-foreground":"hsl(0 85.7% 97.3%)",secondary:"hsl(0 0% 14.9%)","secondary-foreground":"hsl(0 0% 98%)",muted:"hsl(0 0% 14.9%)","muted-foreground":"hsl(0 0% 63.9%)",accent:"hsl(0 0% 14.9%)","accent-foreground":"hsl(0 0% 98%)",destructive:"hsl(0 62.8% 30.6%)","destructive-foreground":"hsl(0 0% 98%)",border:"hsl(0 0% 14.9%)",input:"hsl(0 0% 14.9%)",ring:"hsl(0 72.2% 50.6%)","chart-1":"hsl(0 72.2% 50.6%)","chart-2":"hsl(12 76% 61%)","chart-3":"hsl(25 83% 53%)","chart-4":"hsl(349 89% 60%)","chart-5":"hsl(320 65% 52%)",sidebar:"hsl(240 5.9% 10%)","sidebar-foreground":"hsl(240 4.8% 95.9%)","sidebar-primary":"hsl(0 72.2% 50.6%)","sidebar-primary-foreground":"hsl(0 85.7% 97.3%)","sidebar-accent":"hsl(0 0% 14.9%)","sidebar-accent-foreground":"hsl(0 0% 98%)","sidebar-border":"hsl(0 0% 14.9%)","sidebar-ring":"hsl(0 72.2% 50.6%)"}}},{name:"Rose",shadcnStyle:{light:{background:"hsl(0 0% 100%)",foreground:"hsl(15 18% 12%)",card:"hsl(0 0% 100%)","card-foreground":"hsl(15 18% 12%)",popover:"hsl(0 0% 100%)","popover-foreground":"hsl(15 18% 12%)",primary:"hsl(350 70% 42%)","primary-foreground":"hsl(352 100% 97%)",secondary:"hsl(10 12% 94%)","secondary-foreground":"hsl(15 18% 12%)",muted:"hsl(10 12% 94%)","muted-foreground":"hsl(15 10% 48%)",accent:"hsl(15 35% 88%)","accent-foreground":"hsl(15 18% 12%)",destructive:"hsl(0 84.2% 60.2%)","destructive-foreground":"hsl(352 100% 97%)",border:"hsl(12 18% 89%)",input:"hsl(12 18% 89%)",ring:"hsl(350 70% 42%)","chart-1":"hsl(350 70% 42%)","chart-2":"hsl(12 68% 58%)","chart-3":"hsl(25 75% 65%)","chart-4":"hsl(340 85% 62%)","chart-5":"hsl(325 72% 55%)",sidebar:"hsl(8 15% 97%)","sidebar-foreground":"hsl(15 18% 12%)","sidebar-primary":"hsl(350 70% 42%)","sidebar-primary-foreground":"hsl(352 100% 97%)","sidebar-accent":"hsl(15 35% 88%)","sidebar-accent-foreground":"hsl(15 18% 12%)","sidebar-border":"hsl(12 18% 89%)","sidebar-ring":"hsl(350 70% 42%)"},dark:{background:"hsl(15 22% 7%)",foreground:"hsl(12 12% 93%)",card:"hsl(15 22% 7%)","card-foreground":"hsl(12 12% 93%)",popover:"hsl(15 22% 7%)","popover-foreground":"hsl(12 12% 93%)",primary:"hsl(350 75% 58%)","primary-foreground":"hsl(15 22% 7%)",secondary:"hsl(15 15% 16%)","secondary-foreground":"hsl(12 12% 93%)",muted:"hsl(15 15% 16%)","muted-foreground":"hsl(12 8% 68%)",accent:"hsl(20 25% 22%)","accent-foreground":"hsl(12 12% 93%)",destructive:"hsl(0 72.2% 50.6%)","destructive-foreground":"hsl(12 12% 93%)",border:"hsl(15 15% 16%)",input:"hsl(15 15% 16%)",ring:"hsl(350 75% 58%)","chart-1":"hsl(350 75% 58%)","chart-2":"hsl(12 68% 58%)","chart-3":"hsl(25 75% 65%)","chart-4":"hsl(340 85% 62%)","chart-5":"hsl(325 72% 55%)",sidebar:"hsl(15 18% 11%)","sidebar-foreground":"hsl(12 12% 93%)","sidebar-primary":"hsl(350 75% 58%)","sidebar-primary-foreground":"hsl(15 22% 7%)","sidebar-accent":"hsl(20 25% 22%)","sidebar-accent-foreground":"hsl(12 12% 93%)","sidebar-border":"hsl(15 15% 16%)","sidebar-ring":"hsl(350 75% 58%)"}}},{name:"Stone",shadcnStyle:{light:{background:"hsl(0 0% 100%)",foreground:"hsl(25 20% 15%)",card:"hsl(0 0% 100%)","card-foreground":"hsl(25 20% 15%)",popover:"hsl(0 0% 100%)","popover-foreground":"hsl(25 20% 15%)",primary:"hsl(33 54% 38%)","primary-foreground":"hsl(60 9.1% 97.8%)",secondary:"hsl(30 12% 92%)","secondary-foreground":"hsl(25 20% 15%)",muted:"hsl(30 12% 92%)","muted-foreground":"hsl(25 8% 45%)",accent:"hsl(30 25% 85%)","accent-foreground":"hsl(25 20% 15%)",destructive:"hsl(0 84.2% 60.2%)","destructive-foreground":"hsl(60 9.1% 97.8%)",border:"hsl(30 15% 88%)",input:"hsl(30 15% 88%)",ring:"hsl(33 54% 38%)","chart-1":"hsl(33 54% 38%)","chart-2":"hsl(28 40% 52%)","chart-3":"hsl(35 35% 68%)","chart-4":"hsl(42 28% 75%)","chart-5":"hsl(25 45% 28%)",sidebar:"hsl(30 8% 97%)","sidebar-foreground":"hsl(25 20% 15%)","sidebar-primary":"hsl(33 54% 38%)","sidebar-primary-foreground":"hsl(60 9.1% 97.8%)","sidebar-accent":"hsl(30 25% 85%)","sidebar-accent-foreground":"hsl(25 20% 15%)","sidebar-border":"hsl(30 15% 88%)","sidebar-ring":"hsl(33 54% 38%)"},dark:{background:"hsl(25 15% 8%)",foreground:"hsl(30 8% 92%)",card:"hsl(25 15% 8%)","card-foreground":"hsl(30 8% 92%)",popover:"hsl(25 15% 8%)","popover-foreground":"hsl(30 8% 92%)",primary:"hsl(33 54% 58%)","primary-foreground":"hsl(25 15% 8%)",secondary:"hsl(25 10% 18%)","secondary-foreground":"hsl(30 8% 92%)",muted:"hsl(25 10% 18%)","muted-foreground":"hsl(30 6% 65%)",accent:"hsl(28 15% 25%)","accent-foreground":"hsl(30 8% 92%)",destructive:"hsl(0 72.2% 50.6%)","destructive-foreground":"hsl(30 8% 92%)",border:"hsl(25 10% 18%)",input:"hsl(25 10% 18%)",ring:"hsl(33 54% 58%)","chart-1":"hsl(33 54% 58%)","chart-2":"hsl(28 40% 52%)","chart-3":"hsl(35 35% 68%)","chart-4":"hsl(42 28% 75%)","chart-5":"hsl(25 45% 38%)",sidebar:"hsl(25 12% 12%)","sidebar-foreground":"hsl(30 8% 92%)","sidebar-primary":"hsl(33 54% 58%)","sidebar-primary-foreground":"hsl(25 15% 8%)","sidebar-accent":"hsl(28 15% 25%)","sidebar-accent-foreground":"hsl(30 8% 92%)","sidebar-border":"hsl(25 10% 18%)","sidebar-ring":"hsl(33 54% 58%)"}}},{name:"Slate",shadcnStyle:{light:{background:"hsl(0 0% 100%)",foreground:"hsl(215 25% 18%)",card:"hsl(0 0% 100%)","card-foreground":"hsl(215 25% 18%)",popover:"hsl(0 0% 100%)","popover-foreground":"hsl(215 25% 18%)",primary:"hsl(215 45% 32%)","primary-foreground":"hsl(210 40% 98%)",secondary:"hsl(215 15% 93%)","secondary-foreground":"hsl(215 25% 18%)",muted:"hsl(215 15% 93%)","muted-foreground":"hsl(215 12% 48%)",accent:"hsl(215 25% 85%)","accent-foreground":"hsl(215 25% 18%)",destructive:"hsl(0 84.2% 60.2%)","destructive-foreground":"hsl(210 40% 98%)",border:"hsl(215 18% 88%)",input:"hsl(215 18% 88%)",ring:"hsl(215 45% 32%)","chart-1":"hsl(215 45% 32%)","chart-2":"hsl(220 38% 45%)","chart-3":"hsl(210 32% 58%)","chart-4":"hsl(205 25% 68%)","chart-5":"hsl(218 52% 22%)",sidebar:"hsl(215 12% 97%)","sidebar-foreground":"hsl(215 25% 18%)","sidebar-primary":"hsl(215 45% 32%)","sidebar-primary-foreground":"hsl(210 40% 98%)","sidebar-accent":"hsl(215 25% 85%)","sidebar-accent-foreground":"hsl(215 25% 18%)","sidebar-border":"hsl(215 18% 88%)","sidebar-ring":"hsl(215 45% 32%)"},dark:{background:"hsl(215 28% 9%)",foreground:"hsl(215 15% 92%)",card:"hsl(215 28% 9%)","card-foreground":"hsl(215 15% 92%)",popover:"hsl(215 28% 9%)","popover-foreground":"hsl(215 15% 92%)",primary:"hsl(215 45% 62%)","primary-foreground":"hsl(215 28% 9%)",secondary:"hsl(215 20% 18%)","secondary-foreground":"hsl(215 15% 92%)",muted:"hsl(215 20% 18%)","muted-foreground":"hsl(215 10% 65%)",accent:"hsl(215 25% 28%)","accent-foreground":"hsl(215 15% 92%)",destructive:"hsl(0 72.2% 50.6%)","destructive-foreground":"hsl(215 15% 92%)",border:"hsl(215 20% 18%)",input:"hsl(215 20% 18%)",ring:"hsl(215 45% 62%)","chart-1":"hsl(215 45% 62%)","chart-2":"hsl(220 38% 55%)","chart-3":"hsl(210 32% 68%)","chart-4":"hsl(205 25% 78%)","chart-5":"hsl(218 52% 42%)",sidebar:"hsl(215 25% 12%)","sidebar-foreground":"hsl(215 15% 92%)","sidebar-primary":"hsl(215 45% 62%)","sidebar-primary-foreground":"hsl(215 28% 9%)","sidebar-accent":"hsl(215 25% 28%)","sidebar-accent-foreground":"hsl(215 15% 92%)","sidebar-border":"hsl(215 20% 18%)","sidebar-ring":"hsl(215 45% 62%)"}}}],ak=(0,l.memo)(function({label:e,tokenName:t}){let{designTokens:n,currentTokens:r,updateToken:s,designTokensLoaded:i}=av(),o=(0,l.useCallback)((e,t,n)=>{let i=r[e]||"";s(e,t,{prevValue:i,isPreview:n})},[r,s]);return(0,a.jsx)(ah,{tokenName:t,designTokens:n,onColorChange:o,designTokensLoaded:i,nameInInput:e})});function aC({children:e}){return(0,a.jsx)("div",{className:"grid grid-cols-1 @[400px]/colors:grid-cols-2 gap-3",children:e})}function aS(){let[e,t]=(0,l.useState)(!1),[n,r]=(0,l.useState)([0]),[s,i]=(0,l.useState)([1]),[o,c]=(0,l.useState)([1]),d=(0,h.useActiveBlockState)(),u=d?.id,{designTokens:p}=av(),f=iq(p),{updateMultipleTokens:m}=av(),g=(0,l.useRef)(null);(0,l.useEffect)(()=>{Object.keys(f).length>0&&!g.current&&(g.current={...f})},[f]);let x=(0,l.useCallback)((e,t,r)=>{let i=g.current||f;if(!u)return;let a=e??n[0],l=t??s[0],c=r??o[0];0===a&&1===l&&1===c||m(Object.entries(function(e,t,n,r){let s={};for(let[i,a]of Object.entries(e)){let e=function(e,t,n,r){let s=no(e);if(!s)return e;let i=r7(s);return sr({...i,h:void 0!==i.h?(i.h+t+360)%360:0,s:Math.min(1,Math.max(0,(i.s||0)*n)),l:Math.min(1,Math.max(0,(i.l||0)*r))})}(a.trim(),t,n,r);s[i]=e}return s}(i,a,l,c)).map(([e,t])=>({tokenName:e,value:t,prevValue:i[e]||""})),{isPreview:!0,batchName:"batch_palette",customTracking:{token:"color-adjustments",value:`hue:${a},saturation:${l},lightness:${c}`}})},[f,u,n,s,o,m]),v=(0,l.useCallback)(()=>{let e=g.current||f;u&&m(Object.entries(e).map(([e,t])=>({tokenName:e,value:t,prevValue:t})),{isPreview:!1,batchName:"palette_reset",customTracking:{token:"palette-reset",value:"reset"}})},[f,u,m]);return(0,a.jsxs)(tw.Popover,{open:e,onOpenChange:e=>{e&&Object.keys(f).length>0&&(g.current={...f},r([0]),i([1]),c([1])),t(e)},children:[(0,a.jsx)(tw.PopoverTrigger,{asChild:!0,children:(0,a.jsx)(A.Button,{variant:"ghost",size:"sm",tooltip:"Adjustments",className:"gap-2 size-7 rounded-md",onClick:()=>t(!0),children:(0,a.jsx)(ab.SettingsSliders,{})})}),(0,a.jsx)(tw.PopoverContent,{className:"p-4",align:"end",side:"bottom",children:(0,a.jsxs)("div",{className:"flex flex-col gap-4",onClick:e=>e.stopPropagation(),children:[(0,a.jsxs)("div",{className:"flex flex-col gap-3",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("span",{className:"text-label-12 text-v0-gray-900",style:{width:"80px"},children:"Hue"}),(0,a.jsx)(aj,{value:n,onValueChange:e=>{r(e),x(e[0],s[0],o[0])},max:180,min:-180,step:5})]}),(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("span",{className:"text-label-12 text-v0-gray-900",style:{width:"80px"},children:"Saturation"}),(0,a.jsx)(aj,{value:s.map(e=>100*e),onValueChange:e=>{let t=e[0]/100;i([t]),x(n[0],t,o[0])},max:200,min:0,step:10})]}),(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("span",{className:"text-label-12 text-v0-gray-900",style:{width:"80px"},children:"Lightness"}),(0,a.jsx)(aj,{value:o.map(e=>100*e),onValueChange:e=>{let t=e[0]/100;c([t]),x(n[0],s[0],t)},max:150,min:50,step:10})]})]}),(0,a.jsx)("div",{className:"flex justify-end",children:(0,a.jsx)(A.Button,{variant:"secondary",size:"sm",onClick:e=>{e.preventDefault(),e.stopPropagation(),r([0]),i([1]),c([1]),v()},children:"Reset"})})]})})]})}function aM({onBack:e}){return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(iU,{title:"Colors",onBack:e,action:(0,a.jsx)(aS,{})}),(0,a.jsx)("div",{className:"flex-1 overflow-auto @container/colors",children:(0,a.jsxs)("div",{className:"flex flex-col",children:[(0,a.jsx)(sk,{title:"Primary",children:(0,a.jsxs)(aC,{children:[(0,a.jsx)(ak,{label:"Primary",tokenName:"primary"}),(0,a.jsx)(ak,{label:"Primary Foreground",tokenName:"primary-foreground"})]})}),(0,a.jsx)(sk,{title:"Secondary",children:(0,a.jsxs)(aC,{children:[(0,a.jsx)(ak,{label:"Secondary",tokenName:"secondary"}),(0,a.jsx)(ak,{label:"Secondary Foreground",tokenName:"secondary-foreground"})]})}),(0,a.jsx)(sk,{title:"Accent",children:(0,a.jsxs)(aC,{children:[(0,a.jsx)(ak,{label:"Accent",tokenName:"accent"}),(0,a.jsx)(ak,{label:"Accent Foreground",tokenName:"accent-foreground"})]})}),(0,a.jsx)(sk,{title:"Base",children:(0,a.jsxs)(aC,{children:[(0,a.jsx)(ak,{label:"Background",tokenName:"background"}),(0,a.jsx)(ak,{label:"Foreground",tokenName:"foreground"})]})}),(0,a.jsx)(sk,{title:"Card",children:(0,a.jsxs)(aC,{children:[(0,a.jsx)(ak,{label:"Card",tokenName:"card"}),(0,a.jsx)(ak,{label:"Card Foreground",tokenName:"card-foreground"})]})}),(0,a.jsx)(sk,{title:"Popover",children:(0,a.jsxs)(aC,{children:[(0,a.jsx)(ak,{label:"Popover",tokenName:"popover"}),(0,a.jsx)(ak,{label:"Popover Foreground",tokenName:"popover-foreground"})]})}),(0,a.jsx)(sk,{title:"Muted",children:(0,a.jsxs)(aC,{children:[(0,a.jsx)(ak,{label:"Muted",tokenName:"muted"}),(0,a.jsx)(ak,{label:"Muted Foreground",tokenName:"muted-foreground"})]})}),(0,a.jsx)(sk,{title:"Destructive",children:(0,a.jsxs)(aC,{children:[(0,a.jsx)(ak,{label:"Destructive",tokenName:"destructive"}),(0,a.jsx)(ak,{label:"Destructive Foreground",tokenName:"destructive-foreground"})]})}),(0,a.jsx)(sk,{title:"Border & Input",children:(0,a.jsxs)(aC,{children:[(0,a.jsx)(ak,{label:"Border",tokenName:"border"}),(0,a.jsx)(ak,{label:"Input",tokenName:"input"}),(0,a.jsx)(ak,{label:"Ring",tokenName:"ring"})]})}),(0,a.jsx)(sk,{title:"Chart",children:(0,a.jsxs)(aC,{children:[(0,a.jsx)(ak,{label:"Chart 1",tokenName:"chart-1"}),(0,a.jsx)(ak,{label:"Chart 2",tokenName:"chart-2"}),(0,a.jsx)(ak,{label:"Chart 3",tokenName:"chart-3"}),(0,a.jsx)(ak,{label:"Chart 4",tokenName:"chart-4"}),(0,a.jsx)(ak,{label:"Chart 5",tokenName:"chart-5"})]})}),(0,a.jsx)(sk,{title:"Sidebar",children:(0,a.jsxs)(aC,{children:[(0,a.jsx)(ak,{label:"Sidebar",tokenName:"sidebar"}),(0,a.jsx)(ak,{label:"Sidebar Foreground",tokenName:"sidebar-foreground"}),(0,a.jsx)(ak,{label:"Sidebar Primary",tokenName:"sidebar-primary"}),(0,a.jsx)(ak,{label:"Sidebar Primary Foreground",tokenName:"sidebar-primary-foreground"}),(0,a.jsx)(ak,{label:"Sidebar Accent",tokenName:"sidebar-accent"}),(0,a.jsx)(ak,{label:"Sidebar Accent Foreground",tokenName:"sidebar-accent-foreground"}),(0,a.jsx)(ak,{label:"Sidebar Border",tokenName:"sidebar-border"}),(0,a.jsx)(ak,{label:"Sidebar Ring",tokenName:"sidebar-ring"})]})})]})})]})}function aN({designTokens:e,onClick:t}){let[n,r]=(0,l.useState)(!1),s=(0,h.useActiveBlockState)(),i=s?.id,o=iq(e),{updateMultipleTokens:c}=av(),{atoms:d}=(0,e5.useCurrentBlockDesignMode)(),u=(0,sJ.useAtomValue)(d.previewTheme),p=(0,l.useMemo)(()=>0===Object.keys(o).length?null:{light:"light"===u?o:{},dark:"dark"===u?o:{},common:{radius:"0.5rem"}},[o,u]),f=(0,l.useMemo)(()=>{let e=p?{name:"Current",shadcnStyle:p}:null;return e?[e,...aw]:aw},[p]);return(0,a.jsxs)(iz,{className:"hover:has-[.palette-swatch:hover]:bg-transparent dark:hover:has-[.palette-swatch:hover]:bg-transparent",children:[(0,a.jsx)(iB,{onClick:t,className:"group",action:(0,a.jsx)(iH,{}),children:"Colors"}),(0,a.jsx)("div",{className:"px-3 pb-3",children:(0,a.jsxs)(ee.DropdownMenu,{open:n,onOpenChange:r,children:[(0,a.jsx)(ee.DropdownMenuTrigger,{asChild:!0,children:(0,a.jsx)("button",{className:"palette-swatch w-full hover:brightness-90 dark:hover:brightness-110 transition-all duration-150",children:p?(0,a.jsx)(iD.DesignSystemMiniPreview,{shadcnStyle:p,size:"long",theme:u}):(0,a.jsx)(iD.EmptyDesignSystemPreview,{size:"long"})})}),(0,a.jsx)(ee.DropdownMenuContent,{className:"max-h-80 overflow-y-auto",align:"center",style:{width:"var(--radix-popper-anchor-width)"},children:(0,a.jsx)(ee.DropdownMenuGroup,{children:f.map(e=>(0,a.jsx)(ee.DropdownMenuItem,{className:"px-2 py-2 h-auto",onClick:()=>{console.log("Selected palette:",e.name),i&&c(Object.entries(e.shadcnStyle[u]).map(([e,t])=>({tokenName:e,value:t,prevValue:o[e]||""})),{isPreview:!1,batchName:"palette_batch",customTracking:{token:"color-preset",value:e.name}}),r(!1)},children:(0,a.jsx)(iD.DesignSystemMiniPreview,{shadcnStyle:e.shadcnStyle,size:"long",theme:u})},e.name))})})]})})]})}let aI=(0,eJ.default)(e=>{(0,N.track)("EditDesignSystemToken",{designSystemId:e.designSystemId,token:e.token,value:e.value,theme:e.theme,editor:"design-mode"})},1e3);function aT({designTokens:e}){let t=(0,h.useActiveBlockState)(),n=t?.id,r=e.common.radius||"0.5rem",s=e=>{let t=e.match(/([0-9.]+)\w*rem/),n=e.match(/([0-9.]+)\w*(px)?/);return t?parseFloat(t[1]):n?parseFloat(n[1])/16:.5},[i,o]=(0,l.useState)([s(r)]),[c,d]=(0,l.useState)(!1),{atoms:u}=(0,e5.useCurrentBlockDesignMode)(),p=(0,sJ.useAtomValue)(u.previewTheme),{queueVersion:f,lastIsPreview:m,setLastFileContent:g,setLastIsPreview:x,setSaveNextState:y}=sK(),j=(0,v.useChatId)(),{pushHistory:w}=sY(),{data:k}=(0,b.useServerQuerySWR)(["chat","attributes"],{chatId:j},{stopFetch:!j}),C=k?.ok?k.value.designSystemId:null;(0,l.useEffect)(()=>{e.common.radius&&!c&&o([s(e.common.radius)])},[e.common.radius,c]);let S=(0,l.useCallback)((e,t,s=!1)=>{let i;o(e);let a=(i=e[0].toFixed(3).replace(/\.?0+$/,""),`${i}rem`),l="radius",c=Date.now();f("CSS:"+l,c,()=>{if(!eZ.designModeInlineEditRef.current||!n)return;let e=`--${l}`;if(!s){if(t&&!m||!m&&!t){let{path:t,content:n}=(0,it.getGlobalsCssWithInlineEdit)(eZ.designModeInlineEditRef);n?.includes(e)&&g({file:t,content:n})}let{path:n}=(0,it.getGlobalsCssWithInlineEdit)(eZ.designModeInlineEditRef);n&&w(n)}t?x(!0):(x(!1),y(!0)),(0,e4.sendToIframeFromBlockId)(n,{type:"devtools_sync_design",payload:{type:"css-var",variable:e,value:a,prev:r}}),ap(e,a,c,eZ.designModeInlineEditRef,p),aI({token:l,value:a,theme:p,designSystemId:C})})},[r,f,n,m,g,x,y,w,p,C]);return(0,a.jsx)(iz,{children:(0,a.jsxs)("div",{className:"flex items-center gap-3 px-3 py-3",children:[(0,a.jsx)("div",{className:"flex items-center gap-2",style:{width:"60px"},children:(0,a.jsx)("p",{className:"text-label-12 select-none font-medium",children:"Radius"})}),(0,a.jsx)(aj,{value:i,onValueChange:S,onValueChangeStart:()=>d(!0),onValueChangeEnd:()=>d(!1),max:3,min:0,step:.125,decimalPlaces:3})]})})}let aE=(0,eb.withNewIcon)('<rect opacity="0.5" x="7.75" y="6.75" width="18.5" height="10.5" rx="2.25" stroke="var(--v0-gray-900)" stroke-width="1.5"/><rect x="7.75" y="5.75" width="18.5" height="10.5" rx="2.25" fill="var(--v0-white)" stroke="var(--v0-gray-900)" stroke-width="1.5"/>',{viewBox:"0 0 32 24"}),aL=(0,eb.withNewIcon)('<rect opacity="0.5" x="7.75" y="5.75" width="18.5" height="13.5" rx="2.25" fill="var(--v0-gray-900)" stroke="var(--v0-gray-900)" stroke-width="1.5"/><rect x="7.75" y="5.75" width="18.5" height="10.5" rx="2.25" fill="var(--v0-white)" stroke="var(--v0-gray-900)" stroke-width="1.5"/>',{viewBox:"0 0 32 24"}),a_=(0,eb.withNewIcon)('<rect opacity="0.5" x="7.75" y="6.75" width="18.5" height="14.5" rx="2.25" fill="var(--v0-gray-900)" stroke="var(--v0-gray-900)" stroke-width="1.5"/><rect x="7.75" y="5.75" width="18.5" height="10.5" rx="2.25" fill="var(--v0-white)" stroke="var(--v0-gray-900)" stroke-width="1.5"/>',{viewBox:"0 0 32 24"}),aP=(0,eb.withNewIcon)('<rect x="6.75" y="6.75" width="18.5" height="10.5" rx="2.25" fill="var(--v0-white)" stroke="var(--v0-gray-900)" stroke-width="1.5"/>',{viewBox:"0 0 32 24"}),aA=(0,eb.withNewIcon)('<rect opacity="0.5" x="4.75" y="4.75" width="22.5" height="14.5" rx="4.25" fill="var(--v0-gray-900)" stroke="var(--v0-gray-900)" stroke-width="1.5"/><rect x="6.75" y="6.75" width="18.5" height="10.5" rx="2.25" fill="var(--v0-white)" stroke="var(--v0-gray-900)" stroke-width="1.5"/>',{viewBox:"0 0 32 24"}),aR=(0,eb.withNewIcon)('<rect opacity="0.5" x="7.75" y="7.75" width="18.5" height="10.5" fill="var(--v0-gray-900)" stroke="var(--v0-gray-900)" stroke-width="1.5"/><rect x="5.75" y="5.75" width="18.5" height="10.5" fill="var(--v0-white)" stroke="var(--v0-gray-900)" stroke-width="1.5"/>',{viewBox:"0 0 32 24"}),aD={serialize:e=>`${e}px`,deserialize:e=>e&&parseInt(e.replace("px",""))||0},aF=[{name:"Small",x:0,y:1,blur:4,spread:0,opacity:20},{name:"Medium",x:0,y:2,blur:6,spread:0,opacity:40},{name:"Large",x:0,y:4,blur:12,spread:-1,opacity:80},{name:"None",x:0,y:0,blur:0,spread:0,opacity:0},{name:"Glow",x:0,y:0,blur:4,spread:0,opacity:40},{name:"Solid",x:4,y:4,blur:0,spread:0,opacity:15}];function aO({preset:e,isSelected:t,onClick:n}){let r=(e=>{switch(e){case"Small":return aE;case"Medium":return aL;case"Large":return a_;case"None":default:return aP;case"Glow":return aA;case"Solid":return aR}})(e.name);return(0,a.jsxs)("button",{className:`shadow-card relative flex flex-col items-center justify-start pt-3 pb-2 h-16 rounded-md border transition-all duration-150 ${t?"border-v0-gray-900 bg-v0-alpha-100":"border-v0-alpha-400 hover:border-v0-alpha-600 hover:bg-v0-alpha-50"}`,onClick:n,children:[(0,a.jsx)(r,{className:"size-8"}),(0,a.jsx)("span",{className:"text-label-13 font-medium text-v0-gray-900 mt-1",children:e.name})]})}let a$={"shadow-x":{transformer:aD,defaultValue:0,min:-20,max:20,step:1,label:"X Offset"},"shadow-y":{transformer:aD,defaultValue:0,min:-20,max:20,step:1,label:"Y Offset"},"shadow-blur":{transformer:aD,defaultValue:4,min:0,max:20,step:1,label:"Blur"},"shadow-spread":{transformer:aD,defaultValue:0,min:-5,max:10,step:1,label:"Spread"},"shadow-opacity":{transformer:{serialize:e=>(e/100).toString(),deserialize:e=>Math.round(100*parseFloat(e))},defaultValue:5,min:0,max:100,step:5,label:"Opacity"}};function aV({onClick:e}){let{updateMultipleTokens:t,currentTokens:n}=av(),r=(0,l.useCallback)(e=>{let t=e=>a$[e].transformer.deserialize(n[e]);return t("shadow-x")===e.x&&t("shadow-y")===e.y&&t("shadow-blur")===e.blur&&t("shadow-spread")===e.spread&&t("shadow-opacity")===e.opacity},[n]);return(0,a.jsxs)(iz,{className:"hover:has-[.shadow-card:hover]:bg-transparent dark:hover:has-[.shadow-card:hover]:bg-transparent",children:[(0,a.jsx)(iB,{onClick:e,className:"group",action:(0,a.jsx)(iH,{}),children:"Shadows"}),(0,a.jsx)("div",{className:"grid grid-cols-3 gap-3 p-3 pt-0",children:aF.map(e=>(0,a.jsx)(aO,{preset:e,isSelected:r(e),onClick:r=>{r.stopPropagation(),t([{tokenName:"shadow-x",value:a$["shadow-x"].transformer.serialize(e.x),prevValue:n["shadow-x"]||""},{tokenName:"shadow-y",value:a$["shadow-y"].transformer.serialize(e.y),prevValue:n["shadow-y"]||""},{tokenName:"shadow-blur",value:a$["shadow-blur"].transformer.serialize(e.blur),prevValue:n["shadow-blur"]||""},{tokenName:"shadow-spread",value:a$["shadow-spread"].transformer.serialize(e.spread),prevValue:n["shadow-spread"]||""},{tokenName:"shadow-opacity",value:a$["shadow-opacity"].transformer.serialize(e.opacity),prevValue:n["shadow-opacity"]||""}],{isPreview:!1,batchName:"batch_shadow_preset",customTracking:{token:"shadow-preset",value:e.name}})}},e.name))})]})}function az({onBack:e}){let{updateToken:t,currentTokens:n,designTokens:r,designTokensLoaded:s}=av(),i=(0,l.useCallback)((e,n)=>{let r=a$[e].transformer.serialize(n[0]);t(e,r)},[t]),o=(0,l.useCallback)((e,n)=>{t(e,n)},[t]);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(iU,{title:"Shadows",onBack:e}),(0,a.jsx)("div",{className:"flex-1 overflow-auto",children:(0,a.jsxs)("div",{className:"flex flex-col gap-4 p-4",children:[Object.entries(a$).map(([e,t])=>{let r=n[e],s=t.transformer.deserialize(r);return(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("span",{className:"text-label-12 text-v0-gray-900",style:{width:"80px"},children:t.label}),(0,a.jsx)(aj,{value:[s],onValueChange:t=>i(e,t),max:t.max,min:t.min,step:t.step})]},e)}),(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("label",{className:"text-label-12 text-v0-gray-900",style:{width:"80px"},children:"Color"}),(0,a.jsx)(ah,{tokenName:"shadow-color",designTokens:r,onColorChange:o,designTokensLoaded:s})]})]})})]})}var aB=e.i(636159);let aH=RegExp("-(background|foreground|card|card-foreground|popover|popover-foreground|primary|primary-foreground|secondary|secondary-foreground|muted|muted-foreground|accent|accent-foreground|destructive|destructive-foreground|border|input|ring|chart-1|chart-2|chart-3|chart-4|chart-5|sidebar|sidebar-foreground|sidebar-primary|sidebar-primary-foreground|sidebar-accent|sidebar-accent-foreground|sidebar-border|sidebar-ring)\\b","g"),aU=/from\s*['"]@\/components\/ui/g,aW=RegExp("-(red|orange|amber|yellow|lime|green|emerald|teal|cyan|sky|blue|indigo|violet|purple|fuchsia|pink|rose|slate|gray|zinc|neutral|stone)-","g"),aq=/-\[(#(?:[0-9a-fA-F]{3,8})|rgba?\([^\]]+\)|hsla?\([^\]]+\)|[a-zA-Z]+\b)\]/g;var aG=e.i(343428),aX=e.i(686134);let aZ="design-warning-dismissed-";function aY({onClick:e,title:t,description:n,onDismiss:r,dismissible:s=!0}){return(0,a.jsx)("div",{className:"border-b border-v0-gray-200 bg-v0-blue-300 p-3 text-v0-blue-900",children:(0,a.jsxs)("div",{className:"flex justify-between items-start gap-2",children:[(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsx)("div",{className:"text-sm font-medium mb-1",children:t}),(0,a.jsx)("div",{className:"text-sm mb-3",children:n}),(0,a.jsxs)(A.Button,{size:"sm",variant:"ghost",className:"h-7 rounded-md px-2 hover:bg-v0-alpha-500 focus-visible:bg-v0-alpha-500 border-transparent bg-v0-alpha-200 text-v0-gray-1000 hover:border-transparent focus:border-transparent focus-visible:border-transparent disabled:border-transparent disabled:bg-v0-alpha-200 disabled:text-v0-gray-500 aria-disabled:border-transparent aria-disabled:bg-v0-alpha-200 aria-disabled:text-v0-gray-500",onClick:e,children:[(0,a.jsx)("span",{children:"Fix with "}),(0,a.jsx)(iZ.V0LoadableLogo,{})]})]}),s&&r&&(0,a.jsx)(A.Button,{size:"sm",variant:"ghost",className:"h-5 w-5 p-0 hover:bg-v0-alpha-500 rounded-sm",onClick:r,tooltip:"Dismiss",children:(0,a.jsx)(aG.XIcon,{className:"h-2.5 w-2.5"})})]})})}function aJ({title:e,description:t}){return(0,a.jsx)("div",{className:"border-b border-v0-gray-200 bg-v0-blue-300 p-3 text-v0-blue-900",children:(0,a.jsx)("div",{className:"flex justify-between items-start gap-2",children:(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsx)("div",{className:"text-sm font-medium mb-1",children:e}),(0,a.jsx)("div",{className:"text-sm",children:t})]})})})}function aK({title:e,onExpand:t}){return(0,a.jsx)("div",{className:"border-b border-v0-gray-200 bg-v0-blue-300 p-3 text-v0-blue-900",children:(0,a.jsxs)("div",{className:"flex justify-between items-start gap-2",children:[(0,a.jsx)("div",{className:"flex-1 min-w-0",children:(0,a.jsx)("div",{className:"text-sm font-medium truncate",children:e})}),(0,a.jsx)(A.Button,{size:"sm",variant:"ghost",className:"h-5 w-5 p-0 hover:bg-v0-alpha-500 rounded-sm",onClick:t,tooltip:"Open",children:(0,a.jsx)(aX.ChevronDownIcon,{className:"h-2.5 w-2.5"})})]})})}function aQ(e,t){let n=`${aZ}${t}-${e}`,[r,s]=(0,tN.useLocalStorage)(n,!1);return{isDismissed:r,dismiss:()=>{e&&t&&s(!0)},expand:()=>{e&&t&&s(!1)},clearAllDismissedStates:()=>{try{let e=[];for(let t=0;t<localStorage.length;t++){let n=localStorage.key(t);n?.startsWith(aZ)&&e.push(n)}for(let t of e)localStorage.removeItem(t);s(!1)}catch{}}}}function a0(e,t){let n=(0,h.useActiveBlockState)(),{isTWv4:r}=iR(),s=(0,l.useMemo)(()=>e&&n&&"code-project"===n.type?function(e,t){try{let n=(0,s0.parseMultiFileSource)({source:e,blockType:"code-project",blockId:t});return function(e){let t=0,n=0,r=0,s=0;for(let i of e.filter(e=>e.meta.file?.endsWith(".tsx"))){let e=i.source;t+=(e.match(aH)||[]).length,n+=(e.match(aW)||[]).length,r+=(e.match(aq)||[]).length,s+=(e.match(aU)||[]).length}let i=t+3*s,a=n+r,o=i+a,l=0===o?0:i/o;return{shadcnCount:t,tailwindCount:n,arbitraryColorCount:r,shadcnImportCount:s,shadcnIndex:i,tailwindIndex:a,percentage:l,needsImprovement:l<.5&&o>0}}(n)}catch(e){return console.warn("Failed to analyze shadcn usage:",e),{shadcnCount:0,tailwindCount:0,arbitraryColorCount:0,shadcnImportCount:0,shadcnIndex:0,tailwindIndex:0,percentage:0,needsImprovement:!1}}}(n.source,n.id):null,[n,e]),i=(0,l.useMemo)(()=>e?r?!1===t?"globals":s?.needsImprovement?"colors":null:"tailwind":null,[s?.needsImprovement,r,e,t]),a=aQ(e,"colors"),o=aQ(e,"tailwind"),c=aQ(e,"globals"),d=(0,l.useMemo)(()=>"colors"===i&&a.isDismissed||"tailwind"===i&&o.isDismissed||"globals"===i&&c.isDismissed?null:i,[i,a.isDismissed,o.isDismissed,c.isDismissed]),u="colors"===i?a:"globals"===i?c:o;return{activeWarning:d,rawActiveWarning:i,shadcnUsage:s,warningState:u}}function a1({hasGlobalsCss:e}){let t=(0,h.useActiveBlockState)(),n=(0,v.useChatId)(),{actions:r}=(0,eB.useCurrentChatPrompt)(),{activeWarning:s,rawActiveWarning:i,shadcnUsage:o,warningState:c}=a0(n,e),d=(0,l.useEffectEvent)(()=>{(0,N.track)("ShowDesignSystemTokenWarning",{percent:Math.round(100*(o?.percentage||0))},{blockId:t?.id,chatId:n})});return((0,l.useEffect)(()=>{"colors"===s&&d()},[s]),"tailwind"===s)?(0,a.jsx)(aY,{onClick:()=>{(0,N.track)("ClickDesignSystemTailwindWarning"),r.handleInputChange({initialValue:'Upgrade to Tailwind v4 (include tw-animate-css). Change both globals.css and package.json. Ensure globals.css contains shadcn :root, .dark, and @theme design tokens. Use those semantic design tokens throughout the generation, not hardcoded colors. Make any other changes as needed to migrate to Tailwind v4. Do NOT wrap :root, .dark, and @theme in "@layer base". If there are shadcn colors using just channel values, wrap them in hsl() for the new version in the :root and .dark sections (if the values are already wrapped in a color function, no need to wrap them again).'})},title:"Upgrade to Tailwind v4.",description:"To use design systems, upgrade to Tailwind v4.",dismissible:!1}):"globals"===s?(0,a.jsx)(aJ,{title:"No globals.css file found.",description:"Add a design system to customize design tokens."}):"colors"===s?(0,a.jsx)(aY,{onClick:()=>{n&&((0,N.track)("ClickDesignSystemTokenWarning",{percent:Math.round(100*(o?.percentage||0))}),r.handleInputChange({initialValue:"Please update this code to use semantic color tokens from your design system instead of hardcoded colors. Replace specific color values (like bg-blue-500, text-red-600, #ffffff, etc.) with semantic tokens (like bg-primary, text-secondary, bg-background, text-foreground, etc.) that will work better with the design system and support proper theming."}))},title:"This generation isn't using design system tokens.",description:"Modify this generation to use the correct tokens to use design systems.",onDismiss:c.dismiss}):"colors"===i&&c.isDismissed?(0,a.jsx)(aK,{title:"This generation isn't using design system tokens.",onExpand:c.expand}):null}function a2({designTokens:e,hasGlobalsCss:t}){let[n,r]=(0,l.useState)("root");(0,aB.useLoadRegularNamesGoogleFonts)();let{activeWarning:s}=a0((0,v.useChatId)(),t),i=!!s&&"globals"!==s,o=!!s,c=(0,l.useMemo)(()=>{switch(n){case"colors":return(0,a.jsx)(aM,{onBack:()=>r("root")});case"fonts":return(0,a.jsx)(i2,{onBack:()=>r("root"),designTokens:e});case"shadows":return(0,a.jsx)(az,{onBack:()=>r("root")});default:return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(a1,{hasGlobalsCss:t}),(0,a.jsxs)(iz,{className:(0,iV.cn)("transition-opacity",i&&"opacity-30 cursor-default pointer-events-none"),children:[(0,a.jsx)(iB,{className:"py-2 my-0",action:(0,a.jsx)(ad,{}),children:"Design System"}),(0,a.jsx)("div",{className:"px-3 pb-3",children:(0,a.jsx)(ae,{className:"shrink",editedValues:e})})]}),(0,a.jsxs)("div",{className:(0,iV.cn)("flex-1 overflow-auto @container/colors flex flex-col transition-opacity",o&&"opacity-30 cursor-default pointer-events-none"),children:[(0,a.jsx)(i0,{onClick:()=>r("fonts")}),(0,a.jsx)(aN,{designTokens:e,onClick:()=>r("colors")}),(0,a.jsx)(aT,{designTokens:e}),(0,a.jsx)(aV,{onClick:()=>r("shadows")})]})]})}},[n,e,t,i,o]);return(0,a.jsx)(ax,{designTokens:e,children:(0,a.jsx)(i5,{designTokens:e,children:c})})}var a5=e.i(529077),a3=e.i(754687);function a4(){let{atoms:e,actions:t}=(0,e5.useCurrentBlockDesignMode)(),n=(0,sJ.useAtomValue)(e.previewTheme),r=()=>{t.setPreviewTheme("light"===n?"dark":"light",eZ.designModeInlineEditRef)};return(0,a.jsx)(tE.Tabs,{variant:"secondary",value:n,children:(0,a.jsxs)(tE.TabsList,{className:(0,d.cn)("h-6 overflow-hidden rounded-full border p-0 focus-within:overflow-visible [&>[role=tab]]:h-6 [&>[role=tab]]:size-5.5","[&>[role=tab]>.absolute]:-inset-px [&>[role=tab]>.absolute]:rounded-full [&>[role=tab]>.absolute]:border [&>[role=tab]>.absolute]:bg-transparent"),children:[(0,a.jsx)(tp.Tooltip,{content:"Light",children:(0,a.jsxs)(tE.TabsTrigger,{className:"[&>div]:shrink-0",value:"light",onClick:r,children:[(0,a.jsx)(a5.Sun,{size:12}),(0,a.jsx)("span",{className:"sr-only",children:"Light"})]})}),(0,a.jsx)(tp.Tooltip,{content:"Dark",children:(0,a.jsxs)(tE.TabsTrigger,{className:"[&>div]:shrink-0",value:"dark",onClick:r,children:[(0,a.jsx)(a3.Moon,{size:12}),(0,a.jsx)("span",{className:"sr-only",children:"Dark"})]})})]})})}function a6(){return(0,e5.useDesignModeEnabled)()?(0,a.jsx)(oc,{}):null}function a9({children:e,className:t}){return(0,a.jsx)("div",{className:(0,d.cn)("material-medium bg-v0-background-100 border border-v0-alpha-400 rounded-[8px] absolute inset-0 z-10 overflow-auto mb-2 flex flex-col mx-auto w-full max-w-3xl",t),"data-design-mode-editor":!0,children:e})}function a8({icon:e,description:t}){return(0,a.jsxs)("div",{className:"flex size-full flex-col items-center justify-center gap-4 px-4 text-center",children:[(0,a.jsx)("div",{className:"border-v0-alpha-400 material-small flex size-8 flex-col items-center justify-center rounded-md border text-v0-gray-900",children:e}),(0,a.jsx)("p",{className:"text-label-14 max-w-48 text-pretty text-v0-gray-1000",children:t})]})}function a7({children:e}){return(0,a.jsx)("div",{className:"border-v0-alpha-400 h-13 flex w-full items-center justify-between gap-3 border-b px-3 py-3",children:e})}function oe({children:e}){return(0,a.jsx)("div",{className:"select-none flex items-center gap-1",children:e})}function ot({type:e,name:t,active:n,onClick:r}){let s="root"===e,i=n||"element"===e;if("placeholder"===e)return(0,a.jsx)("div",{className:"border border-dashed border-v0-gray-300 w-[72px] bg-transparent flex items-center justify-center gap-1.5 h-6 whitespace-nowrap rounded-md px-[6px] py-0.5 font-mono text-[13px]"});let o=s?(0,a.jsx)(e1.DesignSystemsIcon,{}):(0,a.jsx)(eQ.Diamond,{}),l=(0,a.jsx)(e2.Badge,{variant:i?"blue":"gray",contrast:"subtle",size:"medium",className:(0,d.cn)("h-6 rounded-[6px] font-mono text-[13px] px-[6px] gap-1.5 border",i?"border-v0-blue-300":"border-v0-gray-300"),prefix:o,children:s?"Page":t});return r?(0,a.jsx)("button",{onClick:r,className:"flex items-center opacity-80",children:l}):l}function on(e,t,n,r){return e.slice(0,t)+r+e.slice(t+n)}let or=(0,eJ.default)(()=>{(0,N.track)("DesignModeEdit",{type:"className"})},500),os=(0,eJ.default)(()=>{(0,N.track)("DesignModeEdit",{type:"icon"})},500),oi=(0,eJ.default)(()=>{(0,N.track)("DesignModeEdit",{type:"content"})},500),oa=(0,eJ.default)(()=>{(0,N.track)("DesignModeEdit",{type:"prop"})},500),oo=(0,eJ.default)(()=>{(0,N.track)("DesignModeAction",{type:"select"})},500);function ol(){return(0,a.jsxs)("div",{className:"flex flex-col gap-3 p-3",children:[(0,a.jsx)(i4.Skeleton,{className:"h-[128px] w-full"}),(0,a.jsx)(i4.Skeleton,{className:"h-[73px] w-full"}),(0,a.jsx)(i4.Skeleton,{className:"h-[113px] w-full"}),(0,a.jsx)(i4.Skeleton,{className:"h-[45px] w-full"}),(0,a.jsx)(i4.Skeleton,{className:"h-[183px] w-full"})]})}function oc(){var e;let[t,n]=(0,l.useState)({parts:null,selected:!1,info:void 0}),r=(0,y.useLatest)(t),s=(0,l.useRef)(null),{designTokens:i}=(e=t.info,{designTokens:(0,l.useMemo)(()=>{let t=e?.dsTokens;if(!("object"==typeof t&&t&&"default"in t&&"dark"in t&&"theme"in t))return{common:{},light:{},dark:{},theme:{}};let n=(0,al.stripDash)(t.default),r=(0,al.stripDash)(t.dark),s=(0,al.stripDash)(t.theme),i={};for(let e in n)e in r||(i[e]=n[e]);for(let e in n)e in r||(r[e]=n[e]);return{common:i,light:n,dark:r,theme:s}},[e])}),{actions:c}=(0,e5.useCurrentBlockDesignMode)(),u=(0,h.useActiveBlockState)(),p=u?.id,{isTWv4:f}=iR(),m=(0,l.useMemo)(()=>{if(!u)return!1;let e="code-project"===u.type?(0,s0.parseMultiFileSource)({source:u.source,blockType:"code-project",blockId:u.id}):[];return!!(0,it.getGlobalsCssFromFiles)(e)},[u]),{pushHistory:g}=sY(),{queueVersion:x,lastFileContent:b,saveNextState:j,lastIsPreview:w,currentQueue:k,setLastFileContent:C,setLastIsPreview:S,setSaveNextState:M}=sK(),I=(0,l.useCallback)((e,t,n,s=!1)=>{x("C:"+e,Date.now(),()=>{if(!eZ.designModeInlineEditRef.current||!r.current.parts)return;if(!s&&(n&&!w||!w&&!n)){let e=r.current.file,t=eZ.designModeInlineEditRef.current.getContent(e)??"";C({file:e,content:t})}n?S(!0):(S(!1),M(!0));let i=r.current.parts[e]?.value||"";i.startsWith(" ")&&(t=" "+t),i.endsWith(" ")&&(t+=" ");let a=r.current.parts[e]?.lineNumber||1,o=(r.current.parts[e]?.columnNumber||0)+ +!!r.current.defined,l=r.current.defined?i.length:0,c=r.current.defined?t:` ${r.current.info?.classAttributeName||"className"}=${JSON.stringify(t)}`,d=eZ.designModeInlineEditRef.current.getContent(r.current.file);if(!d)return;let u=d.split("\n"),h=0;for(let e=0;e<a-1;e++)h+=(u[e]?.length||0)+1;let p=d.substring(0,h+o-1)+c+d.substring(h+o-1+l),f=[...p.matchAll(/font-\['([^']+)','([^']+)_Fallback'\]/g)],m=function(e,t){let n=RegExp(`(^|\\n)import\\s+.*\\s+from\\s+['"]${t}['"]\\n`,"g").exec(e);if(n){let e=n[0],t=e.indexOf("{"),r=e.indexOf("}");if(-1===t||-1===r)return{index:n.index,statement:e,imports:[]};let s=e.substring(t+1,r).split(",").map(e=>{let t=e.trim();if(t.includes(" as ")){let[e,n]=t.split(" as ").map(e=>e.trim());return{name:e,alias:n}}return{name:t}}).filter(e=>e.name&&e.name.length>0);return{index:n.index,statement:e,imports:s}}return null}(p,"next/font/google");if(f.length||m){let e=[];for(let t of f)t[1]===t[2]&&t[1]&&e.push(t[1]);if(m){let{index:t,statement:n,imports:r}=m,s=new Set(r.map(e=>e.name)),i=new Set(e),a=[],o="";for(let t of e)a.push(`${t} as V0_Font_${t}`),s.has(t)||(o+=`
V0_Font_${t}({ weight: ${JSON.stringify((0,iw.getFontAvailableWeights)(t))} })`);p=function(e,t,n){if(t<0||t>e.length)throw Error("Index out of bounds");return e.slice(0,t)+n+e.slice(t)}(p,t+n.length,o);let l=a.length?`
import { ${a.join(", ")} } from 'next/font/google'
`:"";for(let e of(p=sf(p,t,n.length,l),s))i.has(e)||(p=p.replace(RegExp(`\\nV0_Font_${e}\\([^}]+\\}\\s*\\)`,"g"),""))}else if(e.length){let t=function(e){let t,n,r=/(^|\n)(import\s+[^'"]*?['"][^'"]+['"])/g,s=-1;for(;null!==(t=r.exec(e));){let n=t.index+t[1].length+t[2].length,r=e.indexOf("\n",n);-1===r?r=e.length:r+=1,s=r}if(-1!==s)return s;let i=/(^|\n)('|")use\s+\w+('|")/g,a=-1;for(;null!==(n=i.exec(e));)a=n.index+n[0].length;return -1!==a?a:0}(p),n="\n"===p[t]?"\n"===p[t+1]?2:1:0,r=(t?"\n":"")+`import { ${e.map(e=>`${e} as V0_Font_${e}`).join(", ")} } from 'next/font/google'

${e.map(e=>`V0_Font_${e}({ weight: ${JSON.stringify((0,iw.getFontAvailableWeights)(e))} })`).join("\n\n")}

`;p=sf(p,t,n,r)}}return eZ.designModeInlineEditRef.current.postMessage({type:"devtools_sync_design",payload:{type:"class",prev:i,value:t}}),eZ.designModeInlineEditRef.current.inlineEdit(r.current.file,0,0,0,p,Date.now(),void 0,[0,d.length]),or(),!0})},[x,r,w,C,S,M]),T=(0,l.useCallback)((e,t,n)=>{let s=Date.now();x("I",s,()=>{if(!eZ.designModeInlineEditRef.current||!r.current.parts||!r.current.content)return;n||t||g(r.current.content.file);let i="string"===r.current.content.type?JSON.stringify(e).slice(1,-1).replace(/(?<!\\)['"`$]/g,"\\$&"):"template"===r.current.content.type?e.replace(/(?<!\\)['"`$]/g,"\\$&"):e;return eZ.designModeInlineEditRef.current.postMessage({type:"devtools_sync_design",payload:{type:"content",value:e}}),eZ.designModeInlineEditRef.current.inlineEdit(r.current.content.file,r.current.content.line,r.current.content.column,r.current.content.len,i,s,void 0,void 0,t),oi(),!0})},[x,r,g]),E=(0,l.useCallback)((e,t)=>{x("L",Date.now(),()=>{if(!r.current.parts||!r.current.lib||!eZ.designModeInlineEditRef.current)return;let n=r.current.lib,s=eZ.designModeInlineEditRef.current.getContent(r.current.file);if(!s)return;t||g(r.current.file,s);let i=s,a=r.current.name.length;n.closeAt&&(i=on(s,n.closeAt,a,e));let o=(i=on(i,n.openAt,a,e)).slice(n.declStart,n.declEnd),l=RegExp(`${n.name}\\s+as\\s+${r.current.name}`);if(n.singleRef){let t=l.test(o)?o.replace(l,e):o.replace(n.name,e);i=on(i,n.declStart,o.length,t)}else{let t=o.match(l)?.index??o.indexOf(n.name);i=on(i,n.declStart,o.length,o.slice(0,t)+e+","+o.slice(t))}return eZ.designModeInlineEditRef.current.inlineEdit(r.current.file,0,0,0,i,Date.now(),void 0,[0,s.length]),os(),!0})},[x,r,g]),L=(0,l.useCallback)((e,t,n)=>{x("IMG",Date.now(),()=>{let s;if(!r.current.parts||!r.current.start||!r.current.end||!eZ.designModeInlineEditRef.current)return;let i=r.current;n||t||g(i.file);let a=eZ.designModeInlineEditRef.current.getContent(i.file);if(!a)return;let o=sc(r.current.name),l=i.start;if(o?(s=sx(r.current.name,i.start,a).content,l=i.start):s=a.slice(i.start,i.end),o)for(let n of so){let r=s.match(n);if(r&&void 0!==r.index){let n=r.index,s=r.index+r[0].length,o=l+n,c=l+s;try{let n=a.slice(0,o)+`src=${JSON.stringify(e)}`+a.slice(c);if(0===n.length)continue;return eZ.designModeInlineEditRef.current.inlineEdit(i.file,0,0,0,n,Date.now(),void 0,[0,a.length],t),!0}catch(e){continue}}}if(s.match(/src=(?:"[^"]*"|'[^']*'|\{[^}]*\})/)){let n=s.replace(/src=(?:"[^"]*"|'[^']*'|\{[^}]*\})/,`src=${JSON.stringify(e)}`),r=a.slice(0,i.start)+n+a.slice(i.end);return eZ.designModeInlineEditRef.current.inlineEdit(i.file,0,0,0,r,Date.now(),void 0,[0,a.length],t),!0}let c=Math.max(0,i.start-1e3),d=Math.min(a.length,i.end+1e3),u=a.slice(c,d);for(let n of so){let r=u.match(n);if(r&&void 0!==r.index){let n=r.index,s=r.index+r[0].length,o=c+n,l=c+s;if(o<0||l>a.length)continue;try{let n=a.slice(0,o)+`src=${JSON.stringify(e)}`+a.slice(l);if(0===n.length)continue;return eZ.designModeInlineEditRef.current.inlineEdit(i.file,0,0,0,n,Date.now(),void 0,[0,a.length],t),!0}catch(e){continue}}}})},[x,r,g,p]),_=(0,l.useCallback)((e,t,n)=>{x("P:"+e,Date.now(),()=>{if(!r.current.parts||!r.current.lib||!eZ.designModeInlineEditRef.current)return;n||g(r.current.file);let s=r.current.lib;if(!s.props)return;let i=e in s.props?s.props[e]:null,a="";i||(i=["",s.openAt+s.name.length],a=` ${e}=`);let o=eZ.designModeInlineEditRef.current.getContent(r.current.file);if(!o)return;n||g(r.current.file,o);let l=i[0]?on(o,i[1],i[0].length,JSON.stringify(t)):o.slice(0,i[1])+a+JSON.stringify(t)+o.slice(i[1]),c=(l.match(/\{/g)||[]).length,d=(l.match(/\}/g)||[]).length,u=(l.match(/"/g)||[]).length;if(c===d&&u%2==0)return eZ.designModeInlineEditRef.current.inlineEdit(r.current.file,0,0,0,l,Date.now(),void 0,[0,o.length]),oa(),!0})},[x,r,g]),P=function({selected:e,onContentUpdate:t,onImageSrcUpdate:n,getFileContent:r}){let{user:s}=(0,eM.useActiveScope)(),[i,a]=(0,l.useState)(!1),o=(0,h.useActiveBlockState)(),c=(0,v.useChatId)(),d=(0,l.useMemo)(()=>o&&"code-project"===o.type?(0,s0.parseMultiFileSource)({source:o.source,blockType:"code-project",blockId:o.id}):[],[o]),{inputFileRef:u,onInputChange:p}=(0,eg.default)({isSignedIn:!!s,canUpload:e=>e.filter(e=>!(0,sQ.isInlinableImageType)(e.type)).length>0?{ok:!1,message:"Only image files are allowed (JPEG, PNG, GIF, WebP)"}:{ok:!0},onUploadStart:()=>{a(!0)},onSuccess:(i,l)=>{if(l.length>0){let i=l[0].url;if(!e.parts)return;let a=m();if(sv(e,r)?n(i):t(i),s){let e={chatId:c||"",blockId:o?.id||"",originalImageUrl:a||"",newImageUrl:i,isPlaceholder:sg(a)};(0,N.track)("ImageUpload",e)}}a(!1)},onError:e=>{console.error("Image upload failed:",e),a(!1)},onFinish:()=>{a(!1)}}),f=(0,l.useMemo)(()=>e=>{if(!d.length)return e;let t=d.find(t=>!!t.meta.file&&(t.meta.file===e||t.meta.file===e.replace(/^\//,"")||t.meta.file.endsWith(e)));return t?.blobUrl||e},[d]),m=()=>{if(!e.parts)return null;if(e.lib?.props?.src)return Array.isArray(e.lib.props.src)?e.lib.props.src[0]||null:e.lib.props.src;if(sv(e,r)){let t=e.content?.value;if(!t&&r&&e.file&&e.start&&e.end){let n=r(e.file);n&&(t=n.slice(e.start,e.end))}if(t){let e=t.match(/src="([^"]*)"/);if(e&&e[1]){let t=e[1];return sp(t)?f(t):t}}if(r&&e.file&&e.start&&e.end){let t=r(e.file);if(t){let n,r=sc(e.name);if(n=r?sx(e.name,e.start,t).content:t.slice(e.start,e.end),r)for(let e of so)try{let t=n.match(e);if(t&&t[1]){let e=t[1];if(!e||0===e.trim().length)continue;if(sp(e))return f(e);return e}}catch(e){continue}let s=Math.max(0,e.start-1e3),i=Math.min(t.length,e.end+1e3),a=t.slice(s,i);for(let e of so)try{let t=a.match(e);if(t&&t[1]){let e=t[1];if(!e||0===e.trim().length)continue;if(sp(e))return f(e);return e}}catch(e){continue}}}}return e.content?.value?e.content.value:null};return{inputFileRef:u,onInputChange:p,isUploading:i,imageSrc:m()}}({selected:t,onContentUpdate:T,onImageSrcUpdate:L,getFileContent:e=>eZ.designModeInlineEditRef.current?.getContent(e)||null}),{actions:R}=(0,eB.useCurrentChatPrompt)(),{setRefinementElementSelected:D,clearRefinementElementSelected:F}=R,O=(0,l.useCallback)(e=>{if((0,N.track)("DesignModeAction",{type:"delete"}),eZ.designModeInlineEditRef.current&&e.file){let t=eZ.designModeInlineEditRef.current.getContent(e.file);g(e.file,t),eZ.designModeInlineEditRef.current.inlineEdit(e.file,0,0,0,e.jsxRoot?"null":"",Date.now(),void 0,[e.start,e.end])}},[g]);(0,e0.useMessage)(e=>{let{data:t}=e;if(t&&"object"==typeof t&&t.__v0_remote__)switch(t.type){case"devtools_selected_state":if(JSON.stringify(t)===JSON.stringify(r.current))return;s.current=e.source,n(t),c.initializePreviewTheme(t.info?.currentTheme||"light"),r.current=t,j&&b&&(g(b.file,b.content),M(!1),S(!1),C(null));let i=eZ.designModeInlineEditRef.current?.getContent(t.file||"never_match");if(t.name&&i){oo();let{sourceContext:e,componentName:n}=(0,eK.structureRefinementData)({event:{data:{line:t.line,column:t.column}},file:{source:i}});D({sourceContext:e,line:t.line,column:t.column,componentName:n,file:t.file})}else F();let a=t.version;for(;k.current.length&&(k.current[0]?.[1]||0)<=a;)k.current.shift();if(k.current.length){let e=k.current[0];if(e){let[t,n,r]=e;r()}}break;case"devtools_copy":if((0,N.track)("DesignModeAction",{type:"copy"}),eZ.designModeInlineEditRef.current&&t.file){let e=eZ.designModeInlineEditRef.current.getContent(t.file);if("string"==typeof e){(0,eY.copy)(e.slice(t.start,t.end)),o.toast.success("Component code copied to clipboard");break}}o.toast.error("Failed to copy component code");break;case"devtools_delete":O(t);break;case"devtools_goto":(0,N.track)("DesignModeAction",{type:"goto"}),eZ.designModeInlineEditRef.current&&t.file&&eZ.designModeInlineEditRef.current.jumpToFile(t.file,t.line,t.column);break;case"frame_onload":if(!p)return;(0,e4.sendToIframeFromBlockId)(p,{type:"devtools_enable",enabled:!0})}},[D,F,r,g]),(0,l.useEffect)(()=>{p&&null===t.parts&&!t.selected&&(0,e4.sendToIframeFromBlockId)(p,{type:"devtools_query_root"})},[p,t]);let $=(0,l.useMemo)(()=>t.parts?t.parts.map(({value:e})=>e.split(" ").map(e=>e.trim()).filter(Boolean)):[],[t.parts]),V=(0,l.useMemo)(()=>{let e={...e6};return $.forEach(t=>{for(let n of t)n.startsWith("gap-")?e.gap=!0:n.startsWith("space-")?e.space=!0:"flex"===n?e.flex=!0:"grid"===n?e.grid=!0:n.startsWith("w-")||n.startsWith("h-")||n.startsWith("size-")?e.size=!0:("flex-col"===n||"flex-col-reverse"===n)&&(e.flexColumn=!0)}),!e.space&&(e.gap||e.flex||e.grid)&&(e.showGap=!0),e},[$]);return null===t.parts?t.selected?(0,a.jsx)(a9,{children:(0,a.jsx)(a8,{icon:(0,a.jsx)(eW.Question,{}),description:"The selected element cannot be edited"})}):(0,a.jsxs)(a9,{children:[(0,a.jsxs)(a7,{children:[(0,a.jsxs)(oe,{children:[(0,a.jsx)(ot,{type:"root",active:!0}),(0,a.jsx)(e3.HeaderSlash,{}),(0,a.jsx)(ot,{type:"placeholder"})]}),f&&(0,a.jsx)(a4,{})]}),t.info?.dsTokens?(0,a.jsx)(a2,{designTokens:i,hasGlobalsCss:m}):(0,a.jsx)(ol,{})]}):(0,a.jsx)(a9,{children:(0,a.jsxs)("div",{className:"w-full",children:[(0,a.jsxs)(a7,{children:[(0,a.jsxs)(oe,{children:[(0,a.jsx)(ot,{type:"root",active:!1,onClick:()=>{p&&(0,e4.sendToIframeFromBlockId)(p,{type:"devtools_deselect"})}}),(0,a.jsx)(e3.HeaderSlash,{}),(0,a.jsx)(ot,{type:"element",name:t.name})]}),(0,a.jsxs)(ee.DropdownMenu,{children:[(0,a.jsx)(ee.DropdownMenuTrigger,{asChild:!0,className:(0,d.cn)({}),children:(0,a.jsx)(A.Button,{size:"sm",variant:"ghost",className:"size-7 rounded-md",children:(0,a.jsx)(eq.MoreHorizontal,{})})}),(0,a.jsx)(ee.DropdownMenuContent,{align:"end",side:"bottom",sideOffset:4,children:(0,a.jsxs)(ee.DropdownMenuGroup,{children:[(0,a.jsx)(ee.DropdownMenuItem,{asChild:!0,children:(0,a.jsxs)(A.Button,{size:"sm",variant:"ghost",className:"justify-start",onClick:()=>{(0,N.track)("DesignModeAction",{type:"goto"}),eZ.designModeInlineEditRef.current&&r.current.parts&&eZ.designModeInlineEditRef.current.jumpToFile(r.current.file,r.current.line,r.current.column)},children:[(0,a.jsx)(eU.CursorClick,{}),"Go to code"]})}),(0,a.jsx)(ee.DropdownMenuItem,{asChild:!0,children:(0,a.jsxs)(A.Button,{size:"sm",variant:"ghost",className:"justify-start",onClick:()=>{if(eZ.designModeInlineEditRef.current&&r.current.parts){let e=eZ.designModeInlineEditRef.current.getContent(r.current.file);if("string"==typeof e){(0,eY.copy)(e.slice(r.current.start,r.current.end)),o.toast.success("Component code copied to clipboard");return}}o.toast.error("Failed to copy component code")},children:[(0,a.jsx)(eG.Copy,{}),"Copy Component Code"]})}),(0,a.jsx)(ee.DropdownMenuItem,{asChild:!0,variant:"destructive",children:(0,a.jsxs)(A.Button,{size:"sm",variant:"ghost",className:"justify-start",onClick:()=>{r.current.parts&&O({file:r.current.file,start:r.current.start,end:r.current.end,jsxRoot:r.current.jsxRoot})},children:[(0,a.jsx)(eX.Trash,{}),"Delete Component"]})})]})})]})]}),(0,a.jsx)(sZ,{classNames:$,classNamesInfo:V,handleClassUpdate:I,handleContentUpdate:T,handleIconUpdate:E,handleImageSrcUpdate:L,handlePropUpdate:_,selected:t,imageUpload:P,getFileContent:e=>eZ.designModeInlineEditRef.current?.getContent(e)||null})]},t.key)})}var od=e.i(997974),ou=e.i(100536),oh=e.i(165336),op=e.i(758118),of=e.i(397036),om=e.i(748819),og=e.i(380403),ox=e.i(446219),ov=e.i(594851),ob=e.i(633577),oy=e.i(85830),oj=e.i(465870),oj=oj,ow=e.i(410883),ow=ow;function ok({message:e,className:t}){return(0,a.jsx)(of.UserMessageLayout,{className:t,id:e.id,messageAuthorId:e.authorId,children:(0,a.jsxs)("details",{children:[(0,a.jsxs)("summary",{className:"inline-flex items-center gap-1 rounded bg-green-600/15 px-1.5 py-0.5 text-sm text-v0-green-800 cursor-pointer",children:[(0,a.jsx)(oj.default,{className:"h-3.5 w-3.5"}),"Established connection with local v0 dev server."]}),(0,a.jsx)("div",{className:"p-1",children:(0,a.jsx)("p",{className:"text-sm whitespace-pre-wrap font-mono bg-v0-gray-100 p-2",children:(0,eS.stringifyMessageContent)(e.content,{defaultValue:"Established connection with local v0 dev server."})})})]})})}function oC({message:e,className:t}){return(0,a.jsx)(of.UserMessageLayout,{className:t,id:e.id,messageAuthorId:e.authorId,children:(0,a.jsxs)("details",{children:[(0,a.jsxs)("summary",{className:"inline-flex items-center gap-1 rounded bg-black/15 px-1.5 py-0.5 text-sm text-v0-black cursor-pointer",children:[(0,a.jsx)(ow.default,{className:"h-3.5 w-3.5"}),"User has made some changes directly to the local project."]}),(0,a.jsx)("div",{className:"p-1",children:(0,a.jsx)("p",{className:"text-sm whitespace-pre-wrap font-mono bg-v0-gray-100 p-2",children:(0,eS.stringifyMessageContent)(e.content)})})]})})}function oS(e){let{activeForkKey:t}=(0,g.useChatMessages)(),{atoms:n,actions:r}=(0,eB.useCurrentChatPrompt)(),{cancelEditingMessage:s}=r,i=(0,sJ.useAtomValue)(n.editingMessage),a={effect:void 0,onClick:void 0};if(!i||!t)return a;let o=t.indexOf(i.id),l=t.indexOf(e.id);return l>o&&(a.effect="dimmed"),l===o&&(a.effect="pulse"),a.onClick=()=>{("pulse"===a.effect||"dimmed"===a.effect)&&s()},a}var oM=e.i(236699);let oN=(0,eb.withNewIcon)('<path fill-rule="evenodd" clip-rule="evenodd" d="M13.0138 8C13.0138 10.4853 10.999 12.5 8.51376 12.5C6.02848 12.5 4.01376 10.4853 4.01376 8C4.01376 5.51472 6.02848 3.5 8.51376 3.5C10.999 3.5 13.0138 5.51472 13.0138 8ZM14.5138 8C14.5138 11.3137 11.8275 14 8.51376 14C5.20005 14 2.51376 11.3137 2.51376 8C2.51376 4.68629 5.20005 2 8.51376 2C11.8275 2 14.5138 4.68629 14.5138 8ZM9.26376 5.75V5H7.76376V5.75V8V8.75H9.26376V8V5.75Z" fill="currentColor"/>'),oI=(0,l.memo)(function({createdAt:e,className:t=""}){let n=(0,l.useMemo)(()=>e?(0,d.formatMessageTimestamp)(new Date(e)):null,[e]);return n?(0,a.jsxs)("div",{className:`flex items-center gap-1 px-1 text-v0-gray-900 ${t}`,children:[(0,a.jsx)(oN,{className:"size-4"}),(0,a.jsx)("span",{className:"text-xs py-1 rounded-md pointer-events-none whitespace-nowrap",children:n})]}):null}),oT=["added-environment-variables","added-integration","forked-block","reverted-block","sync-git"],oE=(0,l.memo)(function({message:e,forkKeyOptions:t,isLastMessage:n,awaitingResponse:r}){let{setConfirmDelete:s}=$(),i=(0,D.useT)(),{actions:{startEditingMessage:c}}=(0,eB.useCurrentChatPrompt)(),{isCopied:d,copyToClipboard:u}=(0,eY.useCopyToClipboard)({timeout:2e3}),{isCopied:h,copyToClipboard:p}=(0,eY.useCopyToClipboard)({timeout:2e3}),f=e.id,m=oS(e),[g]=(0,ep.useRateLimit)(),x=g?.remaining===0,v=!(0,l.useMemo)(()=>(0,eS.stringifyMessageContent)(e.content),[e.content]),b=(0,l.useMemo)(()=>{let t={...e.content,parts:e.content.parts.filter(e=>"refinement-element"!==e.type)};return(0,eS.stringifyMessageContent)(t).length},[e.content]),y=(0,l.useMemo)(()=>(0,a.jsxs)(a.Fragment,{children:[!v&&(0,a.jsx)(ob.Action,{"aria-label":i("userMessage.copyMessage"),tooltipDirection:"bottom",onClick:()=>{u((0,eS.stringifyMessageContent)(e.content)||"").then(()=>o.toast.success(i("userMessage.copiedToClipboard"))).catch(()=>o.toast.error("Failed to copy message to clipboard"))},tooltip:i("userMessage.copyMessage"),children:(0,a.jsx)(oM.CopyCheck,{isCopied:d})}),(0,a.jsx)(eH,{forkKeyOptions:t,message:e})]}),[i,e,v,d,t,u]),j=(0,l.useMemo)(()=>(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(oI,{createdAt:e.createdAt}),(0,a.jsx)(ob.Action,{"aria-label":i("userMessage.shareMessage"),className:"author-action",onClick:()=>{p(`${window.location.origin}${window.location.pathname}#${e.id}`).then(()=>{o.toast.success(i("userMessage.messageLinkCopied")),(0,N.track)("CopyMessageLink",{messageId:e.id})}).catch(()=>o.toast.error("Failed to copy message link to clipboard"))},tooltipDirection:"bottom",tooltip:i("userMessage.shareMessage"),children:(0,a.jsx)(oM.CopyCheck,{customIcon:(0,a.jsx)(ox.Link,{}),isCopied:h})},e.id+"@share"),(0,a.jsx)(ob.Action,{"aria-label":i("userMessage.editMessage"),className:"author-action",disabled:x,onClick:()=>{c({...e}),(0,N.track)("OpenEditUserMessage",{messageId:e.id})},tooltipDirection:"bottom",tooltip:x?i("userMessage.limitReached"):i("userMessage.editMessage"),children:(0,a.jsx)("span",{"aria-hidden":!0,children:(0,a.jsx)(og.PencilEdit,{className:"pointer-events-none"})})},e.id),(0,a.jsx)(ob.Action,{"aria-label":i("userMessage.deleteMessage"),className:"author-action",tooltipDirection:"bottom",onClick:()=>{s(e.id),(0,N.track)("OpenDeleteMessage",{messageId:e.id})},tooltip:i("userMessage.deleteMessage"),children:(0,a.jsx)("span",{"aria-hidden":!0,children:(0,a.jsx)(eX.Trash,{className:"pointer-events-none"})})},e.id+"@delete")]}),[i,x,e,c,s,p,h]),w=(0,l.useMemo)(()=>(0,a.jsx)(ov.MessageAttachmentPills,{refinementElementLabels:(0,eK.getRefinementElementLabelsFromContent)(e.content),attachments:e.attachments,className:"pb-1 pt-1.5"}),[e]);return e.type&&oT.includes(e.type)?null:(0,oy.isRemoteSessionHandshakeMessage)(e)?(0,a.jsx)(ok,{message:e}):(0,oy.isRemoteLocalChangeMessage)(e)?(0,a.jsx)(oC,{message:e}):(0,a.jsx)(of.UserMessageLayout,{id:f,actions:y,hideActions:r,awaitingResponse:r,hoverActions:j,attachments:w,isLastMessage:n,messageAuthorId:e.authorId,effect:m.effect,messageLength:b,onEffectClick:m.onClick,children:v?(0,a.jsx)("i",{className:"pl-1 -skew-x-10 text-v0-gray-900 text-label-14",children:"No message content"}):(0,a.jsx)(om.MessageContent,{message:e})})});function oL({label:e,value:t}){return(0,a.jsxs)("div",{className:"text-label-12-mono text-[10px] text-v0-gray-900",children:[e,": ",(0,a.jsx)("span",{className:"text-v0-gray-900",children:t})]})}function o_({details:e}){return(0,a.jsx)("div",{className:"flex flex-wrap gap-2 py-1",children:e.filter(Boolean).map((e,t)=>(0,a.jsx)(oL,{label:e.label,value:e.value},t))})}var oP=e.i(923723),oA=e.i(324042),oR=e.i(40114),oD=e.i(233327),oF=e.i(643611),oO=e.i(724897),o$=e.i(545102),oV=e.i(118376);function oz({message:e}){let t=(0,l.useRef)(null),n=(0,l.useRef)(null),{project:r}=(0,eO.useChatMetadata)(),s=(0,D.useT)(),i=(0,l.useMemo)(()=>JSON.stringify(e.content).includes("footnoteReference"),[e.content]);return"assistant"===e.role&&"context"in e&&e.context&&0!==e.context.length&&i?(0,a.jsxs)("div",{ref:t,children:[!e.streaming&&(0,a.jsxs)("div",{className:"grid gap-1.5",children:[(0,a.jsx)("p",{className:"select-none pl-px text-sm leading-none text-v0-gray-900",children:s("messageCitations.title")}),(0,a.jsx)("div",{className:"no-scrollbar flex w-full -translate-x-1 gap-2 overflow-x-auto p-1 pb-3",children:e.context.map((e,t)=>{let s=new URL(e.url).hostname,i=e.url.includes("vercel-storage")&&void 0!==r;return"ui"===e.type?null:(0,a.jsx)(A.Button,{asChild:!0,className:"group/citation flex h-auto w-[210px] flex-col items-start justify-start gap-1 whitespace-normal px-2 py-1.5 text-left text-sm",variant:"secondary",children:(0,a.jsxs)("a",{className:"min-w-0",href:e.url,ref:0===t?n:null,rel:"noopener noreferrer",target:"_blank",title:e.url,children:[(0,a.jsxs)("div",{className:"flex w-full items-center gap-1.5 font-medium",children:[i?(0,a.jsx)(o$.ProjectIcon,{size:"xs",color:r.settings.color,icon:(0,oV.cleanIconName)(r.settings.icon)}):(0,a.jsx)(oF.CitationSourceIcon,{className:"shrink-0",knowledgeSource:s}),(0,a.jsx)("div",{className:"truncate",children:i?e.title:s}),(0,a.jsxs)("div",{className:"relative ml-auto flex size-4 shrink-0 items-center justify-center overflow-hidden rounded-full bg-v0-gray-200 text-xs text-v0-gray-900",children:[t+1,(0,a.jsx)("div",{className:"absolute inset-0 flex size-4 shrink-0 items-center justify-center bg-v0-gray-200 text-v0-gray-1000 opacity-0 transition-all group-hover/citation:opacity-100 group-focus/citation:opacity-100 group-focus-visible/citation:opacity-100",children:(0,a.jsx)(oO.ArrowUpRightSmall,{})})]})]}),(0,a.jsx)("div",{className:"w-full truncate break-all text-xs font-normal text-v0-gray-900",children:r&&i?r.name:(0,a.jsxs)(a.Fragment,{children:[e.title,e.description&&(0,a.jsxs)(a.Fragment,{children:[" - ",e.description]})]})})]})},t)})})]}),(0,a.jsx)(oD.CitationsPortalRenderer,{citations:e.context.filter(e=>!!e).map((t,n)=>({...t,knowledgeSource:new URL(t.url).hostname,index:n+1,messageId:e.id}))})]}):null}var oB=e.i(81612);function oH({actions:e,message:t,finishReason:n}){let{user:r}=(0,H.useUser)(),s=function(e){let t=e.length;if(!t)return null;if(1===t){if(e.includes("delete-message"))return"Please delete your message and try again.";if(e.includes("edit-message"))return"Please edit your message and try again."}let n=2===e.length,r=n&&e.includes("new-chat")&&e.includes("delete-message"),s=n&&e.includes("edit-message")&&e.includes("delete-message"),i=n&&e.includes("delete-message")&&e.includes("retry");return r?"Please start a new chat or delete your message.":s?"Please edit or delete your message and try again.":i?"Please delete or retry your message.":"Please edit, retry or delete your message."}(e);return(0,a.jsxs)("div",{className:"flex h-[34px] flex-1 items-center gap-2 rounded-md bg-v0-red-200 p-2 text-sm text-v0-red-700",children:[(0,a.jsx)(oB.Stop,{}),t," ",s,r?.isAdminMode&&n?(0,a.jsxs)("p",{className:"font-bold",children:["[ADMIN_ONLY]: ",n]}):null]})}var oU=e.i(127558),oW=e.i(875076);function oq(e){return(0,a.jsx)(oU.AnimatedIcon,{variants:{hover:{rotate:60},tap:{rotate:360,interruptible:!1,transition:{duration:1,ease:[.27,.34,.22,.97]}},idle:{rotate:0}},children:(0,a.jsx)(oW.RefreshClockwise,{"aria-hidden":!0,...e})})}var oG=e.i(94363);function oX(){return(0,a.jsx)(oU.AnimatedIcon,{variants:{hover:{y:-2,x:-1,rotate:-12}},children:(0,a.jsx)(oG.ThumbUp,{"aria-hidden":!0})})}var oZ=e.i(625402),oY=e.i(230869);let oJ={"input-too-long":{message:"Your message or the text content of your attachment(s) exceeds the maximum length.",actions:["delete-message","edit-message"]},"invalid-image":{message:"The image(s) attached could not be processed.",actions:["delete-message","edit-message"]},"large-image":{message:"The image(s) attached exceed the maximum size.",actions:["delete-message","edit-message"]},"too-many-attachments":{message:"You have reached the limit for total attachments in a single chat.",actions:["new-chat","delete-message","edit-message"]},"content-filtering":{message:"The response was blocked by the content filtering policy.",actions:["delete-message","edit-message"]},"failed-to-process-image":{message:"Unable to process image.",actions:["delete-message","retry"]},"image-exceeds-dimensions":{message:"The image(s) attached exceed the maximum width and height allowed.",actions:["delete-message","edit-message"]},overloaded:{message:"We are currently experiencing high traffic. Please try again in a few minutes.",actions:[]},default:{message:"Something went wrong.",actions:["retry","edit-message","delete-message"]}};var oK=e.i(19922),oQ=e.i(92330);let o0=(0,eb.withNewIcon)('<path fill-rule="evenodd" clip-rule="evenodd" d="M8.75 0.189331L9.28033 0.719661L15.2803 6.71966L15.8107 7.24999L15.2803 7.78032L13.7374 9.32322C13.1911 9.8696 12.3733 9.97916 11.718 9.65188L9.54863 13.5568C8.71088 15.0648 7.12143 16 5.39639 16H0.75H0V15.25V10.6036C0 8.87856 0.935237 7.28911 2.4432 6.45136L6.34811 4.28196C6.02084 3.62674 6.13039 2.80894 6.67678 2.26255L8.21967 0.719661L8.75 0.189331ZM7.3697 5.43035L10.5696 8.63029L8.2374 12.8283C7.6642 13.8601 6.57668 14.5 5.39639 14.5H2.56066L5.53033 11.5303L4.46967 10.4697L1.5 13.4393V10.6036C1.5 9.42331 2.1399 8.33579 3.17166 7.76259L7.3697 5.43035ZM12.6768 8.26256C12.5791 8.36019 12.4209 8.36019 12.3232 8.26255L12.0303 7.96966L8.03033 3.96966L7.73744 3.67677C7.63981 3.57914 7.63981 3.42085 7.73744 3.32321L8.75 2.31065L13.6893 7.24999L12.6768 8.26256Z" fill="currentColor"/>');var o1=(0,I.createServerReference)("4038b2f765306f884cdd64cc60fb1abef0c632a787",I.callServer,void 0,I.findSourceMapURL,"getRawMessageContent"),o2=e.i(51940);function o5(){let{data:e,mutate:t}=(0,M.default)("showAdminRetryDialog",null,{fallbackData:null}),{user:n}=(0,H.useUser)();return{showAdminRetryDialog:n?.isAdminMode?e:null,setAdminRetryDialog:t}}let o3=({messageId:e})=>{let{setAdminRetryDialog:t}=o5();return(0,a.jsxs)(ee.DropdownMenuItem,{onClick:()=>t(e),children:[(0,a.jsx)(o0,{}),"Edit Response"]})},o4=({submit:e})=>{let{showAdminRetryDialog:t,setAdminRetryDialog:n}=o5(),[r,s]=(0,tN.useLocalStorage)("admin-retry-message",""),[i,c]=(0,l.useTransition)();return t?(0,a.jsxs)(P.Modal,{open:!!t,onOpenChange:()=>n(null),children:[(0,a.jsx)(P.ModalHeader,{children:(0,a.jsx)(P.ModalTitle,{children:"Retry Message (AI Team Only)"})}),(0,a.jsxs)("form",{onSubmit:s=>{r&&t&&(s.preventDefault(),n(null),e({action:"retry",forceResponse:r,assistantMessageId:t}))},children:[(0,a.jsx)(P.ModalContent,{children:(0,a.jsx)(t_.Textarea,{asChild:!0,children:(0,a.jsx)(o2.ResizableTextArea,{value:r,onChange:e=>s(e.target.value),placeholder:"Enter your messsage here...",minHeight:80,maxHeight:192})})}),(0,a.jsxs)(P.ModalFooter,{className:"mt-4 flex w-full items-center justify-between",children:[(0,a.jsxs)(A.Button,{type:"button",variant:"secondary",onClick:()=>{c(async()=>{try{if(!t)throw Error("No message id");let e=await o1({payload:{messageId:t}});if("error"in e)throw Error(e.error);if(!e.rawContent)throw Error("No raw content saved in message");s(e.rawContent)}catch(e){if(e instanceof Error)return void o.toast.error(e.message);o.toast.error("An error occurred")}})},disabled:i,children:["Sync Raw Content",i?(0,a.jsx)(G.Spinner,{}):null]}),(0,a.jsx)(A.Button,{type:"submit",children:"Submit"})]})]})]}):null};var o6=e.i(978855);function o9({text:e,isLoading:t,files:n,displayFiles:r}){let s=(0,D.useT)(),i=n?n.map(e=>({file:e,component:(0,a.jsxs)("div",{className:"flex items-center font-mono text-[13px]",children:[(0,a.jsx)("span",{className:"mr-2",children:"•"}),e]},e)})).map(({file:e,component:n},r)=>t?(0,a.jsx)(ed.motion.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{delay:.3+.1*r,duration:.2},children:n},e):n):null;return(0,a.jsx)(o6.Thinking,{text:e||s("messages.loadingText"),forceOpen:r,isLoading:t,children:i})}var o8=e.i(329046);let o7=(0,eb.withNewIcon)('<path fill-rule="evenodd" clip-rule="evenodd" d="M9 7.6736V7V2.5H7V7V7.6736L6.49655 8.12111L4.38279 10L11.6172 10L9.50345 8.12111L9 7.6736ZM5.5 2.5H4V1H5.5H7H9H10.5H12V2.5H10.5V7L14.0735 10.1765C14.6628 10.7003 15 11.4511 15 12.2396C15 13.7641 13.7641 15 12.2396 15H3.7604C2.23587 15 1 13.7641 1 12.2396C1 11.4511 1.33718 10.7003 1.92649 10.1765L5.5 7V2.5ZM2.5 12.2396C2.5 11.9717 2.58527 11.7133 2.7398 11.5L13.2602 11.5C13.4147 11.7133 13.5 11.9717 13.5 12.2396C13.5 12.9357 12.9357 13.5 12.2396 13.5H3.7604C3.0643 13.5 2.5 12.9357 2.5 12.2396Z" fill="currentColor" />');var le=(0,I.createServerReference)("40ad4ec21ba7ee2ba11efd31485ccded794487237a",I.callServer,void 0,I.findSourceMapURL,"permanentlySaveMessageObservability");let lt=({parentId:e,messageId:t})=>{let n=(0,v.useChatId)(),[r,s]=(0,l.useTransition)();return(0,a.jsxs)(ee.DropdownMenuItem,{disabled:r,onClick:()=>{s(async()=>{try{let r=await le({payload:{messageId:t}});if(!("success"in r))throw Error(r.error);let s=`{
  type: 'edit-message',
  chatId: '${n}',
  userMessageId: '${e}',
  assistantMessageId: '${t}',
  description: INSERT_DESCRIPTION_HERE,
  accessWith: 'EVAL_TEAM',
  scorer: output => {
    return { passed: true }
  },
},
`;await navigator.clipboard.writeText(s),o.toast.success("Copied eval, now paste to `packages/evals/lib/chat/data.ts`")}catch(e){if(e instanceof Error)return void o.toast.error(e.message);o.toast.error("An error occurred")}})},children:[r?(0,a.jsx)(G.Spinner,{}):(0,a.jsx)(o7,{}),(0,a.jsx)("span",{children:"Create Eval"})]})};var ln=l;class lr extends ln.default.Component{constructor(e){super(e),this.state={hasError:!1,error:null}}static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,t){console.error("ErrorBoundary caught an error:",e,t)}render(){let{hasError:e}=this.state,{fallback:t,children:n}=this.props;return e?t??(0,a.jsx)("h2",{children:"Something went wrong."}):n}}function ls({creditCost:e,modelId:t="v0-1.5-md",className:n="",isStreaming:r=!1}){return"number"!=typeof e||e<=0&&-1!==e?null:(0,a.jsx)("span",{className:`inline-flex items-center text-xs text-v0-gray-700 ${n}`,children:(0,d.formatCreditUsage)(e)})}let li=(0,l.memo)(function({message:e,isLastMessage:t,isLoading:n,isStreaming:r,forkKeyOptions:s,submit:i,setChatState:c}){let d=(0,D.useT)(),u=e.id,{chatId:h}=(0,g.useChatId)(),{user:p}=(0,H.useUser)(),{isCopied:f,copyToClipboard:m}=(0,eY.useCopyToClipboard)({timeout:2e3}),{isCopied:x,copyToClipboard:v}=(0,eY.useCopyToClipboard)({timeout:2e3}),[b]=(0,ep.useRateLimit)(),y=b?.remaining===0,{isLoading:j,canVote:w}=(0,oK.useCanVoteOnMessage)(),{scp:k,age:C}=(0,W.useFlags)(),S=oS(e),{isLlmError:M,errorCategory:I="default"}=(0,l.useMemo)(()=>(0,oY.isLlmError)(e),[e]),{message:T,actions:E}=oJ[I],L=E.includes("retry"),_=r&&t||j,P=(0,l.useCallback)(async()=>{try{let e=document.getElementById(u)?.querySelector("[data-seg=root]");if(!e)throw Error("Root container not found");let t=new DocumentFragment;e.childNodes.forEach(e=>{t.appendChild(e.cloneNode(!0))});let n=(0,oR.fragmentToMarkdown)(t,e,!1,!1,!1);await m(n),o.toast.success(d("botMessage.copiedToClipboard"))}catch(e){console.error(e),o.toast.error("Failed to copy message to clipboard")}},[u,m,d]),R=(0,l.useCallback)(async()=>{await Promise.all([i({action:"retry",assistantMessageId:e.id}),(0,N.track)("SubmitRetryBotMessage",{messageId:e.id})])},[i,e.id]),F=(0,l.useCallback)(()=>{v(`${window.location.origin}${window.location.pathname}#${e.id}`).then(()=>{o.toast.success("Bot message link copied to clipboard")}).catch(()=>o.toast.error("Failed to copy bot message link to clipboard"))},[e.id,v]),O=`credit-usage-${e.id}`,$=(0,l.useMemo)(()=>(0,a.jsxs)(a.Fragment,{children:[w?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(lo,{botMessage:e,className:"size-6 rounded-md text-v0-gray-900 hover:text-v0-gray-1000 focus:text-v0-gray-1000",size:"xs",variant:"ghost",setChatState:c}),(0,a.jsx)(o8.DownvoteButton,{className:"size-6 rounded-md text-v0-gray-900 hover:text-v0-gray-1000 focus:text-v0-gray-1000",messageId:e.id,tooltip:d("botMessage.downvote"),variant:"message"})]}):null,M?null:(0,a.jsx)(A.Button,{className:"size-6 rounded-md text-v0-gray-900 hover:text-v0-gray-1000 focus:text-v0-gray-1000",size:"xs",onClick:P,tooltip:d("botMessage.copy"),tooltipDirection:"bottom",variant:"ghost",children:(0,a.jsx)(oM.CopyCheck,{isCopied:f})}),"message"!==e.type&&"added-integration"!==e.type&&e.type?null:(0,a.jsxs)(a.Fragment,{children:[!M||L?(0,a.jsxs)(ee.DropdownMenu,{children:[(0,a.jsx)(ee.DropdownMenuTrigger,{asChild:!0,children:(0,a.jsx)(A.Button,{className:"size-6 rounded-md text-v0-gray-900 hover:text-v0-gray-1000 focus:text-v0-gray-1000",disabled:n||y,"aria-label":"More actions",size:"xs",tooltip:"More actions",tooltipDirection:"bottom",variant:"ghost",children:(0,a.jsx)(eq.MoreHorizontal,{})})}),(0,a.jsxs)(ee.DropdownMenuContent,{align:"start",side:"bottom",className:"min-w-38 w-auto",children:[(0,a.jsxs)(ee.DropdownMenuGroup,{children:[(0,a.jsxs)(ee.DropdownMenuItem,{disabled:n||y,onClick:R,className:"h-8 font-geist font-normal text-sm text-v0-gray-900 hover:text-v0-gray-1000","aria-label":"Retry Message",children:[(0,a.jsx)(oq,{className:"mr-px size-4"}),d("botMessage.retry")]}),(0,a.jsxs)(ee.DropdownMenuItem,{onClick:F,className:"h-8 font-geist font-normal text-sm text-v0-gray-900 hover:text-v0-gray-1000",children:[(0,a.jsx)(ox.Link,{className:"mr-px size-4"}),"Copy Link"]})]}),(e.creditCost||e.creditCost===eF.FREE_CREDIT_COST)&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(ee.DropdownMenuSeparator,{}),(0,a.jsx)("div",{className:"pl-3 py-1.5 bg-v0-background-200 font-geist font-normal text-left h-8 flex items-center",children:(0,a.jsx)(ls,{creditCost:e.creditCost,estimatedTokens:e.estimatedUsage,modelId:"v0-1.5-md",isStreaming:r&&t,className:"text-xs font-geist font-normal text-v0-gray-900"},O)})]})]})]}):null,(0,a.jsx)(eH,{forkKeyOptions:s,message:e})]}),p?.isAdminMode?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(o4,{submit:i}),(0,a.jsxs)(ee.DropdownMenu,{children:[(0,a.jsx)(ee.DropdownMenuTrigger,{asChild:!0,className:"max-w-[200px]",children:(0,a.jsxs)(A.Button,{size:"xs",className:"rounded-md text-v0-gray-900 hover:text-v0-gray-1000 focus:text-v0-gray-1000 items-center gap-1 flex",tooltip:"View Internal (AI Team only)",tooltipDirection:"bottom",variant:"ghost",children:[(0,a.jsx)(tx.LockClosed,{})," Admin"]})}),(0,a.jsx)(ee.DropdownMenuContent,{align:"start",side:"bottom",children:(0,a.jsxs)(ee.DropdownMenuGroup,{children:[(0,a.jsx)(ee.DropdownMenuItem,{asChild:!0,children:(0,a.jsxs)(K.default,{href:`/chat/internal/correct/${h}/new`,children:[(0,a.jsx)(oQ.PreviewEye,{}),"Submit Correction"]})}),(0,a.jsx)(oZ.OpenMessageInInternalButton,{messageId:e.id}),(0,a.jsx)(oZ.OpenMessageInInternalBrowseButton,{messageId:e.id}),(0,a.jsx)(oZ.OpenMessageInInternalAgentLogsButton,{messageId:e.id}),(0,a.jsx)(oZ.OpenInBraintrustButton,{messageId:e.id,chatId:h}),e.parentId?(0,a.jsx)(lt,{parentId:e.parentId,messageId:e.id}):null,(0,a.jsx)(o3,{messageId:e.id})]})})]})]}):null]}),[w,e,f,i,c,d,M,L,n,y,s,p?.isAdminMode,h,P,R,F,f,i,O,r,t]),V=(0,a.jsx)(oI,{createdAt:e.createdAt});if("added-integration"===e.type&&k)return null;let z="reverted-block"===e.type,B=!r&&!n&&Array.isArray(e.content.value)&&0===e.content.value.length&&!!e.createdAt&&Date.now()-new Date(e.createdAt).getTime()>2e3,U=M||B;if(z)return(0,a.jsx)(of.BotMessageLayout,{id:u,isLastMessage:t,effect:S.effect,onEffectClick:S.onClick,actions:null,children:(0,a.jsx)(om.MessageContent,{message:e,isLastMessage:t})});let q=null;if(!C){let t=null;e.grepQueries?.length?t=`Searched for ${e.grepQueries.map(e=>`"${e}"`).join(", ")}`:e.relevantFiles&&e.relevantFiles.length>0&&(t=`Added context (${e.relevantFiles.length} file${1===e.relevantFiles.length?"":"s"})`),q=t?(0,a.jsx)(o9,{files:e.relevantFiles,text:t}):null}let G=(0,a.jsxs)(a.Fragment,{children:[q,(0,a.jsx)(om.MessageContent,{message:e,isLastMessage:t})]}),X=(0,a.jsx)(oH,{actions:E,finishReason:e.finishReason,message:T});return(0,a.jsxs)(of.BotMessageLayout,{id:u,isLastMessage:t,effect:S.effect,onEffectClick:S.onClick,actions:$,hoverActions:V,hideActions:_,children:[(0,a.jsx)(lr,{fallback:X,children:G}),U?X:null,(0,a.jsx)(oz,{message:e}),(0,a.jsx)(la,{message:e})]})});function la({message:e}){let{user:t}=(0,H.useUser)(),n=(0,l.useMemo)(()=>{if(!t?.isAdminMode)return[];let n=[];return e.usage&&(n.push({label:"Completion",value:e.usage.outputTokens}),n.push({label:"Prompt",value:e.usage.inputTokens||0}),n.push({label:"Total",value:e.usage.totalTokens||0})),e.estimatedUsage&&n.push({label:"Estimation",value:e.estimatedUsage}),e.modelId&&n.push({label:"Model",value:e.modelId+(e.thinkingMode?`-${e.thinkingMode}`:"")}),n},[e.estimatedUsage,e.modelId,e.thinkingMode,e.usage,t?.isAdminMode]);return t?.isAdminMode?(0,a.jsx)(o_,{details:n}):null}function lo({type:e,botMessage:t,setChatState:n,...r}){let s=(0,D.useT)(),{chatId:i,messageId:l,messageText:c,leafMessageId:d,userId:u,promptMessageId:h}=(0,oA.useVoteOptions)({messageId:t.id}),{isLoading:p,canVote:f}=(0,oK.useCanVoteOnMessage)();if(p||!f)return null;let m=async()=>{h&&l&&c&&d&&((0,N.track)("SubmitUpvote",{messageId:l,leafMessageId:d}),o.toast.success(s("botMessage.successToast")),n(e=>({messages:e.messages.map(e=>"id"in e&&e.id===l?{...e,vote:"upvote"}:e)})),await (0,oP.sendMessageFeedback)({feedback:"",reasons:[],chatId:i,messageId:l,leafMessageId:d,userId:u,type:"upvote",promptMessageId:h}))};return(0,a.jsx)(A.Button,{"aria-label":s("botMessage.upvote"),disabled:"upvote"===t.vote,onClick:m,tooltip:s("botMessage.upvote"),tooltipDirection:"bottom",type:e,...r,children:(0,a.jsx)(oX,{})})}var ll=e.i(370912),lc=e.i(862664);e.i(350097);var ld=e.i(76866),lu=e.i(723487),lh=e.i(961157);function lp(){let{user:e}=(0,H.useUser)(),{atoms:t}=(0,iA.useCurrentChat)();(0,sJ.useAtomValue)(t.authorId);let{messages:n,activeForkKey:r}=(0,g.useChatMessages)();(0,e5.useDesignModeEnabled)(),(0,g.useSetChatState)(),(0,h.useSetActiveBlockState)();let{getBlockCreatedAt:s}=(0,ll.useBlockCreatedAt)(),i=(0,h.useActiveBlockState)(),a=i?.id,{history:d,currentBlockIndex:u}=(0,m.useBlockHistory)({blockId:a,searchAll:!0}),{setPulsePreview:p}=(0,m.useSetPulsePreview)(),{getBlockDeployed:f}=(0,lc.useDeployedBlocks)(),{scrollToHash:x}=(0,O.useScrollToMessage)(),v=(0,c.useRouter)(),[b,y]=(0,lu.useHistoryPanel)(),[j,w]=(0,l.useState)(null),[k,C]=(0,l.useState)(null),{restoreVersion:S,isRestoring:M}=(0,ld.useRestoreBlockVersion)(a);return(0,l.useCallback)((e,t)=>{w(e),S(e,t,{onSuccess:()=>{y(!1)},onFinally:()=>{w(null),C(null)}})},[S,y]),(0,l.useCallback)(e=>{try{(0,l.startTransition)(async()=>{let t=await (0,lh.forkBlock)(e);t&&"string"==typeof t?(v.push(`/chat/${t}`),y(!1)):o.toast.error("error")})}catch(e){console.log(e),o.toast.error("error")}},[v,y]),e?.id,null}function lf({isMobile:e,justSubmitted:t,onSubmit:n}){let r,{messages:s,activeForkKey:i}=(0,g.useChatMessages)(),{isLoading:o,isStreaming:h,isRestoring:p,initialStreamPromise:m}=(0,g.useChatLoadingState)(),{expectUser:v}=(0,H.useUser)(),{setShowSignInDialog:b}=(0,Z.useSignInDialog)(),[y]=(0,ep.useRateLimit)(),{atoms:j}=(0,iA.useCurrentChat)(),w=(0,sJ.useAtomValue)(j.canWriteToChat),k=(0,e5.useDesignModeEnabled)(),S=(0,f.useIsChatPage)(),M=!!(y?.remaining!==void 0&&y.remaining<=0),N=(0,er.getAnonId)(),I=(0,l.useCallback)(e=>{b({content:"new"===e.action&&(e.content||!1)})},[b]),T=(r=(0,l.useRef)(["",null]),(0,l.useMemo)(()=>{let[e,t]=r.current,n=s.reduce((e,t)=>e+"@"+t.id,"");if(e===n)return t;let i=(0,x.computeForkKeyOptions)(s);return r.current=[n,i],i},[s])),E=(0,l.useCallback)(e=>T.get(e.parentId||x.ROOT_MESSAGE_KEY)||lg,[T]),L=(0,l.useMemo)(()=>new Map(s.map(e=>[e.id,e])),[s]),_=(0,l.useMemo)(()=>{if(!i||0===i.length)return[];let e=i.filter(e=>!e.startsWith(C.OPT_RETRY_ID)).map(e=>L.get(e)).filter(Boolean),t=e[e.length-1];if(!t)return[];let n="assistant"===t.role&&(t.content.value||[]).some(e=>!!Array.isArray(e)&&0===e[0]);if(h||o||p){if("user"===t.role)return[...e,"spinner"];if("assistant"===t.role&&!n)return[...e.slice(0,-1),"spinner"]}return e},[i,h,o,p,L]),{vlistRef:P,scrollToIndex:A,handleScroll:R,containerRef:D,isAtTop:F,isAtBottom:$}=(0,O.useChatScroll)(),{submit:V,stopLlmResponse:z,setChatState:U}=(0,C.useV0Chat)({onSubmit:n});!function({submit:e,initialStreamPromise:t}){let{prefillOptions:n}=(0,g.useChatPrefillOptions)(),r=(0,c.useRouter)(),s=(0,l.useRef)(!1),i=(0,g.useSetChatState)(),{setMetadata:a}=(0,eO.useChatMetadata)(),{user:o}=(0,H.useUser)();(0,l.useEffect)(()=>{let r=!1;return(async()=>{if(!t||s.current||null===o)return;let a=await t;if(!r){if(!a)return i({initialStreamPromise:void 0});if(s.current=!0,!r){if(n?.templateId){e({action:"new",content:n.query?(0,eS.createMDXMessageContent)(n.query):null,templateId:n.templateId},a),i({initialStreamPromise:void 0});return}e({action:"new",content:n?.query?(0,eS.createMDXMessageContent)(n.query):null},a),i({initialStreamPromise:void 0})}}})(),()=>{r=!0}},[t,n,r,o,e,i,a])}({submit:V,initialStreamPromise:m});let W=(0,l.useMemo)(()=>{if(!i||!_.length)return[];let e=_.includes("spinner"),t=_.filter(Boolean).findLast(e=>"spinner"!==e&&"user"===e.role),n=t?.id;return _.filter(Boolean).map((t,r)=>{let s=r===_.length-1,i="spinner-"+r;"spinner"!==t&&(i=(0,eF.getUIMessageKey)(t));let l="auto";s&&(l="max(200px, 40cqh)");let c=null;if("spinner"===t)c=(0,a.jsx)(of.BotMessageLayout,{id:i,isLastMessage:!0,children:(0,a.jsx)(ed.motion.div,{...(0,of.motionReplyAnimationIf)(!0,.6),children:(0,a.jsx)(oh.MockThinkingV1,{})})});else{let r=E(t),i=e&&n===t.id;"user"===t.role&&(c=(0,a.jsx)(oE,{awaitingResponse:i,isLastMessage:s,forkKeyOptions:r,message:t},`user-message-${t.id}`)),"assistant"===t.role&&(c=(0,a.jsx)(li,{forkKeyOptions:r,isLastMessage:s,isLoading:o,isStreaming:h,message:t,submit:V,setChatState:U},`bot-message-${t.id}`))}return(0,a.jsx)("div",{className:(0,d.cn)("flex w-full empty:hidden [&>div]:w-full flex-col py-1.5 px-3",{"pt-4":0===r,"pb-12":s}),style:{minHeight:l},children:c},i)})},[i,_,E,o,h,V,U]),q=_.length;return(0,l.useEffect)(()=>{let e=q-1;if("spinner"!==_[e])return;let t=requestAnimationFrame(()=>{A(e,!0)});return()=>{cancelAnimationFrame(t)}},[q]),(0,l.useEffect)(()=>{let e=requestAnimationFrame(()=>{let e=q-1;e>=0&&A(e,!1)});return()=>{cancelAnimationFrame(e)}},[]),(0,a.jsxs)("div",{className:"flex flex-col size-full relative",children:[(0,a.jsx)(eN.ConditionalNavigationMarker,{enabled:S&&(t||!o),phase:"content",label:"ChatMessagesWithPrompt",routeOverride:"/chat/[slug]"}),(0,a.jsxs)("div",{"aria-roledescription":"chat messages",className:"relative size-full","data-testid":"chat-messages-container",id:u.SCROLL_CONTAINER_ID,role:"list",style:{contain:"strict"},children:[(0,a.jsx)(od.ScrollFade,{visible:!$,direction:"bottom",color:"muted",orientation:"vertical"}),(0,a.jsx)(od.ScrollFade,{visible:!F,direction:"top",color:"muted",orientation:"vertical"}),(0,a.jsx)("div",{className:"relative h-full w-full overflow-y-scroll visible-scrollbar @container/messages",ref:D,style:{...(0,op.visibleStylesIf)(!k),overflowAnchor:"none"},id:u.SCROLL_INNER_CONTAINER_ID,...(0,op.a11yHideIf)(k),children:(0,a.jsx)(l.Suspense,{fallback:(0,a.jsx)(ou.ChatSkeleton,{}),children:(0,a.jsx)("div",{className:"group/message-list mx-auto w-full max-w-3xl",children:(0,a.jsx)(eD.Virtualizer,{ref:P,onScroll:R,scrollRef:D,children:W})})})}),(0,a.jsx)(a6,{}),(0,a.jsx)(lp,{})]}),(0,a.jsx)("div",{className:"group/message-list mx-auto w-full max-w-3xl sm:px-0 sm:pb-0 px-2 pb-2",children:w?(0,a.jsx)(eu.PromptForm,{isAtBottom:$,isMobile:e,isNewChat:!1,isSignedIn:v,isAnonymous:!!(!v&&N),stop:z,submit:v||N&&!M?V:I}):(0,a.jsx)(lm,{})}),(0,a.jsx)(B,{})]})}e.i(607391);let lm=(0,l.memo)(function(){let e=(0,h.useActiveBlockState)();return e?(0,a.jsx)("div",{className:"@container/readonly-prompt w-full",children:(0,a.jsxs)("form",{className:"material-medium relative flex items-center justify-between rounded-[12px] pl-3 pr-2 py-2 gap-3 border border-v0-alpha-400 bg-v0-blue-100 text-v0-blue-700 @max-[250px]/readonly-prompt:flex-col @max-[250px]/readonly-prompt:items-start",onSubmit:t=>{t.preventDefault(),e&&(0,ek.openDialog)({type:"forkBlock",data:{blockId:e.id,page:"chat",canWriteToChat:!1,actionType:"remix"}})},children:[(0,a.jsx)("span",{className:"text-label-14 text-pretty",children:"This chat is view-only. Remix it to make changes."}),(0,a.jsx)(A.Button,{variant:"blue",size:"sm",type:"submit",className:"@max-[250px]/readonly-prompt:w-full",children:"Remix chat"})]})}):null}),lg=[];var lx=e.i(385671),lv=e.i(679232),lb=e.i(35036),ly=e.i(262553),lj=e.i(519738),lw=e.i(117803),lk=e.i(423904);function lC({icon:e,iconFilled:t,title:n,selected:r,onClick:s,tooltip:i,disabled:o}){return(0,a.jsx)(tp.Tooltip,{content:i,side:"right",children:(0,a.jsxs)("button",{disabled:o,className:(0,d.cn)("flex flex-col items-center justify-center gap-[2px] text-center text-v0-gray-800 text-[11px] font-medium leading-[16px] group/sidebar-item",r&&"text-v0-alpha-1000 font-semibold",o&&"text-v0-gray-500"),onClick:()=>{s()},children:[(0,a.jsx)("div",{className:(0,d.cn)("p-1.5 rounded-md",o?"cursor-not-allowed":"group-hover/sidebar-item:bg-v0-alpha-400",r&&"group-hover/sidebar-item:bg-v0-alpha-400"),children:(0,a.jsx)("div",{className:"group-hover/sidebar-item:scale-110 transition-all will-change-transform",children:r&&t?t:e})}),n]})})}function lS(e){let{isStreaming:t,isContinuing:n,isLoading:r,isRestoring:s,isSyncing:i}=(0,g.useChatLoadingState)(),{isReadOnlyMode:o}=(0,ly.useReadOnlyMode)(),c=(0,l.useMemo)(()=>t||n||r||s||i,[t,n,r,s,i]),{currentVersion:d}=(0,lj.useBlockVersionInfo)(),{frameLoading:u}=(0,lw.useDesignModeToggle)();return(0,a.jsx)(lC,{value:"design",icon:(0,a.jsx)(lb.DesignSystemsIcon,{}),iconFilled:(0,a.jsx)(lk.DesignSystemsIconFilled,{}),title:"Design",selected:e.selected,disabled:c||u,onClick:e.onClick,tooltip:o?`Design mode is only available on the latest version. Currently
            viewing v${d}.`:t?"Design mode is not available while streaming.":u?"Design mode is not available while the preview is loading":"Design Mode"},"design")}function lM(e){return"design"===e.value?(0,a.jsx)(lS,{selected:e.selected,onClick:e.onClick},e.value):(0,a.jsx)(lC,{icon:e.icon,iconFilled:e.iconFilled,title:e.title,selected:e.selected,onClick:e.onClick,disabled:e.disabled,tooltip:e.tooltip,value:e.value},e.value)}function lN(){let e=(0,h.useActiveBlockState)(),{atoms:t,actions:n}=(0,lv.useCurrentChatSidebar)(),{atoms:r}=(0,lx.useChatLayout)(),s=(0,sJ.useAtomValue)(t.activeItem),i=(0,sJ.useAtomValue)(r.isChatOnRight),{atoms:o}=(0,iA.useCurrentChat)(),c=(0,sJ.useAtomValue)(o.canWriteToChat);return((0,l.useEffect)(()=>{c||n.setActiveItem("chat")},[n,c]),e)?(0,a.jsxs)("div",{className:(0,d.cn)("hidden flex-col flex-1 p-2 sm:flex min-w-13",i?"pr-0":"pl-0"),children:[(0,a.jsx)("div",{className:"flex flex-col gap-[10px]",children:lk.CHAT_SIDEBAR_ITEMS.map(t=>(0,a.jsx)(lM,{icon:t.icon,iconFilled:"iconFilled"in t?t.iconFilled:void 0,title:t.title,selected:t.value===s,tooltip:t.tooltip,onClick:()=>(t=>{if(!c){e?.id&&(0,ek.openDialog)({type:"forkBlock",data:{blockId:e.id,page:"chat",canWriteToChat:!!c,actionType:"remix"}});return}n.setActiveItem(t),(0,N.track)("ClickSidebarItem",{item:t,previousItem:s,canWriteToChat:!!c,chatId:e?.id,blockId:e?.id})})(t.value),value:t.value},t.title))}),(0,a.jsx)("div",{className:"mt-auto flex justify-center",children:(0,a.jsx)(lM,{icon:(0,a.jsx)(eW.Question,{}),title:"",tooltip:"Send Feedback",onClick:()=>(0,ek.openDialog)({type:"feedback"}),value:"feedback",selected:!1})})]}):null}var lI=e.i(276507);function lT(e){return(0,a.jsx)("div",{className:(0,d.cn)("material-medium bg-v0-background-100 border border-v0-alpha-400 rounded-[8px] overflow-auto mb-2 flex flex-col size-full",e.className),...e,children:e.children})}function lE(e){return(0,a.jsx)("div",{...e,className:(0,d.cn)("sticky top-0 z-20 bg-v0-background-100 flex flex-row items-center justify-between w-full h-12 gap-2 px-3 border-b border-v0-alpha-200 py-4",e.className),children:e.children})}function lL(e){return(0,a.jsx)("div",{...e,className:(0,d.cn)("text-sm font-medium text-label-14 text-v0-gray-1000 truncate",e.className),children:e.children})}function l_(e){return(0,a.jsx)("div",{...e,className:(0,d.cn)("flex flex-col flex-1 size-full p-4",e.className),children:e.children})}function lP({title:e,subtitle:t,children:n,className:r}){return(0,a.jsx)(lI.Empty,{className:(0,d.cn)("relative h-[156px] rounded-md border border-dashed border-v0-gray-300 px-8",r),children:(0,a.jsxs)(lI.EmptyContent,{children:[e&&(0,a.jsx)(lI.EmptyTitle,{className:"text-sm text-v0-gray-1000",children:e}),t&&(0,a.jsx)(lI.EmptyDescription,{className:"text-pretty text-sm text-v0-gray-900",children:t}),n]})})}var lA=e.i(986280),lR=e.i(538553);e.i(243093);var lD=e.i(250288),lF=e.i(382741);function lO(){let{project:e}=(0,eO.useChatMetadata)(),{user:t}=(0,H.useUser)(),n=(0,D.useT)(),{isLoading:r,addEnvVariable:s,hasVercelWritePermission:i,envVarCount:o}=(0,lD.useEnvVariables)(),l=t?.isImpersonation;return(0,a.jsxs)(lT,{children:[(0,a.jsxs)(lE,{children:[(0,a.jsx)(lL,{children:"Environment Variables"}),(0,a.jsx)(lR.RbacTooltip,{show:!i,requiredRole:"V0Builder",children:(0,a.jsxs)(A.Button,{variant:"ghost",size:"mini",onClick:s,disabled:!i||r,children:[(0,a.jsx)(lA.Plus,{className:"size-4"}),(0,a.jsx)("span",{className:"sr-only",children:"Add variable"})]})})]}),(0,a.jsx)(l_,{children:r&&0===o||0!==o||r?(0,a.jsx)(lF.EnvVariablesList,{}):l?(0,a.jsx)(lP,{title:"Additional Permissions Required",subtitle:"You are impersonating a user. You do not have permission to view Environment Variables of this project.",className:"h-full"}):(0,a.jsx)(lP,{title:n("projectSettings.noEnvVars"),subtitle:n("projectSettings.envVarSubtitle")(e?.vercelProjectId??void 0),className:"h-full",children:(0,a.jsx)(lR.RbacTooltip,{show:!i,requiredRole:"V0Builder",children:(0,a.jsxs)(A.Button,{size:"sm",variant:"secondary",onClick:s,disabled:!i,children:[(0,a.jsx)(lA.Plus,{}),"Add"]})})})})]})}function l$(){return(0,a.jsx)(lD.EnvVariablesProvider,{children:(0,a.jsx)(lO,{})})}var lV=e.i(950955),lz=e.i(854218),lB=e.i(614539),lH=e.i(707974),lU=e.i(66990);function lW(){let{project:e}=(0,eO.useChatMetadata)(),t=e?.projectId,[n,r]=(0,l.useState)(!1),{isLoading:s}=(0,eh.useProjectInstructions)(t);return t?(0,a.jsxs)(lT,{children:[(0,a.jsx)(lE,{children:(0,a.jsx)(lL,{children:"Project Rules"})}),(0,a.jsx)(l_,{className:"p-0",children:s?(0,a.jsxs)("div",{className:"flex flex-col gap-3",children:[(0,a.jsx)(i4.Skeleton,{className:"h-36 w-full"}),(0,a.jsx)(A.Button,{disabled:!0,variant:"secondary",size:"sm",className:"h-7 rounded-md",children:"Save Changes"})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(lG,{setSaving:r,projectId:t}),(0,a.jsx)(lU.Separator,{}),(0,a.jsx)(lX,{setSaving:r,projectId:t})]})})]}):(0,a.jsxs)(lT,{children:[(0,a.jsx)(lE,{children:(0,a.jsx)(lL,{children:"Project Rules"})}),(0,a.jsx)(l_,{children:(0,a.jsx)(lP,{title:"No Project Connected",subtitle:"Connect your chat to a Vercel Project to get started with project rules.",className:"h-full"})})]})}function lq({label:e,info:t}){return(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsx)(lH.Label,{children:e}),(0,a.jsx)(tp.Tooltip,{content:(0,a.jsx)("div",{className:"text-center",children:t}),children:(0,a.jsx)(tL.InformationFillSmall,{})})]})}function lG({setSaving:e,projectId:t}){let{instructions:n,isLoading:r}=(0,eh.useProjectInstructions)(t),s=(0,eh.useCanMakeProjectUpdates)();return t?(0,a.jsxs)("div",{className:"flex flex-col gap-2 p-4",children:[(0,a.jsx)("div",{className:"flex items-center gap-1",children:(0,a.jsx)(lq,{label:"Instructions",info:"Custom instructions and guidelines for v0 to follow in responses."})}),r?(0,a.jsxs)("div",{className:"flex flex-col gap-3",children:[(0,a.jsx)(i4.Skeleton,{className:"h-36 w-full"}),(0,a.jsx)(A.Button,{disabled:!0,variant:"secondary",size:"sm",className:"h-7 rounded-md",children:"Save Changes"})]}):(0,a.jsx)(lz.ProjectInstructions,{readOnly:!s,projectId:t,initialInstructions:n,textAreaMinHeight:144,buttonVariant:"secondary",onSubmit:()=>{e(!0)},onFinish:()=>{e(!1)}})]}):null}function lX({setSaving:e,projectId:t}){let n=(0,D.useT)(),{isLoading:r}=(0,eh.useProjectSources)(t);return t?r?(0,a.jsx)(lV.SectionListSkeleton,{title:n("projectSettings.sources")}):(0,a.jsxs)("div",{className:"flex flex-col gap-2 p-4",children:[(0,a.jsx)(lq,{label:n("projectSettings.sources"),info:"Sources let v0 use your files and information in responses."}),(0,a.jsx)(lB.ProjectSources,{projectId:t,onSubmit:()=>e(!0),onFinish:()=>e(!1),emptyStateComponent:lV.EmptyState,showEmptyTitle:!1})]}):null}var lZ=e.i(481498);function lY(){return(0,a.jsxs)(lT,{children:[(0,a.jsx)(lE,{children:(0,a.jsx)(lL,{children:"Integrations"})}),(0,a.jsx)(l_,{className:"p-0 @container",children:(0,a.jsx)(l.Suspense,{fallback:(0,a.jsx)(lZ.IntegrationOptionsSkeleton,{}),children:(0,a.jsx)(lZ.IntegrationOptions,{})})})]})}var lJ=e.i(921431),lK=e.i(666425),lQ=e.i(839590);function l0(){let[e,t]=(0,l.useState)(!1),{chatId:n}=(0,g.useChatId)(),{project:r,isLoading:s}=(0,eO.useChatMetadata)(),{allBlocks:i}=(0,m.useBlockHistory)({searchAll:!1}),o=(0,l.useMemo)(()=>i.findLast(e=>"code-project"===e.type)?.id,[i]),{vercelProjectWithDashboard:c,isLoading:d}=(0,eh.useVercelProject)({v0ProjectId:r?.projectId});return r?.projectId?(0,a.jsxs)(lT,{children:[(0,a.jsx)(lE,{children:(0,a.jsx)(lL,{children:"Settings"})}),(0,a.jsxs)(l_,{className:"@container p-0 flex flex-col",children:[(0,a.jsx)("div",{className:"p-4",children:(0,a.jsxs)("div",{className:"grid grid-cols-1 @[320px]:grid-cols-2 gap-3",children:[(0,a.jsx)(lJ.VercelProject,{setSaving:t,vercelProjectWithDashboard:c,isLoading:d,v0ProjectId:r.projectId,closeSettingsSheet:()=>{}}),(0,a.jsx)(lK.Git,{vercelProjectWithDashboard:c,isLoading:d,v0ProjectId:r.projectId,closeSettingsSheet:()=>{},chatId:n,latestBlockId:o})]})}),(0,a.jsx)(lU.Separator,{}),(0,a.jsx)("div",{className:"p-4",children:(0,a.jsx)(lQ.ToggleBuiltWithV0Button,{v0ProjectId:r.projectId})})]})]}):(0,a.jsxs)(lT,{children:[(0,a.jsx)(lE,{children:(0,a.jsx)(lL,{children:"Settings"})}),(0,a.jsx)(l_,{children:(0,a.jsx)(lP,{title:"No Project Connected",subtitle:"Connect your chat to a Vercel Project to make changes to its settings.",className:"h-full"})})]})}function l1({isMobile:e,isAuthor:t,templates:n,emptyScreenRef:r}){let[s,i]=(0,l.useState)(!1),o=(0,l.useCallback)(()=>{i(!0),setTimeout(()=>i(!1),1e3)},[]),{initialStreamPromise:c}=(0,g.useChatLoadingState)(),d=(0,lx.getChatLayoutAtoms)(),u=(0,sJ.useAtomValue)(d.isChatOnRight);return(0,f.useIsChatPage)()||void 0!==c?(0,a.jsxs)("div",{className:(0,q.default)("relative flex h-full min-w-0 flex-1 flex-row",u?"sm:pl-2 flex-row-reverse":"sm:pr-2",!t&&"[&_.author-action]:hidden"),"data-testid":"full-chat",children:[(0,a.jsx)(lN,{}),(0,a.jsx)(l2,{isMobile:e,onSubmit:o,justSubmitted:s}),(0,a.jsx)(X,{})]}):(0,a.jsx)(e_,{isMobile:e,onSubmit:o,ref:r,children:n})}function l2({isMobile:e,onSubmit:t,justSubmitted:n}){(0,lw.useDesignModeEffects)();let{canWriteToChat:r}=(0,eO.useChatMetadata)(),{atoms:s}=(0,lv.useCurrentChatSidebar)(),i=(0,sJ.useAtomValue)(s.activeItem);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(l.Activity,{mode:"chat"===i||"design"===i?"visible":"hidden",children:(0,a.jsx)(lf,{isMobile:e,onSubmit:t,justSubmitted:n})}),r&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(l.Activity,{mode:"rules"===i?"visible":"hidden",children:(0,a.jsx)(lW,{})}),(0,a.jsx)(l.Activity,{mode:"env-vars"===i?"visible":"hidden",children:(0,a.jsx)(l$,{})}),(0,a.jsx)(l.Activity,{mode:"connect"===i?"visible":"hidden",children:(0,a.jsx)(lY,{})}),(0,a.jsx)(l.Activity,{mode:"settings"===i?"visible":"hidden",children:(0,a.jsx)(l0,{})})]})]})}var l5=e.i(162061),l3=e.i(384562),l4=e.i(748568),l6=e.i(823137),l9=e.i(685806),l8=e.i(899488),l7=e.i(745587),ce=e.i(665443),ct=e.i(333215),cn=e.i(554912),cr=e.i(725415),cs=e.i(293060),ci=e.i(284546),ca=e.i(266148),co=e.i(393753);function cl({activeBlockState:e,renderedBlock:t,remote:n}){let r=e?.id;!r&&n&&(r="@remote");let s=(0,f.useIsChatPage)(),{pipl:i}=(0,W.useFlags)(),{isReadOnlyMode:o}=(0,ly.useReadOnlyMode)(),{messagesLength:c}=(0,g.useChatMessagesLength)(),{isStreaming:p}=(0,g.useChatLoadingState)(),{activeTab:x}=(0,ci.useActiveTab)(),v=(0,e5.useDesignModeEnabled)(),b=(0,lx.getChatLayoutAtoms)(),y=(0,lx.getChatLayoutActions)(),j=(0,sJ.useAtomValue)(b.isInputPanelOpen),w=(0,sJ.useAtomValue)(b.isChatOnRight),k=(0,sJ.useAtomValue)(b.isDesktopPreviewSize),C=(0,h.useSetActiveBlockView)(),S=e?.type==="local"?e.meta.title||("@remote"===r?"Dev Server Preview":"Untitled"):e?.meta.project||"Untitled";/[_-]/.test(S)&&(S=S.split(/[_-]/).map(e=>e.charAt(0).toUpperCase()+e.slice(1).toLowerCase()).join(" "));let M=(0,l.useCallback)(()=>C(!1),[C]),I=(0,l.useRef)(void 0);(0,l.useEffect)(()=>{if(e&&!e.initial&&e.id!==I.current?.id){let t=l5.default.get(u.BLOCK_RESIZE_COOKIE);(0,N.track)("ViewBlock",{blockType:e.type,blockId:e.id,messageId:e.messageId,blockViewSizePercent:void 0===t?null:parseInt(t),forkedFromBlockId:e.forkedFromBlockId??null}),I.current=e}},[e,M,C]);let T=(0,l.useMemo)(()=>o?(0,a.jsxs)("div",{className:"text-v0-blue-700 text-balance text-center text-label-12 @[52rem]/block-header:text-label-14",children:[(0,a.jsxs)("span",{children:["Old versions are ",(0,a.jsx)("strong",{className:"font-medium",children:"read-only"}),"."]}),(0,a.jsxs)("span",{className:"text-label-10",children:[" ","Restore or switch to latest to edit."]})]}):null,[o]),E=(0,l.useMemo)(()=>(0,a.jsx)("span",{className:(0,d.cn)("h-5 w-[1px] bg-v0-gray-200 hidden sm:flex ",w?"ml-1":"mr-1")}),[w]),L=(0,l.useMemo)(()=>{let e=w?(0,a.jsx)(l3.ChevronDoubleLeft,{}):(0,a.jsx)(l4.ChevronDoubleRight,{});return(0,a.jsxs)(a.Fragment,{children:[w?E:null,(0,a.jsx)(A.Button,{variant:"ghost",size:"sm",className:(0,d.cn)("hidden sm:flex text-v0-gray-900 size-7"),onClick:y.toggleInputPanel,children:j?w?(0,a.jsx)(l4.ChevronDoubleRight,{}):(0,a.jsx)(l3.ChevronDoubleLeft,{}):e}),w?null:E]})},[y.toggleInputPanel,E,w,j]);return s?(0,a.jsxs)("div",{className:"bg-v0-background-100 [&_.loader-fade-top]:to-background [&_.loader-fade-bot]:to-background [&_.loader-fade-top]:via-background/90 flex size-full flex-col items-stretch","data-testid":"desktop-block-panel",children:[(0,a.jsxs)("div",{className:"@container/block-header flex h-12 w-full shrink-0 items-center gap-1 px-2",children:[(0,a.jsxs)("div",{className:"flex w-full sm:max-w-1/4 max-w-fit shrink-1 items-center gap-0.5 sm:gap-1.5",children:[w?null:L,t.actions||(0,a.jsx)("h2",{className:"truncate font-medium",children:S})]}),(0,a.jsx)("div",{className:"min-w-0 flex-1 px-1",children:t.browserControls?t.browserControls:o?T:null}),(0,a.jsxs)("div",{className:"flex min-w-fit sm:w-1/4 items-center justify-end gap-1",children:[(0,a.jsx)(cc,{activeBlock:e}),v?null:(0,a.jsxs)(a.Fragment,{children:[e?.id&&(0,a.jsx)("div",{className:"hidden sm:block",children:(0,a.jsx)(m.BlockHistorySelect,{separator:!1,blockId:e.id})}),t.consoleToggle,t.moreMenu]}),w?L:null]})]}),(0,a.jsxs)("div",{className:(0,d.cn)("h-full min-h-0 w-full min-w-0 @container/block-content justify-center flex overflow-y-auto border-t border-transparent relative",{"border-v0-alpha-400":k}),children:[(0,a.jsx)(cs.DeviceContainer,{forceFullscreen:"code"===x,children:t.content}),!v&&i?(0,a.jsx)(ca.Loader,{isGenerating:p,messagesLength:c}):null]})]},`block-content-${e?.id}`):null}function cc({activeBlock:e}){let{ve:t}=(0,W.useFlags)(),{project:n}=(0,eO.useChatMetadata)(),{envVars:r}=(0,eh.useVercelProject)({v0ProjectId:n?.projectId}),s=(0,l.useMemo)(()=>!!r&&(0,cr.getSQLExecEnvVars)(Object.keys(r)).length>0,[r]),{appendCodeOutputEvents:i,expandConsole:c}=(0,cn.useConsole)(e?.id??""),{activeScopeSlug:u}=(0,eM.useActiveScope)(),{activeFilePath:h}=(0,l7.useActiveFile)({blockId:e?.id??""}),{activeTab:p}=(0,ci.useActiveTab)(),f=h?.includes("scripts/")&&"code"===p,g=h?.endsWith(".sql"),x=h?.endsWith(".py"),v=h?.endsWith(".js"),b=g&&f&&n?.projectId&&s,y=f&&(x||v),[j,w]=(0,l.useState)(!1),k=(0,l.useCallback)(async()=>{if(!b&&!y||j)return;w(!0);let t=(0,s0.parseMultiFileSource)({source:e?.source??"",blockType:"code-project",blockId:e?.id??""}).find(e=>e.meta.file===h);if(!t)throw Error("Script file not found");let r=(e?.id||"")+":"+h,s={error:"No result"};if(b)try{if(!u)return void o.toast.error("Error",{description:"Missing active scope"});if(!n.projectId)return void o.toast.error("Error",{description:"Missing project ID"});s=await (0,ce.doSqlExecution)({props:{language:"sql",source:t.source,meta:{file:h,transaction:t.meta.transaction},closed:!0,originalCode:t.source},v0ProjectId:n.projectId,operationId:r})}catch(e){o.toast.error("Error applying script",{description:e instanceof Error?e.message:"Unknown error"})}else y&&(s=await (0,ct.doExecution)({language:x?"python":"javascript",source:t.source,meta:{file:h,transaction:t.meta.transaction},closed:!0,originalCode:t.source},r,n?.vercelProjectId??void 0));"error"in s?(i([{type:"output",blockId:e?.id??"",fileName:h??"",content:s.error,timestamp:new Date().toISOString(),method:"stderr"}]),o.toast.error("Error",{description:s.error})):i((0,co.transformExecutionOutputToEvents)(s,e?.id??"",h??"")),c?.(),w(!1)},[b,y,j,e?.source,e?.id,h,c,u,n,x,i]);return e&&e.id?(0,a.jsxs)("div",{className:(0,d.cn)("flex items-center gap-1.5"),children:[f&&(g||x||v)&&t&&(0,a.jsx)(l8.CodeBlockButton,{"aria-label":"Run Code",onClick:k,disabled:j||!b&&!y,tooltip:{side:"bottom",content:j?"Running...":g&&!b?"No database connected":"Run Code"},className:"text-v0-black",children:(0,a.jsx)("span",{"aria-hidden":!0,children:j?(0,a.jsx)(l9.Spinner,{size:16}):(0,a.jsx)(l6.PlayCircle,{})})}),(0,a.jsx)("div",{className:"sm:hidden",children:e.id?(0,a.jsx)(m.BlockHistorySelect,{separator:!1,blockId:e.id}):null})]}):null}var cd=e.i(365290),cu=e.i(101486),ch=e.i(770858),cp=e.i(380105),cf=e.i(797173);function cm({blockId:e,chatId:t}){let n=(0,l.useRef)({sendFileUpdate:async(e,t)=>{}});return(0,l.useEffect)(()=>{async function r(e,t,n){try{(await fetch(`/chat/api/vm/actions?cid=${t}&bid=${n}&type=update_files`,{method:"POST",body:JSON.stringify({filesMap:e})})).ok||o.toast.error("Failed to send file update. The VM may not be running.")}catch(e){console.error("Error sending file update:",e)}}let s={},i=(0,eJ.default)(async()=>{let n={...s};return s={},await r(n,t,e)},1e3);async function a(e,t){s[e]=t,await i()}n.current.sendFileUpdate=a},[e,t]),n.current}var cg=e.i(230905),cx=e.i(910888);function cv({block:e}){let{atoms:t,actions:n}=(0,cx.useCurrentChatVM)(),{chatId:r}=(0,g.useChatLoadingState)(),{atoms:s}=(0,iA.useCurrentChat)(),i=(0,sJ.useAtomValue)(s.canWriteToChat),o=(0,sJ.useAtomValue)(t.activeFilePath),c=(0,sJ.useAtomValue)(t.activeFileLocation),{user:d}=(0,H.useUser)(),{editValueMap:h,setEditValueMap:p}=(0,i6.useEditValueMap)({blockId:e.id}),f=cm({blockId:e.id,chatId:r}),{files:m,loadingPath:x}=(0,cf.useBlockFiles)({blockId:e.id,closed:e.closed,source:e.source,meta:e.meta}),v=m||[{source:e.source,meta:e.meta,originalCode:e.source,lang:e.language,isQuickEdit:!1,blockId:e.id}],b=(0,l.useEffectEvent)(()=>{for(let e in h){let t=v.find(t=>t.meta.file===e);t&&f.sendFileUpdate(e,t.source)}p({})}),y=(0,cg.useUnsavedChanges)({blockId:e.id,editValueMap:h,isAdminSaving:!i&&!!d?.isAdminMode,source:e.source,meta:e.meta,files:v,clearEditValueMap:b}),j=!!i||!!d?.isAdminMode,w=(t,n)=>{let r=n||e.meta.file||"";p({...h,[r]:t});let s=n||e.meta.file||(()=>{switch(e.language){case"typescript":case"typescriptreact":return"index.ts";case"javascript":case"javascriptreact":default:return"index.js";case"python":return"main.py"}})();f.sendFileUpdate(s,t)};if("code-project"===e.meta.type&&m){let t;return(0,a.jsxs)("div",{className:"h-full w-full relative",children:[(0,a.jsx)(cp.MultiFileCode,{showDiffInfo:!1,activeFilePath:o||m[0]?.meta.file,initialFileTreeSize:u.DEFAULT_FILE_TREE_SIZE,setActiveFile:n.setActiveFilePath,files:m,loadingPath:x,blockId:e.id,source:e.source,onChange:()=>{},children:(t=m.find(e=>e.meta.file===(o||m[0]?.meta.file)))?(0,a.jsx)(ch.CodeBlock,{language:t.lang,value:h[t.meta.file||""]||t.source,blockId:e.id,originalCode:t.originalCode,closed:!0,editable:j,showLineNumbers:!0,caller:"v0",allowCopyCode:!0,allowDownloadCode:!0,fileName:t.meta.file,showQuickEditAnimation:!1,editValue:h[t.meta.file||""],onEdit:e=>{w(e,t.meta.file)},location:c}):(0,a.jsx)("div",{className:"text-v0-gray-900 p-4",children:"Select a file to view"})}),j?(0,a.jsx)(cg.UnsavedChanges,{...y,resetValue:()=>{b(),window.dispatchEvent(new CustomEvent("editor-reset-changes"))},mergedFromBlockId:e.id}):null]})}return(0,a.jsxs)("div",{className:"h-full w-full relative",children:[(0,a.jsx)(ch.CodeBlock,{language:e.language,value:h[e.meta.file||""]||e.source,blockId:e.id,originalCode:e.source,closed:!0,editable:j,showLineNumbers:!0,caller:"v0",allowCopyCode:!0,allowDownloadCode:!0,showQuickEditAnimation:!1,editValue:h[e.meta.file||""],onEdit:t=>{w(t,e.meta.file)}}),j?(0,a.jsx)(cg.UnsavedChanges,{...y,resetValue:()=>{b(),window.dispatchEvent(new CustomEvent("editor-reset-changes"))},mergedFromBlockId:e.id}):null]})}var cb=e.i(210045),cy=e.i(597932),cj=e.i(230222),cw=e.i(917806);async function ck(e,t,n){try{let r=await fetch("/chat/api/snapshots/upload",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({blockId:e,chatId:t,html:n})});if(!r.ok)return null;return await r.json()}catch(e){return null}}var cC=e.i(252597);function cS({blockId:e,chatId:t,status:n,subdomain:r,iframeRef:s}){let{atoms:i,actions:o}=(0,cx.useCurrentChatVM)(),c=(0,sJ.useAtomValue)(i.showConsole),d=(0,sJ.useAtomValue)(i.url),u=(0,cu.useVMStatus)({enabled:!0,bid:e,cid:t});r=u.subdomain||r;let h=u.status||n,{consoleEvents:p,clearConsoleEvents:f}=(0,cn.useConsole)(e,t),{atoms:m}=(0,iA.useCurrentChat)(),x=(0,sJ.useAtomValue)(m.canWriteToChat),{isStreaming:v}=(0,g.useChatLoadingState)(),{messagesLength:b}=(0,g.useChatMessagesLength)(),y=(0,s9.getBlockIframeId)(e);return!function({blockId:e,chatId:t,enabled:n=!0}){(0,l.useEffect)(()=>{if(!n)return;let r=async n=>{let r=n.data;if(!r||"object"!=typeof r||!r.__v0_remote__||"snapshot_capture"!==r.type)return;let s=r.data;if(s&&"string"==typeof s)try{await ck(e,t,s)}catch(e){}};return window.addEventListener("message",r),()=>{window.removeEventListener("message",r)}},[e,t,n])}({chatId:t,blockId:e,enabled:"running"===h}),(0,a.jsx)("div",{className:"w-full h-full flex flex-col relative",children:(0,a.jsx)(cy.default,{hide:!c,blockId:e,consoleEvents:p,clearLogs:f,canWriteToChat:x,onClose:o.toggleShowConsole,children:(0,a.jsxs)("div",{className:"@container/vm-preview relative flex-1 flex items-center justify-center overflow-y-scroll",children:[(0,a.jsx)(cC.SnapshotRenderer,{blockId:e,chatId:t,vmStatus:h,children:(0,a.jsx)(cM,{chatId:t,children:r&&"running"===h?(0,a.jsx)(cb.Iframe,{iframeId:y,isPublished:!1,src:d,origin:(0,cw.getVMIframeOrigin)(r,e),iframeRef:s}):(0,a.jsx)(cj.VMPending,{blockId:e,chatId:t})})}),(0,a.jsx)(ca.Loader,{isGenerating:v,messagesLength:b})]})})})}function cM({chatId:e,children:t}){let n=(0,cx.getVMAtoms)(e),r=(0,sJ.useAtomValue)(n.previewSize),s=(0,sJ.useAtomValue)(n.deviceStyles);return(0,a.jsx)("div",{className:(0,iV.cn)("flex items-center justify-center w-full h-full","desktop"!==r&&"material-modal"),style:{...s,...(0,cd.transitionStyles)(["width","height","border-radius","background","box-shadow"],{duration:400})},children:t})}var cN=e.i(847666),cI=e.i(245916),cT=e.i(838478),cE=e.i(240811),cL=e.i(587842),c_=e.i(595155),cP=e.i(460359),cA=e.i(636830),cR=e.i(734858),cD=e.i(967122),cF=e.i(768619),cO=e.i(583965);function c$({blockId:e}){let{atoms:t}=(0,cx.useCurrentChatVM)(),n=(0,sJ.useAtomValue)(t.selectedTab);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(cV,{}),(0,a.jsxs)("div",{className:"flex-1 flex items-center justify-center",style:{...(0,op.visibleStylesIf)("preview"===n),...(0,cd.transitionStyles)(["opacity"])},children:[(0,a.jsx)(cz,{}),(0,a.jsx)(cB,{blockId:e})]})]})}function cV(){let{atoms:e}=(0,cx.useCurrentChatVM)();return(0,a.jsxs)(iW.TabsToggle,{defaultValue:"preview",atom:e.selectedTab,children:[(0,a.jsx)(iW.TabsToggleTrigger,{value:"preview",square:!0,children:(0,a.jsx)(cN.Eye,{})}),(0,a.jsx)(iW.TabsToggleTrigger,{value:"code",square:!0,children:(0,a.jsx)(cI.Code,{})})]})}function cz(){let{atoms:e,actions:t}=(0,cx.useCurrentChatVM)();(0,sJ.useAtomValue)(e.url);let{canGoBack:n,canGoForward:r,href:s,setHref:i,latestHref:o,loading:c,setLoading:d,refresh:u,temporalHref:h,setTemporalHref:p}=(0,cO.useBrowserFrame)(),f=(0,y.useLatest)(h),m=(0,l.useCallback)(()=>{let e=document.getElementsByTagName("iframe")[0];e&&e.contentWindow&&((0,e4.sendToIframe)(e.contentWindow,{type:"navigate_back"}),p(null))},[]),g=(0,l.useCallback)(()=>{let e=document.getElementsByTagName("iframe")[0];e&&e.contentWindow&&((0,e4.sendToIframe)(e.contentWindow,{type:"navigate_forward"}),p(null))},[]),x=(0,l.useCallback)(()=>{let e=document.getElementsByTagName("iframe")[0];e&&e.contentWindow&&((0,e4.sendToIframe)(e.contentWindow,{type:"navigate_to",href:null===f.current?o.current:new URL(f.current??"",o.current).href}),d(!0))},[o,f]),v=(0,l.useMemo)(()=>{if(!s)return"";let e=new URL(s,"http://n");return e.pathname+e.search+e.hash},[s]);return(0,a.jsx)("div",{className:"flex flex-1 items-center justify-center",children:(0,a.jsxs)("div",{className:"flex-1 max-w-[300px] h-7 border flex items-center border-v0-gray-200 rounded-full px-[1px] group cursor-text focus-within:border-v0-gray-300 transition-all",children:[(0,a.jsx)(l8.CodeBlockButton,{disabled:!n,onClick:m,children:(0,a.jsx)(cA.ChevronLeft,{})}),(0,a.jsx)(l8.CodeBlockButton,{disabled:!r,onClick:g,children:(0,a.jsx)(cR.ChevronRight,{})}),(0,a.jsx)("input",{className:"flex-1 pl-1 text-v0-gray-900 text-label-14 flex items-center outline-none",value:null!==h?h:v,onChange:e=>void p(e.target.value),onFocus:e=>{e.currentTarget.select()},placeholder:"/",onKeyDown:e=>{"Enter"===e.key?(x(),i(new URL(h??"",s).href),p(null),e.stopPropagation(),e.currentTarget.blur()):"Escape"===e.key&&(p(null),e.stopPropagation(),e.currentTarget.blur()),"Enter"===e.key&&h&&(t.setUrl(h),i(h),p(null),e.preventDefault())}}),(0,a.jsx)(cU,{className:"!pr-2 w-fit rounded-r-[12px] rounded-l-[6px]"})]})})}function cB({blockId:e}){return(0,a.jsxs)("div",{className:"flex items-center gap-1.5",children:[(0,a.jsx)(cH,{blockId:e}),(0,a.jsx)(cW,{})]})}function cH({blockId:e}){let[t,n]=(0,l.useState)(!1),{atoms:r,actions:s}=(0,cx.useCurrentChatVM)(),i=(0,sJ.useAtomValue)(r.showConsole),o=(0,sJ.useAtomValue)(r.url),c=(0,s9.getBlockIframeId)(e),d=(0,l.useCallback)(()=>{let e=new URL(window.location.href);e.searchParams.set("b",c),e.searchParams.set("f","1"),e.searchParams.set("path",o),window.open(e.toString(),"_blank","noreferrer,noopener")},[c,o]);return(0,a.jsxs)(ee.DropdownMenu,{open:t,onOpenChange:n,children:[(0,a.jsx)(ee.DropdownMenuTrigger,{asChild:!0,children:(0,a.jsx)(cq,{children:(0,a.jsx)(eq.MoreHorizontal,{})})}),(0,a.jsx)(ee.DropdownMenuContent,{align:"end",className:"w-[150px]",sideOffset:8,children:(0,a.jsxs)(ee.DropdownMenuGroup,{children:[(0,a.jsxs)(ee.DropdownMenuItem,{onSelect:s.toggleShowConsole,children:[(0,a.jsx)(cP.Footer,{}),(0,a.jsx)("span",{children:i?"Hide Console":"Show Console"})]}),(0,a.jsxs)(ee.DropdownMenuItem,{onSelect:d,children:[(0,a.jsx)(J.External,{}),"Open in New Tab"]})]})})]})}function cU({className:e,style:t}){let[n,r]=(0,l.useState)(!1),s=(0,g.useChatId)().chatId,i=(0,cD.useActiveBlockIdRef)()?.current,o=(0,l.useCallback)(()=>{let e=document.querySelector("iframe[data-v0]");e&&e.contentWindow&&e.setAttribute("src",(0,cF.getIframeSrc)(e))},[]),[c,d]=(0,l.useState)(!1),{refresh:u}=(0,cu.useVMStatus)({enabled:!!i,cid:s,bid:i}),h=(0,l.useCallback)(async()=>{d(!0);try{if(!(await fetch(`/chat/api/vm/actions?cid=${s}&bid=${i}&type=recreate`,{method:"POST"})).ok)throw Error("Failed to recreate VM");u()}catch(e){console.error("Error recreating VM:",e)}d(!1)},[s,i,u]);return(0,a.jsxs)(ee.DropdownMenu,{open:n,onOpenChange:r,children:[(0,a.jsx)(ee.DropdownMenuTrigger,{asChild:!0,children:(0,a.jsx)(cq,{className:e,style:t,children:(0,a.jsx)(oW.RefreshClockwise,{})})}),(0,a.jsx)(ee.DropdownMenuContent,{align:"end",className:"w-[200px]",side:"bottom",sideOffset:8,children:(0,a.jsxs)(ee.DropdownMenuGroup,{children:[(0,a.jsxs)(ee.DropdownMenuItem,{onSelect:()=>{console.log("Refresh page clicked"),o(),r(!1)},children:[(0,a.jsx)(c_.RotateClockwise,{}),"Refresh Page"]}),(0,a.jsxs)(ee.DropdownMenuItem,{onSelect:()=>{console.log("Kill and restart sandbox clicked"),h(),r(!1)},children:[(0,a.jsx)(l6.PlayCircle,{}),"Restart Sandbox"]})]})})]})}function cW(){let{actions:e}=(0,cx.useCurrentChatVM)(),[t,n]=(0,l.useState)(!1),r=t=>{e.setPreviewSize(t)};return(0,a.jsxs)(ee.DropdownMenu,{open:t,onOpenChange:n,children:[(0,a.jsx)(ee.DropdownMenuTrigger,{asChild:!0,children:(0,a.jsx)(cq,{children:(0,a.jsx)(cG,{})})}),(0,a.jsx)(ee.DropdownMenuContent,{align:"end",className:"w-[150px]",side:"bottom",sideOffset:8,children:(0,a.jsxs)(ee.DropdownMenuGroup,{children:[(0,a.jsxs)(ee.DropdownMenuItem,{onSelect:()=>r("desktop"),children:[(0,a.jsx)(cT.DeviceDesktop,{}),"Desktop"]}),(0,a.jsxs)(ee.DropdownMenuItem,{onSelect:()=>r("tablet"),children:[(0,a.jsx)(cE.TabletDevice,{}),"Tablet"]}),(0,a.jsxs)(ee.DropdownMenuItem,{onSelect:()=>r("phone"),children:[(0,a.jsx)(cL.DevicePhone,{}),"Phone"]})]})})]})}function cq({children:e,...t}){return(0,a.jsx)(A.Button,{...t,variant:"ghost",size:"xs",className:(0,iV.cn)("h-6 w-6 text-v0-gray-900 hover:text-v0-gray-1000",t.className),children:e})}let cG=(0,eb.withNewIcon)(`
<path d="M7 4.25C7.9665 4.25 8.75 5.0335 8.75 6V14C8.75 14.9665 7.9665 15.75 7 15.75H2C1.0335 15.75 0.25 14.9665 0.25 14V6C0.25 5.0335 1.0335 4.25 2 4.25H7ZM14 0.25C14.9664 0.250109 15.7499 1.03362 15.75 2V14C15.75 14.9664 14.9664 15.7499 14 15.75H9.75V14.25H14C14.138 14.2499 14.25 14.138 14.25 14V2C14.2499 1.86205 14.1379 1.7501 14 1.75H4C3.86193 1.75 3.75001 1.86193 3.75 2V3.25H2.25V2C2.25001 1.03351 3.03351 0.25 4 0.25H14ZM2 5.75C1.86193 5.75 1.75 5.86193 1.75 6V14C1.75 14.1381 1.86193 14.25 2 14.25H7C7.13807 14.25 7.25 14.1381 7.25 14V6C7.25 5.86193 7.13807 5.75 7 5.75H2ZM5 11.75C5.41421 11.75 5.75 12.0858 5.75 12.5C5.75 12.9142 5.41421 13.25 5 13.25H4C3.58579 13.25 3.25 12.9142 3.25 12.5C3.25 12.0858 3.58579 11.75 4 11.75H5Z" fill="currentColor"/>
`);var cX=e.i(481556);function cZ({drawerView:e=!1,blockId:t,chatId:n}){let{atoms:r}=(0,cx.useCurrentChatVM)(),s=(0,sJ.useAtomValue)(r.selectedTab),i=(0,h.useActiveBlockState)(n),o=l.default.useRef(null),{status:c,subdomain:d}=(0,cu.useVMPreviewSubdomain)({enabled:!!n,bid:t,cid:n}),u=cm({blockId:t,chatId:n}),{editValueMap:p,setEditValueMap:f}=(0,i6.useEditValueMap)({blockId:t}),m=(0,l.useEffectEvent)((e,t)=>{f({...p,[e]:t}),u.sendFileUpdate(e,t)});return e?null:(0,a.jsx)(cX.FullscreenContainer,{children:(0,a.jsxs)("div",{className:"flex flex-col h-full w-full",children:[(0,a.jsx)("div",{className:"flex items-center py-2.5 px-3 gap-2 border-b border-v0-alpha-400",children:(0,a.jsx)(c$,{blockId:t})}),(0,a.jsxs)("div",{className:"flex w-full h-full justify-center items-center relative overflow-hidden",children:[(0,a.jsx)(cY,{visible:"preview"===s,children:(0,a.jsx)(cS,{subdomain:d,blockId:t,chatId:n,status:c,iframeRef:o})}),(0,a.jsx)(cY,{className:"z-20",visible:"code"===s,children:i?(0,a.jsx)(cv,{block:i}):(0,a.jsx)(i4.Skeleton,{className:"w-full h-full"})}),i?(0,a.jsx)(cJ,{onEdit:m,block:i,iframeRef:o}):null]})]})})}function cY({visible:e,children:t,...n}){var r;return(0,a.jsx)("div",{...n,className:(0,iV.cn)("absolute inset-0 z-50 flex items-center justify-center bg-v0-background-200",n.className),style:{...(r=e,{...(0,op.visibleStylesIf)(r),...(0,cd.transitionStyles)(["opacity","transform","filter"],{delay:100*!!r}),transform:`scale(${r?1:1.005})`}),...n.style},children:t})}function cJ({onEdit:e,block:t,iframeRef:n}){let{actions:r}=(0,cx.useCurrentChatVM)(),{files:s}=(0,cf.useBlockFiles)({blockId:t.id,closed:t.closed,source:t.source,meta:t.meta}),{editValueMap:i,setEditValueMap:a}=(0,i6.useEditValueMap)({blockId:t.id}),o=(0,y.useLatest)(s),c=(0,y.useLatest)(i),d=(0,l.useEffectEvent)((n,r,s,i,o)=>{if(!t.closed)return;let l={...c.current,[r]:n};o||a(l),e(r,n)}),u=(0,l.useEffectEvent)((e,t,n,r,s,i,a,l,u)=>{if(!o.current)return;let h=o.current.findIndex(t=>t.meta.file===e);if(-1===h)return void d(s,e,i,!0,u);let p=a??c.current[e]??o.current[h].source;if(l){let[e,t]=l;p=p.substring(0,e)+s+p.substring(t)}else{let e=p.split("\n"),i=0;for(let n=0;n<t-1;n++)i+=e[n].length+1;p=p.substring(0,i+n-1)+s+p.substring(i+n-1+r)}d(p,e,i,!0,u)});return(0,l.useEffect)(()=>{eZ.designModeInlineEditRef.current={inlineEdit(e,t,r,s,i,a,o,l){n.current&&n.current.contentWindow?.postMessage({__v0_remote__:!0,type:"sync_version",version:a},"*"),u(e,t,r,s,i,a,o,l)},bulkFileChange:e=>{},getContent(e){if(!o.current)return;let t=o.current.findIndex(t=>t.meta.file===e);if(-1!==t)return o.current[t]?.source},jumpToFile(e,t,n){r.setSelectedTab("code"),r.setActiveFilePath(e,[t,n])},postMessage:e=>{n.current&&n.current.contentWindow?.postMessage({__v0_remote__:!0,...e},"*")}}},[]),null}var cK=e.i(923510);let cQ=(0,l.createContext)(null);function c0({children:e,id:t,noBackground:n,allowAutoCollapse:r}){let s=(0,l.useMemo)(()=>({id:t,noBackground:n,allowAutoCollapse:r}),[t,n,r]);return(0,a.jsx)(cQ.Provider,{value:s,children:e})}let c1=(0,l.createContext)(null);function c2({children:e,layoutId:t,atoms:{panelsLayoutAtom:n,mobilePanelAtom:r}}){let s=(0,l.useMemo)(()=>({atoms:(0,cK.getPanelLayoutAtoms)(t,{panelsLayoutAtom:n,mobilePanelAtom:r}),actions:(0,cK.getPanelLayoutActions)(t,{panelsLayoutAtom:n,mobilePanelAtom:r}),layoutId:t}),[t,n,r]);return(0,a.jsx)(c1.Provider,{value:s,children:e})}function c5(){let e=(0,l.useContext)(c1);if(!e)throw Error("usePanelLayout must be used within a PanelLayoutProvider");let{atoms:t,actions:n,layoutId:r}=e;return(0,l.useMemo)(()=>({atoms:t,actions:n,layoutId:r}),[t,n,r])}var c3=e.i(775320),c4=e.i(142219);function c6({gridArea:e,from:t,to:n,containerRef:r}){let{atoms:s,actions:i}=c5(),o=(0,sJ.useAtomValue)(s.resizingId),c=(0,sJ.useAtomValue)(s.panelOrder),{setIsResizing:u,resizePanel:h,closePanel:p,openPanel:f,isAutoCollapsible:m,getPanelMinRatio:g,getPanelMinPixelsSize:x,setCursorState:v}=i,b=(0,l.useCallback)((e,t)=>{let n=g(e),r=x(e);return r>0&&t>0?Math.max(n,r/t):n},[g,x]),y=(0,l.useRef)({isActive:!1,startMouseX:0,containerLeft:0,containerWidth:0,currentMouseX:0,cursorState:"normal"}),j=!!(t&&n),w=(0,l.useCallback)(e=>{let r=y.current;if(!r.isActive||!t||!n)return;r.currentMouseX=e.clientX;let i=(e.clientX-r.containerLeft)/r.containerWidth,a=c4.store.get(s.panelsLayout),o=a.find(e=>e.id===t),l=a.find(e=>e.id===n);if(!o||!l)return;let d=c.findIndex(e=>e===t),u=0,g=0;for(let e=0;e<d;e++){let t=a.find(t=>t.id===c[e]);t?.visible&&(u+=t.ratio),g+=c3.RESIZE_HANDLE_WIDTH}let x=i-(u+(g/r.containerWidth||0)),j=o.ratio+l.ratio,w=Math.max(0,Math.min(x,j)),k=j-w,C=b(t,r.containerWidth),S=b(n,r.containerWidth);if(o.visible&&o.ratio<=C+.01&&w<.7*C&&m(t))return void p(t);if(l.visible&&l.ratio<=S+.01&&k<.7*S&&m(n))return void p(n);if(x>=0&&x<=j){if(!o.visible&&w>C)return void f(t);if(!l.visible&&k>S)return void f(n);if(o.visible&&l.visible){let e=Math.max(C,Math.min(j-S,w))-o.ratio;Math.abs(e)>.001&&h({index:d,delta:e,containerWidth:r.containerWidth})}}let M=o.visible&&o.ratio<=C+.02,N=l.visible&&l.ratio<=S+.02,I=c4.store.get(s.cursorState),T="normal";!o.visible&&w<=C&&m(t)?T="expand-right":!l.visible&&k<=S&&m(n)?T="expand-left":M&&m(t)?T="collapse-left":N&&m(n)&&(T="collapse-right"),T!==I&&v(T)},[t,n,s.panelsLayout,s.cursorState,c,b,m,f,h,v,p]),k=(0,l.useCallback)(()=>{let e=y.current;if(t&&n&&e.isActive&&Math.abs(e.currentMouseX-e.startMouseX)/e.containerWidth>.05){let r=c4.store.get(s.panelsLayout),i=r.find(e=>e.id===t),a=r.find(e=>e.id===n),o=e.currentMouseX>e.startMouseX;o&&i&&!i.visible&&m(t)?f(t):!o&&a&&!a.visible&&m(n)&&f(n)}y.current.isActive=!1,v("normal"),u(null),window.removeEventListener("mousemove",w),window.removeEventListener("mouseup",k)},[u,w,v,t,n,s.panelsLayout,m,f]),C=(0,l.useCallback)(s=>{if(!j||!t||!n||!r.current)return;s.preventDefault();let i=r.current.getBoundingClientRect();y.current={isActive:!0,startMouseX:s.clientX,containerLeft:i.left,containerWidth:i.width,currentMouseX:s.clientX,cursorState:"normal"},v("normal"),u(e),window.addEventListener("mousemove",w,{passive:!0}),window.addEventListener("mouseup",k)},[t,n,j,e,u,r,w,k,v]),S=(0,l.useMemo)(()=>o===e,[o,e]);return(0,a.jsxs)("div",{role:"separator",tabIndex:S?0:-1,"aria-orientation":"vertical",style:{gridArea:e,width:c3.RESIZE_HANDLE_WIDTH},className:(0,d.cn)("group relative z-20 items-center justify-center outline-none sm:flex hidden",S?"pointer-events-none":"cursor-col-resize"),onMouseDown:C,"data-testid":"block-resize-handle",children:[(0,a.jsx)("div",{className:(0,d.cn)("absolute h-[80%] w-[1.5px] rounded-full opacity-0 group-hover:opacity-100 bg-gradient-to-b from-transparent via-gray-400 to-transparent ","group-focus-visible:via-blue-500 group-focus-visible:opacity-100","transform-[scaleY(0)] group-hover:transform-[scaleY(1)] group-focus-visible:transform-[scaleY(1)]"),style:{transform:S?"scale(1)":void 0,opacity:S?1:void 0,...(0,cd.transitionStyles)(["background","opacity","scale","transform"],{duration:300})}}),(0,a.jsx)("div",{className:(0,d.cn)("absolute inset-y-0 w-6",j?"":"pointer-events-none")}),(0,a.jsx)("div",{className:(0,d.cn)("absolute h-full max-h-16 w-1.5 rounded-full","opacity-0 group-hover:opacity-100","transform-[scale(0.75)] group-hover:transform-[scale(1)] group-focus-visible:transform-[scale(1)]",S?"bg-v0-gray-900":"bg-v0-gray-500",!j&&"hidden"),style:{opacity:S?1:void 0,maxHeight:S?48:36,transform:S?"scale(1)":void 0,...(0,cd.transitionStyles)(["max-height","transform","background","opacity"],{duration:100})}})]})}var c9=e.i(626085),c8=e.i(154032);let c7=(0,l.memo)(function({className:e}){return(0,a.jsx)("div",{className:(0,d.cn)("h-full w-full bg-v0-gray-100",e)})});function de({id:e,children:t,className:n,noBackground:r,allowAutoCollapse:s=!1,minRatio:i,maxRatio:o,minPixelsSize:c}){let{atoms:u,actions:h}=c5(),p=(0,sJ.useAtomValue)(u.panelOrder),f=(0,sJ.useAtomValue)(u.disableLayoutAnimations),m=(0,sJ.useAtomValue)(u.visiblePanels),g=(0,F.useIsMobile)(dn),x=(0,sJ.useAtomValue)(u.isResizing),v=(0,c8.useIsWindowResizing)(),b=(0,sJ.useAtomValue)(u.mobilePanel),y=g?b!==e:!m.includes(e),j=m.length>0,w=p.indexOf(e)<p.indexOf(b),k=v||x,C=(0,l.useMemo)(()=>{let e=1;y&&!g&&(e=.98);let t=0;if(g&&(t=y?w?"-100%":"100%":"0px"),1!==e||0!==t)return`scale(${e}) translateX(${t})`},[y,w,g]),S=(0,l.useMemo)(()=>y||g||k||f?0:200,[y,g,k,f]),M=(0,l.useMemo)(()=>k?0:g?200:y?75:200,[y,g,k]);(0,l.useEffect)(()=>(s?h.registerAutoCollapsiblePanel(e):h.unregisterAutoCollapsiblePanel(e),void 0!==i&&h.setPanelMinRatio(e,i),void 0!==o&&h.setPanelMaxRatio(e,o),void 0!==c&&h.setPanelMinPixelsSize(e,c),()=>{h.unregisterAutoCollapsiblePanel(e),h.removePanelRatios(e),h.removePanelMinPixelsSize(e)}),[s,i,o,c,e,h]);let N=(0,l.useMemo)(()=>v&&b!==e?"hidden sm:flex":"",[e,b,v]);return(0,a.jsxs)(c0,{id:e,noBackground:r??!1,allowAutoCollapse:s,children:[(0,a.jsx)("div",{style:{gridArea:e,...(0,op.visibleStylesIf)(!g&&!r&&j),...(0,cd.transitionStyles)(["opacity"],{delay:j&&!k?200:0,duration:M})},className:(0,d.cn)("relative overflow-hidden",N),children:(0,a.jsx)("div",{className:"absolute inset-[2px] rounded-md bg-v0-gray-100"})}),(0,a.jsx)("div",{style:{gridArea:e,transform:C,...(0,op.visibleStylesIf)(!y),...(0,cd.transitionStyles)(["opacity","transform"],{delay:S,duration:M}),pointerEvents:x?"none":void 0},className:(0,d.cn)("relative z-10 flex h-full w-full flex-col overflow-hidden",r?"material-hidden":"material-medium",N,n),...(0,op.a11yHideIf)(y),children:t}),x&&(0,a.jsx)("div",{className:"absolute inset-0 z-20",style:{pointerEvents:"all"}})]})}function dt({children:e,className:t,layoutId:n,atoms:r}){return(0,a.jsx)(c2,{layoutId:n,atoms:r,children:(0,a.jsx)(dr,{className:t,children:e})})}let dn=640;function dr({children:e,className:t}){let n=(0,l.useId)(),r=`panel-group-${n.replace(/[^a-zA-Z0-9]/g,"-")}`,{atoms:s}=c5(),i=(0,sJ.useAtomValue)(s.isResizing),o=(0,c8.useIsWindowResizing)(),c=(0,sJ.useAtomValue)(s.cursorState),u=(0,sJ.useAtomValue)(s.isReordering),h=(0,l.useRef)(null),p=(0,sJ.useAtomValue)(s.visiblePanels),f=(0,c9.usePrevious)(p),m=(0,sJ.useAtomValue)(s.disableLayoutAnimations),{desktopGridTemplateAreas:g,desktopGridTemplateColumns:x,desktopGridTemplateColumnsUsingCqw:v}=(0,sJ.useAtomValue)(s.gridProperties),b=(0,sJ.useAtomValue)(s.panelOrder),y=(0,l.useMemo)(()=>f&&f.length<p.length,[f,p]),j=(0,F.useIsMobile)(),w=(0,l.useMemo)(()=>!1,[]),k=(0,l.useMemo)(()=>{if(i)switch(c){case"collapse-left":case"expand-left":return"w-resize";case"collapse-right":case"expand-right":return"e-resize";default:return"col-resize"}},[i,c]),C=(0,l.useMemo)(()=>{let e=[];for(let t=0;t<b.length-1;t++){let n=b[t],r=b[t+1],s=!!r;e.push((0,a.jsx)(c6,{gridArea:`resize-${t}`,from:s?n:void 0,to:s?r:void 0,containerRef:h},`resize-${t}`))}return e},[b,h]);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("style",{children:`
          .${r} {
            container-type: inline-size;
            grid-template-rows: 1fr;
            grid-template-columns: 1fr;
          }
          @media (max-width: ${dn-1}px) {
            .${r} > * {
              grid-area: 1 / 1 !important;
            }
          }
          @media (min-width: ${dn}px) {
            .${r} {
            grid-template-areas: ${g};
              grid-template-columns: ${x};
            }
            @supports (container-type: inline-size) {
              .${r} {
                grid-template-columns: ${w?v:x};
              }
            }
          }
          
        `}),(0,a.jsxs)("div",{ref:h,className:(0,d.cn)(r,"relative grid h-full w-full max-w-full contain-strict",t),style:{cursor:k,...i||u||o||m?{}:(0,cd.transitionStyles)(["grid-template-columns"],{duration:200*!j,delay:y||j?0:75})},children:[e,C]})]})}var ds=e.i(295191),di=e.i(569543),da=e.i(987761),dl=e.i(566274),dc=e.i(857371);function dd({isAuthor:e,isMobile:t,remote:n,templates:r}){let s=(0,l.useRef)(null),{fullScreenResult:i}=(0,dl.useFullscreenResult)(),{atoms:o}=(0,iA.useCurrentChat)(),c=(0,sJ.useAtomValue)(o.title),{vr:x}=(0,W.useFlags)(),{chatId:v}=(0,g.useChatId)(),b=(0,h.useActiveBlockState)();!b&&n&&(b={id:"@remote",meta:{},type:"local",messageId:"",source:"",language:"plaintext",closed:!0,remoteInfo:void 0,forkedFromBlockId:void 0});let y=(0,h.useSetActiveBlockState)(),{ensureBlockSource:j}=(0,m.useBlockHistory)({blockId:b?.id});(0,l.useEffect)(()=>{(async()=>{if(b?.needsBlockSource){let e=await j().catch(()=>{console.error("Failed to load block source for block",b.id)});y({...b,...e?{source:e}:{},needsBlockSource:!1})}})()},[b,j,y]);let w=(0,p.useRenderedBlock)({block:b,initialSize:u.DEFAULT_BLOCK_SIZE,location:"header",isAuthor:e,title:c??void 0}),k=(0,f.useIsChatPage)(),{atoms:C}=(0,lx.useChatLayout)(),S=(0,sJ.useAtomValue)(C.mobilePanel),M=(0,lx.getChatLayoutActions)();return(0,a.jsxs)("div",{className:(0,d.cn)("relative flex min-w-0 flex-1 flex-col"),...(0,op.a11yHideIf)(i),children:[(0,a.jsx)(l.Suspense,{children:(0,a.jsx)(du,{})}),k&&b?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(iW.TabsToggle,{value:S,onValueChange:e=>M.setMobilePanel(e),className:"grid grid-cols-2 m-2 flex-shrink-0 sm:hidden",children:[(0,a.jsx)(iW.TabsToggleTrigger,{value:di.CHAT_INPUT_PANEL_ID,children:"Chat"}),(0,a.jsx)(iW.TabsToggleTrigger,{value:di.CHAT_OUTPUT_PANEL_ID,children:"Preview"})]}),(0,a.jsxs)(dt,{className:"px-2 sm:pb-2",layoutId:"chat",atoms:(0,lx.getWritableChatPanelLayoutAtoms)(),children:[(0,a.jsx)(dh,{}),(0,a.jsx)(de,{id:di.CHAT_INPUT_PANEL_ID,className:"relative",noBackground:!0,minRatio:.2,maxRatio:.8,minPixelsSize:250,allowAutoCollapse:!0,children:(0,a.jsx)(l1,{isAuthor:e,isMobile:t,templates:r,emptyScreenRef:s})}),(0,a.jsx)(de,{id:di.CHAT_OUTPUT_PANEL_ID,children:(0,a.jsx)(l.Suspense,{fallback:(0,a.jsx)(c7,{}),children:x?v&&b.id?(0,a.jsx)(cZ,{chatId:v,blockId:b.id}):(0,a.jsx)("span",{children:"no chatId or blockId or drawerView"}):(0,a.jsx)(cl,{activeBlockState:b,renderedBlock:w,remote:n})})})]})]}):(0,a.jsxs)(da.AppCard,{className:k?"border-0 bg-transparent shadow-none":"@container/page-layout",children:[k?null:(0,a.jsx)(ds.PageHeader,{title:null,scrollRef:s,hideBorder:!0,filters:null,actions:null}),(0,a.jsx)(l1,{isAuthor:e,isMobile:t,templates:r,emptyScreenRef:s})]})]})}function du(){return!function(){let{latestRevalidate:e,chatId:t}=function(){let{messages:e,activeForkKey:t}=(0,g.useChatMessages)(),{isLoading:n,isStreaming:r,isRestoring:s,isContinuing:i}=(0,g.useChatLoadingState)(),{lastSyncedAt:a}=(0,g.useChatSyncState)(),o=(0,v.useChatId)(),c=(0,x.getLeafMessageIdFromForkKey)(t),{submit:d}=(0,C.useV0Chat)(),u=(0,g.useSetChatState)(),{switchToBlock:h}=z(),p=(0,l.useCallback)(n=>{let r;if(!n.ok||!t)return;let{deletedMessageIds:s,newMessages:i,syncedAt:a,resumeUserMessageMap:o}=n.value;if(!s.length&&!i.length)return;let l=new Set(e.map(e=>e.id)),c=i.filter(e=>!l.has(e.id)),p=new Map(i.map(e=>[e.id,e])),f=new Set(s),m=[...e.map(e=>{let t=p.get(e.id);return t||e}),...c].filter(e=>!f.has(e.id)),g=t.find(e=>f.has(e));g?h((r=V({messages:e,targetMessageId:g}))||[]):r=t;let v=(0,x.getLeafNodeForkKey)(m,r||void 0,"right"),b=(0,x.getLeafMessageIdFromForkKey)(v),y=o[b||"never_match"],j=new Set(Object.keys(o).filter(e=>e!==b));j.size>0&&(m=m.filter(e=>!j.has(e.id))),u({activeForkKey:v,messages:m,lastSyncedAt:a}),!b||y?.type!=="resumed"||l.has(y.responseMessageId)||l.has(b)||d({action:"new",content:null},y,{activeForkKey:v,avoidAutoSwitchingBlock:!0,messages:m})},[e,t,u,h,d]),f=!t||!c||n||r||s||i||!o,{revalidate:m}=(0,b.useServerQuerySWR)(["chat","latest"],{chatId:o,lastSyncedAt:a},{onSuccess:p,stopFetch:f,omitParamsFromFetchKey:!0,suspense:!0});return{latestRevalidate:(0,y.useLatest)(m),chatId:o}}(),n=(0,l.useRef)(null),r=(0,l.useRef)(null),s=(0,l.useRef)(!1),{user:i}=(0,H.useUser)(),{userOnFree:a}=(0,S.useUserOnFree)(),o=i&&!a,c=(0,l.useCallback)(()=>{if(!o||!t||n.current)return;let s=k();if(!s)return;s.connect();let i=u.PUSHER_EVENTS.latestChat.getChannelName(t),a=()=>{e.current()},l=s.subscribe(i);l.bind(U,a),n.current=l,r.current=a},[t,e,o]),d=(0,l.useCallback)(()=>{k()?.disconnect(),n.current&&r.current&&(n.current.unbind(U,r.current),n.current.unsubscribe(),n.current=null,r.current=null)},[]),h=(0,l.useCallback)(()=>{"visible"===document.visibilityState?s.current&&(s.current=!1,e.current(),c()):(s.current=!0,d())},[e,c,d]);(0,l.useEffect)(()=>{if(t)return c(),document.addEventListener("visibilitychange",h),()=>{document.removeEventListener("visibilitychange",h),d()}},[t,c,h,d])}(),null}function dh(){let e=(0,F.useIsMobile)(640),t=(0,dc.usePreviousValue)(e),n=(0,lx.getChatLayoutActions)();return(0,l.useEffect)(()=>{!t&&e&&n.setMobilePanel("output")},[e,t]),null}var dp=e.i(448199);let df=({messagesPromise:e})=>((({messagesPromise:e})=>{let t=e?(0,l.use)(e):void 0,n=(0,g.useSetChatState)(),{messages:r}=(0,g.useChatMessages)(),{scrollToBottom:s}=(0,O.useScrollToMessage)();(0,l.useEffect)(()=>{if(!t)return;let e=t.reduce((e,t)=>(e[t.id]=t.content,e),{}),i=!1,a=r.map(t=>{let n=e[t.id];return n&&"assistant"===t.role&&t.isContentLoading&&"message-binary-format"===n.type?(i=!0,{...t,content:n,isContentLoading:!1}):t});i&&(n({messages:a}),s())},[t,n,r,s])})({messagesPromise:e}),null);var dm=e.i(502398);function dg({initialToast:e,isMobile:t,isAuthor:n,isRemote:r,hasSignedIn:s,templatesServer:i,delayedMessages:d}){let u=(0,c.useSearchParams)(),h=(0,c.useRouter)(),{setShowEnvModal:p}=(0,dp.useEnvModal)();return((0,l.useEffect)(()=>{if(u.get("signout")){let e="1"===u.get("revoke_failed");h.replace("/chat"),setTimeout(()=>{e?o.toast.info("You have successfully signed out.",{width:460,style:{maxWidth:"calc(100vw - 2rem)"},description:(0,a.jsxs)(a.Fragment,{children:["To sign in or sign up with a different Vercel account, first sign out on"," ",(0,a.jsxs)(dm.Link,{className:"inline-flex items-center gap-1 underline",external:!0,href:"https://vercel.com/account",children:["vercel.com",(0,a.jsx)(J.External,{className:"inline-block size-3"})]})]}),action:{children:(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("span",{children:"Visit"}),(0,a.jsx)("span",{className:"hidden md:inline",children:" Vercel"})]}),onClick:()=>{window.open("https://vercel.com/account","_blank","noopener,noreferrer")}},duration:1e5}):o.toast.success("Successfully signed out")},0)}},[u,h]),(0,l.useEffect)(()=>{if(u.get("env")){let e=new URL(window.location.href);e.searchParams.delete("env"),window.history.replaceState({}," ",e.toString()),p(!0)}},[u,p]),(0,l.useEffect)(()=>{e&&setTimeout(()=>o.toast.default(e,{duration:5e3}))},[e]),r)?(0,a.jsx)(dd,{isAuthor:n,isMobile:t,remote:!0,templates:i}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(l.Suspense,{fallback:null,children:[s?(0,a.jsx)(dp.default,{v0ProjectId:null}):null,(0,a.jsx)(df,{messagesPromise:d})]}),(0,a.jsx)(dd,{isAuthor:n,isMobile:t,remote:!1,templates:i})]})}e.s(["FullChat",()=>dg],900547)},620470,e=>{"use strict";var t=e.i(672042),n=e.i(423746),r=e.i(176248),s=e.i(686832),i=e.i(848751),a=e.i(547218),o=e.i(734858),l=e.i(582802),c=e.i(88139),d=(0,c.createServerReference)("40f81f5359bc25ab2f4290a119379b898a503257ce",c.callServer,void 0,c.findSourceMapURL,"cancelPremiumAfterTeamUpgrade");e.i(563948);var u=e.i(407562),h=e.i(211976);function p({teamName:e,teamSlug:a,showDowngradeCta:o}){let l=(0,i.useRouter)(),c=(0,i.usePathname)(),d=(0,i.useSearchParams)(),[u,h]=(0,n.useState)(!!(e||a)),p=(0,n.useCallback)(()=>{let e=new URLSearchParams(Array.from(d.entries()));for(let t of["teamSlug","teamName"])e.delete(t);let t=e.toString();l.replace(`${c}${t?`?${t}`:""}`)},[c,l,d]),m=(0,n.useCallback)(()=>{p(),h(!1)},[p]);return o?(0,t.jsx)(f,{teamName:e,teamSlug:a}):(0,t.jsxs)(s.Modal,{onOpenChange:m,open:u,children:[(0,t.jsxs)(s.ModalHeader,{children:[(0,t.jsx)(s.ModalTitle,{children:"Upgrade Confirmed"}),(0,t.jsxs)(s.ModalDescription,{children:["Your Team subscription"," ",e?(0,t.jsxs)(t.Fragment,{children:["for ",(0,t.jsx)("span",{className:"font-medium",children:e})," "]}):(0,t.jsx)("span",{children:""}),(0,t.jsxs)("span",{children:["has been confirmed! You can invite additional members in your Vercel Team's settings."," "]})]})]}),(0,t.jsxs)(s.ModalFooter,{children:[(0,t.jsx)(r.Button,{size:"sm",variant:"secondary",children:(0,t.jsx)("a",{target:"_blank",href:a?`https://vercel.com/${a}/~/settings/members`:"https://vercel.com",children:"Manage Members"})}),(0,t.jsx)(r.Button,{size:"sm",onClick:m,variant:"default",children:"Start Building"})]})]})}function f({teamName:e,teamSlug:c}){let p=(0,i.useRouter)(),f=(0,i.usePathname)(),m=(0,i.useSearchParams)(),[g,x]=(0,n.useState)(!!(e||c)),[v,b]=(0,n.useState)(!1),[y,j]=(0,n.useState)(!1),[w,k]=(0,n.useTransition)(),C=(0,n.useCallback)(()=>{let e=new URLSearchParams(Array.from(m.entries()));for(let t of["teamSlug","teamName","cta"])e.delete(t);let t=e.toString();p.replace(`${f}${t?`?${t}`:""}`)},[f,p,m]),S=(0,n.useCallback)(()=>{C(),x(!1)},[C]),M=(0,n.useCallback)(()=>{b(!1)},[]),N=(0,n.useCallback)(()=>{w||k(async()=>{"error"in await d(c)?u.toast.error("Failed to cancel Premium plan. Please try again or reach out to Customer Support to cancel your Premium plan."):(j(!0),M())})},[w,M,c]);return v?(0,t.jsxs)(s.Modal,{onOpenChange:S,open:g,children:[(0,t.jsxs)(s.ModalHeader,{children:[(0,t.jsx)(s.ModalTitle,{children:"Cancel your Premium Plan"}),(0,t.jsxs)(s.ModalDescription,{children:["We have successfully created a new Team plan",e?(0,t.jsxs)(t.Fragment,{children:[" ","for ",(0,t.jsx)("span",{className:"font-medium",children:e}),"."]}):(0,t.jsx)("span",{children:"."})," ",(0,t.jsx)("span",{children:"Would you like to cancel your active personal Premium plan? We will apply a credit for the remaining time on your Premium billing period towards your new Team plan."})]})]}),(0,t.jsxs)(s.ModalFooter,{children:[(0,t.jsx)(r.Button,{size:"sm",variant:"secondary",onClick:M,children:"Keep Both Plans"}),(0,t.jsx)(h.SpinnerButton,{size:"sm",onClick:N,pending:w,children:"Cancel Premium"})]})]}):(0,t.jsxs)(s.Modal,{onOpenChange:S,open:g,children:[(0,t.jsxs)(s.ModalHeader,{children:[(0,t.jsx)(s.ModalTitle,{children:"Team Plan Confirmed"}),(0,t.jsxs)(s.ModalDescription,{children:["Your Team subscription"," ",e?(0,t.jsxs)(t.Fragment,{children:["for ",(0,t.jsx)("span",{className:"font-medium",children:e})," "]}):(0,t.jsx)("span",{children:""}),(0,t.jsx)("span",{children:"has been confirmed!"})]})]}),(0,t.jsxs)(s.ModalContent,{className:"flex flex-col gap-3",children:[(0,t.jsx)(r.Button,{className:"h-fit p-0 text-left",variant:"secondary",children:(0,t.jsxs)("a",{className:"flex w-full items-center justify-between gap-3 p-3 pr-[14px] text-v0-gray-900",target:"_blank",href:c?`https://vercel.com/${c}/~/settings/members`:"https://vercel.com",children:[(0,t.jsxs)("div",{className:"flex h-fit flex-col text-sm",children:[(0,t.jsx)("b",{className:"font-medium text-v0-gray-1000",children:"Manage Members"}),(0,t.jsx)("p",{className:"font-normal",children:"Add more members to your team on Vercel."})]}),(0,t.jsx)(l.External,{})]})}),(0,t.jsxs)(r.Button,{className:"flex h-fit w-full items-center justify-between gap-3 p-3 pr-[14px] text-left text-v0-gray-900",variant:"secondary",onClick:()=>b(!0),disabled:y,children:[(0,t.jsxs)("div",{className:"flex h-fit flex-col text-sm",children:[(0,t.jsx)("b",{className:"font-medium text-v0-gray-1000",children:y?"Premium Cancelled":"Cancel Premium Plan"}),(0,t.jsx)("p",{className:"font-normal",children:y?"Your Premium plan was canceled.":"Would you like to cancel your existing Premium plan?"})]}),y?(0,t.jsx)(a.CheckCircleFill,{}):(0,t.jsx)(o.ChevronRight,{})]})]}),(0,t.jsx)(s.ModalFooter,{children:(0,t.jsx)(r.Button,{size:"sm",onClick:S,variant:"default",children:"Start Building"})})]})}e.s(["WelcomeModal",()=>p],620470)},25381,e=>{"use strict";var t=e.i(672042),n=e.i(88139),r=(0,n.createServerReference)("7f90739cc2b38aa3f62c4a1d9cebcafe1e93260c8c",n.callServer,void 0,n.findSourceMapURL,"getHomepageTemplatesAuthedAction"),s=e.i(790958);e.s(["InfiniteListClient",0,e=>(0,t.jsx)(s.TemplateListInfiniteClient,{...e,templatesGetter:r})],25381)},322081,e=>{"use strict";var t=e.i(672042),n=e.i(502398),r=e.i(479273),s=e.i(304649),i=e.i(120282);function a({children:e}){return(0,t.jsx)("div",{className:"text-left text-base font-medium",children:e})}function o({children:e}){let{locale:n}=(0,r.useLocale)();return(0,t.jsx)("div",{className:(0,s.cn)("text-sm text-pretty text-v0-gray-900",n===i.esLocaleInfo.iso639&&"text-[13px] sm:text-sm"),children:e})}function l({children:e}){return(0,t.jsx)("span",{className:"hidden md:inline",children:e})}function c({className:e,...r}){return(0,t.jsx)(n.Link,{className:(0,s.cn)("flex items-center gap-1.5 text-sm text-v0-gray-900 hover:text-v0-gray-1000 focus:text-v0-gray-1000",e),...r})}e.s(["TemplateFeaturedBrowseLink",()=>c,"TemplateFeaturedHeading",()=>a,"TemplateFeaturedSubheading",()=>o,"TemplateFeaturedSubheadingText",()=>l])},487989,e=>{"use strict";var t=e.i(672042);e.i(472428);var n=e.i(296900);function r({chatId:e}){let{data:r}=(0,n.useServerQuerySWR)(["chat","attributes"],{chatId:e},{suspense:!0}),s=r.ok?r.value.title:null;return"string"==typeof s&&s.length>0?(0,t.jsx)("title",{children:`${s} - v0 by Vercel`}):null}e.s(["SuspendingKeepTitleUpdated",()=>r])}]);